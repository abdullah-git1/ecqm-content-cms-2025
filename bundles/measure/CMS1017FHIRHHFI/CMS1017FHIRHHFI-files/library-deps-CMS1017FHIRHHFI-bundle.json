{"resourceType":"Bundle","id":"library-deps-CMS1017FHIRHHFI-bundle-bundle","type":"transaction","timestamp":"2025-07-09T09:47:58.343-06:00","entry":[{"resource":{"resourceType":"Library","id":"CMS1017FHIRHHFI","meta":{"profile":["http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary","http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-computablelibrary","http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary","http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-executablelibrary","http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library","http://hl7.org/fhir/uv/cql/StructureDefinition/elm-json-library","http://hl7.org/fhir/uv/cql/StructureDefinition/elm-xml-library"]},"language":"en","text":{"status":"extensions","div":"<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"col-12\">  \n         <table xmlns=\"null\" class=\"narrative-table\"> \n            <tbody xmlns=\"http://www.w3.org/1999/xhtml\"> \n               <tr> \n                  <th colspan=\"2\" scope=\"row\" class=\"row-header\">Knowledge Artifact Metadata</th> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Name (machine-readable)</th> \n                  <td class=\"content-container\">CMS1017FHIRHHFI</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Title (human-readable)</th> \n                  <td class=\"content-container\">CMS1017FHIRHHFI</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Status</th> \n                  <td class=\"content-container\">active</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Experimental</th> \n                  <td class=\"content-container\">false</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Description</th> \n                  <td class=\"content-container\">CMS1017FHIRHHFI</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Library Steward</th> \n                  <td class=\"content-container\">Centers for Medicare &amp; Medicaid Services (CMS)</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Library CQMCommon \n                     <br/> \n                     <em>Resource</em>: https://madie.cms.gov/Library/CQMCommon|4.1.000 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>https://madie.cms.gov/Library/CQMCommon|4.1.000</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Library QICoreCommon \n                     <br/> \n                     <em>Resource</em>: https://madie.cms.gov/Library/QICoreCommon|4.0.000 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>https://madie.cms.gov/Library/QICoreCommon|4.0.000</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Library CMD \n                     <br/> \n                     <em>Resource</em>: https://madie.cms.gov/Library/CumulativeMedicationDuration|6.0.000 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>https://madie.cms.gov/Library/CumulativeMedicationDuration|6.0.000</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Library SDE \n                     <br/> \n                     <em>Resource</em>: https://madie.cms.gov/Library/SupplementalDataElements|5.1.000 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>https://madie.cms.gov/Library/SupplementalDataElements|5.1.000</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Present on Admission or Clinically Undetermined \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.197 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.197</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Osteoporosis \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1200.147 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1200.147</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Coagulation Disorders \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.23 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.23</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Antidepressants \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.163 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.163</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Not Present On Admission or Documentation Insufficient to Determine \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.198 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.198</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Leukemia or Lymphoma \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.136 \n                     <br/> \n                     <em>Canonical URL</em>:  \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.136</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Obesity \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.162 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.162</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Peripheral Neuropathy \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.175 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.175</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Delirium, Dementia, and Other Psychoses \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.168 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.168</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Suicide Attempt \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.130 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.130</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Liver Disease Moderate to Severe \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.137 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.137</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Anticoagulants for All Indications \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Neurologic Movement and Related Disorders \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.174 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.174</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Abnormal Weight Loss \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1258.2 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1258.2</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Malnutrition \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1272.1 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1272.1</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Depression \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.169 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.169</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Epilepsy \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.171 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.171</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Diuretics \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.170 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.170</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Central Nervous System Depressants \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.134 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.134</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Malignant Bone Disease \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.24 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.24</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Antihypertensives \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.164 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.164</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Opioids \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.120 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.120</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Inpatient Falls \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.171 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.171</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Major Injuries \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.120 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.120</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Moderate Injuries \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.205 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.205</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Stroke \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.176 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.176</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th colspan=\"2\" scope=\"row\" class=\"row-header\">Library Metadata</th> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Identifier</th> \n                  <td class=\"content-container\">org.hl7.fhir.r5.model.Identifier@2814ffe4</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Version Number</th> \n                  <td class=\"content-container\">0.2.000</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Library Type</th> \n                  <td class=\"content-container\">[http://terminology.hl7.org/CodeSystem/library-type#logic-library]</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.163 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value  \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.170 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.134 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.164 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.120 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication.reference.value, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: Medication \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication \n                     <br/> \n                     <em>Must Support Elements</em>: id.value, code \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: Patient \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient \n                     <br/> \n                     <em>Must Support Elements</em>: id, id.value \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: Claim \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-claim \n                     <br/> \n                     <em>Must Support Elements</em>: status, status.value, use, use.value, item \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationAdministration \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationadministration \n                     <br/> \n                     <em>Must Support Elements</em>: medication, effective, status, status.value \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationAdministration \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationadministration \n                     <br/> \n                     <em>Must Support Elements</em>: medication.reference.value, effective, status, status.value \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: Observation \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/core/StructureDefinition/us-core-bmi \n                     <br/> \n                     <em>Must Support Elements</em>: effective, value, status, status.value \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th colspan=\"2\" scope=\"row\" class=\"row-header\">Library Content</th> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">CQL Content</th> \n                  <td> \n                     <pre style=\"border: none;\" class=\"content-container highlight language-cql\"><code class=\"language-cql\">library CMS1017FHIRHHFI version '0.2.000'\n\nusing QICore version '6.0.0'\n\ninclude FHIRHelpers version '4.4.000' called FHIRHelpers\ninclude SupplementalDataElements version '5.1.000' called SDE\ninclude CQMCommon version '4.1.000' called CQMCommon\ninclude QICoreCommon version '4.0.000' called QICoreCommon\ninclude CumulativeMedicationDuration version '6.0.000' called CMD\n\ncodesystem &quot;LOINC&quot;: 'http://loinc.org'\n\nvalueset &quot;Abnormal Weight Loss&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1258.2'\nvalueset &quot;Anticoagulants for All Indications&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22'\nvalueset &quot;Antidepressants&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.163'\nvalueset &quot;Antihypertensives&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.164'\nvalueset &quot;Central Nervous System Depressants&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.134'\nvalueset &quot;Coagulation Disorders&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.23'\nvalueset &quot;Delirium, Dementia, and Other Psychoses&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.168'\nvalueset &quot;Depression&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.169'\nvalueset &quot;Diuretics&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.170'\nvalueset &quot;Epilepsy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.171'\nvalueset &quot;Inpatient Falls&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.171'\nvalueset &quot;Leukemia or Lymphoma&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.136'\nvalueset &quot;Liver Disease Moderate to Severe&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.137'\nvalueset &quot;Major Injuries&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.120'\nvalueset &quot;Malignant Bone Disease&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.24'\nvalueset &quot;Malnutrition&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1272.1'\nvalueset &quot;Moderate Injuries&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.205'\nvalueset &quot;Neurologic Movement and Related Disorders&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.174'\nvalueset &quot;Not Present On Admission or Documentation Insufficient to Determine&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.198'\nvalueset &quot;Obesity&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.162'\nvalueset &quot;Opioids&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.120'\nvalueset &quot;Osteoporosis&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1200.147'\nvalueset &quot;Peripheral Neuropathy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.175'\nvalueset &quot;Present on Admission or Clinically Undetermined&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.197'\nvalueset &quot;Stroke&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.176'\nvalueset &quot;Suicide Attempt&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.130'\n\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\n\ncontext Patient\n\ndefine &quot;Qualifying Encounter&quot;:\n  CQMCommon.&quot;Inpatient Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hospitalizationWithObservation ( ).lengthInDays ( ) &lt;= 120\n      and AgeInYearsAt(date from start of InpatientEncounter.period) &gt;= 18\n\ndefine &quot;Initial Population&quot;:\n  &quot;Qualifying Encounter&quot;\n\ndefine &quot;Denominator&quot;:\n  &quot;Initial Population&quot;\n\ndefine &quot;Numerator&quot;:\n  &quot;Encounter Where A Fall And Major Injury Occurred Not POA&quot;\n    union &quot;Encounter Where A Fall And Moderate Injury Occurred Not POA&quot;\n\ndefine &quot;Encounter Where A Fall And Moderate Injury Occurred Not POA&quot;:\n  &quot;Encounter With A Fall Not Present On Admission&quot; FallOccurred\n    where exists ( ( FallOccurred.claimDiagnosis ( ) ) ModerateFallOccurred\n        where ModerateFallOccurred.onAdmission is null\n          or ModerateFallOccurred.onAdmission in &quot;Not Present On Admission or Documentation Insufficient to Determine&quot;\n            and ( ModerateFallOccurred.diagnosis in &quot;Moderate Injuries&quot;\n                or ModerateFallOccurred.diagnosis.getCondition ( ).code in &quot;Moderate Injuries&quot;\n            )\n    )\n\ndefine &quot;Encounter Where A Fall And Major Injury Occurred Not POA&quot;:\n  &quot;Encounter With A Fall Not Present On Admission&quot; FallOccurred\n    where exists ( ( FallOccurred.claimDiagnosis ( ) ) MajorFallOccurred\n        where MajorFallOccurred.onAdmission is null\n          or MajorFallOccurred.onAdmission in &quot;Not Present On Admission or Documentation Insufficient to Determine&quot;\n            and ( MajorFallOccurred.diagnosis in &quot;Major Injuries&quot;\n                or MajorFallOccurred.diagnosis.getCondition ( ).code in &quot;Major Injuries&quot;\n            )\n    )\n\ndefine &quot;Encounter Where A Fall Occurred&quot;:\n  &quot;Encounter With A Fall Diagnosis&quot;\n    union &quot;Encounter With A Fall Event&quot;\n\ndefine &quot;Encounter With A Fall Not Present On Admission&quot;:\n  &quot;Encounter Where A Fall Occurred&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisNotPresentOnAdmissionOrNull ( &quot;Inpatient Falls&quot; )\n\ndefine &quot;Encounter With A Fall Diagnosis&quot;:\n  &quot;Qualifying Encounter&quot; QualifyingEncounter\n    where QualifyingEncounter.reasonCode in &quot;Inpatient Falls&quot;\n      or QualifyingEncounter.encountersDiagnosis ( ).code in &quot;Inpatient Falls&quot;\n\ndefine &quot;Encounter With A Fall Event&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [AdverseEvent: &quot;Inpatient Falls&quot;] FallsDocumentation\n      such that Coalesce(FallsDocumentation.date, FallsDocumentation.recordedDate) during InpatientEncounter.hospitalizationWithObservation ( )\n\ndefine &quot;Denominator Exclusions&quot;:\n  &quot;Encounter With A Fall Present On Admission&quot;\n\ndefine &quot;Numerator Exclusions&quot;:\n  &quot;Encounter With A Fall Present On Admission&quot;\n\ndefine &quot;Encounter With A Fall Present On Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Inpatient Falls&quot; )\n\ndefine &quot;Risk Variable Body Mass Index (BMI)&quot;:\n  from\n    [&quot;USCoreBMIProfile&quot;] BMI\n    with &quot;Qualifying Encounter&quot; InpatientEncounter\n      such that BMI.effective.toInterval ( ) starts during InpatientEncounter.hospitalizationWithObservation ( )\n        and BMI.value is not null\n        and BMI.status in { 'final', 'amended', 'corrected' }\n    return BMI.value as Quantity\n\ndefine &quot;Risk Variable All Encounter Diagnoses with Rank and POA Indication&quot;:\n  from\n    &quot;Qualifying Encounter&quot; InpatientEncounter\n    let claim: ( [Claim] C\n        where C.status = 'active'\n          and C.use = 'claim'\n          and exists ( C.item ClaimItem\n              where ClaimItem.encounter.references ( InpatientEncounter )\n          )\n    ),\n    claimItem: ( claim.item ClaimItem\n        where ClaimItem.encounter.references ( InpatientEncounter )\n    )\n    return Tuple {\n      encounterId: InpatientEncounter.id,\n      diagnosis: claim.diagnosis,\n      rank: claim.diagnosis.sequence,\n      POA: claim.diagnosis Diag\n        where Diag.onAdmission in &quot;Present on Admission or Clinically Undetermined&quot;\n          or Diag.onAdmission in &quot;Not Present On Admission or Documentation Insufficient to Determine&quot;\n    }\n\ndefine &quot;Risk Variable Encounter with Abnormal Weight Loss or Malnutrition Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Abnormal Weight Loss&quot; )\n      or InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Malnutrition&quot; )\n\ndefine &quot;Risk Variable Encounter with Anticoagulant Active at Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationRequest&quot;: &quot;Anticoagulants for All Indications&quot;] Anticoagulants\n      such that Anticoagulants.status in { 'active', 'completed' }\n        and ( Anticoagulants.intent = 'order'\n            or ( Anticoagulants.intent = 'plan'\n                and Anticoagulants.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and Anticoagulants.isCommunity ( )\n        and Anticoagulants.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period\n\ndefine &quot;Risk Variable Encounter with Anticoagulant Administration During Encounter&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationAdministration&quot;: &quot;Anticoagulants for All Indications&quot;] Anticoagulants\n      such that Anticoagulants.effective.toInterval ( ) starts during InpatientEncounter.hospitalizationWithObservation ( )\n        and Anticoagulants.status in { 'in-progress', 'completed' }\n\ndefine &quot;Risk Variable Encounter with Antidepressant Active at Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationRequest&quot;: &quot;Antidepressants&quot;] AntidepressantMed\n      such that AntidepressantMed.status in { 'active', 'completed' }\n        and ( AntidepressantMed.intent = 'order'\n            or ( AntidepressantMed.intent = 'plan'\n                and AntidepressantMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and AntidepressantMed.isCommunity ( )\n        and AntidepressantMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period\n\ndefine &quot;Risk Variable Encounter with Antihypertensive Active at Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationRequest&quot;: &quot;Antihypertensives&quot;] BPMed\n      such that BPMed.status in { 'active', 'completed' }\n        and ( BPMed.intent = 'order'\n            or ( BPMed.intent = 'plan'\n                and BPMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and BPMed.isCommunity ( )\n        and BPMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period\n\ndefine &quot;Risk Variable Encounter with CNS Depressant Active at Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationRequest&quot;: &quot;Central Nervous System Depressants&quot;] CNSMed\n      such that CNSMed.status in { 'active', 'completed' }\n        and ( CNSMed.intent = 'order'\n            or ( CNSMed.intent = 'plan'\n                and CNSMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and CNSMed.isCommunity ( )\n        and CNSMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period\n\ndefine &quot;Risk Variable Encounter with Diuretic Active at Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationRequest&quot;: &quot;Diuretics&quot;] DiureticMed\n      such that DiureticMed.status in { 'active', 'completed' }\n        and ( DiureticMed.intent = 'order'\n            or ( DiureticMed.intent = 'plan'\n                and DiureticMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and DiureticMed.isCommunity ( )\n        and DiureticMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period\n\ndefine &quot;Risk Variable Encounter with Opioid Medication Active at Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationRequest&quot;: &quot;Opioids&quot;] OpioidMed\n      such that OpioidMed.status in { 'active', 'completed' }\n        and ( OpioidMed.intent = 'order'\n            or ( OpioidMed.intent = 'plan'\n                and OpioidMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and OpioidMed.isCommunity ( )\n        and OpioidMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period\n\ndefine &quot;Risk Variable Encounter with Coagulation Disorder Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Coagulation Disorders&quot; )\n\ndefine &quot;Risk Variable Encounter with Delirium or Dementia or Other Psychosis Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Delirium, Dementia, and Other Psychoses&quot; )\n\ndefine &quot;Risk Variable Encounter with Depression Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Depression&quot; )\n\ndefine &quot;Risk Variable Encounter with Epilepsy Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Epilepsy&quot; )\n\ndefine &quot;Risk Variable Encounter with Leukemia or Lymphoma Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Leukemia or Lymphoma&quot; )\n\ndefine &quot;Risk Variable Encounter with Liver Disease Moderate to Severe Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Liver Disease Moderate to Severe&quot; )\n\ndefine &quot;Risk Variable Encounter with Malignant Bone Disease Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Malignant Bone Disease&quot; )\n\ndefine &quot;Risk Variable Encounter with Neurologic Disorder Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Neurologic Movement and Related Disorders&quot; )\n\ndefine &quot;Risk Variable Encounter with Obesity Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Obesity&quot; )\n\ndefine &quot;Risk Variable Encounter with Osteoporosis Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Osteoporosis&quot; )\n\ndefine &quot;Risk Variable Encounter with Peripheral Neuropathy Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Peripheral Neuropathy&quot; )\n\ndefine &quot;Risk Variable Encounter with Stroke Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Stroke&quot; )\n\ndefine &quot;Risk Variable Encounter with Suicide Attempt&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.encountersDiagnosis ( ).code in &quot;Suicide Attempt&quot;\n\ndefine &quot;SDE Ethnicity&quot;:\n  SDE.&quot;SDE Ethnicity&quot;\n\ndefine &quot;SDE Payer&quot;:\n  SDE.&quot;SDE Payer&quot;\n\ndefine &quot;SDE Race&quot;:\n  SDE.&quot;SDE Race&quot;\n\ndefine &quot;SDE Sex&quot;:\n  SDE.&quot;SDE Sex&quot;\n\ndefine function &quot;Denominator Observation&quot;(QualifyingEncounter Encounter):\n  duration in days of QualifyingEncounter.hospitalizationWithObservation ( )\n\ndefine function &quot;Numerator Observation&quot;(QualifyingEncounter Encounter):\n  Count(&quot;Numerator&quot; FallsEncounter\n      where FallsEncounter.period ends during QualifyingEncounter.hospitalizationWithObservation()\n  )\n\ndefine fluent function hasDiagnosisPresentOnAdmission(encounter Encounter, diagnosisValueSet ValueSet):\n  exists ( encounter InptEncounter\n      let claim: ( [Claim] Claims\n          where Claims.status = 'active'\n            and Claims.use = 'claim'\n            and exists ( Claims.item ClaimsItem\n                where ClaimsItem.encounter.references ( InptEncounter )\n            )\n      ),\n      claimItem: ( claim.item ClaimsItem\n          where ClaimsItem.encounter.references ( InptEncounter )\n      )\n      return claim.diagnosis ClaimsDiag\n        where ClaimsDiag.sequence in claimItem.diagnosisSequence\n          and ClaimsDiag.onAdmission in &quot;Present on Admission or Clinically Undetermined&quot;\n          and ClaimsDiag.diagnosis in diagnosisValueSet\n  )\n\ndefine fluent function hasDiagnosisNotPresentOnAdmission(encounter Encounter, diagnosisValueSet ValueSet):\n  exists ( encounter InpatientEncounter\n      let claim: ( [Claim] Claims\n          where Claims.status = 'active'\n            and Claims.use = 'claim'\n            and exists ( Claims.item ClaimsItem\n                where ClaimsItem.encounter.references ( InpatientEncounter )\n            )\n      ),\n      claimItem: ( claim.item ClaimsItem\n          where ClaimsItem.encounter.references ( InpatientEncounter )\n      )\n      return claim.diagnosis ClaimsDiag\n        where ClaimsDiag.sequence in claimItem.diagnosisSequence\n          and ( ClaimsDiag.onAdmission in &quot;Not Present On Admission or Documentation Insufficient to Determine&quot; )\n          and ClaimsDiag.diagnosis in diagnosisValueSet\n  )\n\ndefine fluent function hasDiagnosisNotPresentOnAdmissionOrNull(encounter Encounter, diagnosisValueSet ValueSet):\n  exists ( encounter InptEncounter\n      let claim: ( [Claim] Claims\n          where Claims.status = 'active'\n            and Claims.use = 'claim'\n            and exists ( Claims.item ClaimsItem\n                where ClaimsItem.encounter.references ( InptEncounter )\n            )\n      ),\n      claimItem: ( claim.item ClaimsItem\n          where ClaimsItem.encounter.references ( InptEncounter )\n      )\n      return claim.diagnosis ClaimsDiag\n        where ClaimsDiag.sequence in claimItem.diagnosisSequence\n          and ClaimsDiag.onAdmission is null\n          or ClaimsDiag.onAdmission in &quot;Not Present On Admission or Documentation Insufficient to Determine&quot;\n            and ClaimsDiag.diagnosis in diagnosisValueSet\n  )\n\ndefine fluent function encountersDiagnosis(Encounter Encounter):\n  // There is a problem in the CQMCommon fluent function 'encounterDiagnosis' wherein the union operation isn't working as used.\n  // This function fixes that usage, but should be considered temporary until the library function works properly   \n  \n  \n  Encounter.reasonReference EncDiag\n    return singleton from ( ( [ConditionEncounterDiagnosis] ConditionED\n        union [ConditionProblemsHealthConcerns] ConditionPHC ) Cond\n        where EncDiag.references ( Cond.id )\n    )</code></pre> \n                  </td> \n               </tr> \n               <tr> \n                  <th colspan=\"2\" scope=\"row\" class=\"row-header\">Generated using version 0.4.7 of the sample-content-ig Liquid templates</th> \n               </tr> \n            </tbody> \n         </table> \n      </div>"},"contained":[{"resourceType":"Parameters","id":"options","parameter":[{"name":"translatorVersion","valueString":"3.25.0"},{"name":"option","valueString":"EnableAnnotations"},{"name":"option","valueString":"EnableLocators"},{"name":"option","valueString":"DisableListDemotion"},{"name":"option","valueString":"DisableListPromotion"},{"name":"format","valueString":"XML"},{"name":"format","valueString":"JSON"},{"name":"analyzeDataRequirements","valueBoolean":false},{"name":"collapseDataRequirements","valueBoolean":false},{"name":"compatibilityLevel","valueString":"1.5"},{"name":"enableCqlOnly","valueBoolean":false},{"name":"errorLevel","valueString":"Info"},{"name":"signatureLevel","valueString":"Overloads"},{"name":"validateUnits","valueBoolean":true},{"name":"verifyOnly","valueBoolean":false}]}],"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/cqf-cqlOptions","valueReference":{"reference":"#options"}},{"url":"http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-softwaresystem","valueReference":{"reference":"Device/cqf-tooling"}}],"url":"https://madie.cms.gov/Library/CMS1017FHIRHHFI","identifier":[{"use":"official","system":"https://madie.cms.gov/login","value":"CMS1017FHIRHHFI"}],"version":"0.2.000","name":"CMS1017FHIRHHFI","title":"CMS1017FHIRHHFI","status":"active","experimental":false,"type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/library-type","code":"logic-library"}]},"date":"2025-07-07T18:39:12+00:00","publisher":"Centers for Medicare & Medicaid Services (CMS)","description":"CMS1017FHIRHHFI","content":[{"contentType":"text/cql","data":"bGlicmFyeSBDTVMxMDE3RkhJUkhIRkkgdmVyc2lvbiAnMC4yLjAwMCcNCg0KdXNpbmcgUUlDb3JlIHZlcnNpb24gJzYuMC4wJw0KDQppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuNC4wMDAnIGNhbGxlZCBGSElSSGVscGVycw0KaW5jbHVkZSBTdXBwbGVtZW50YWxEYXRhRWxlbWVudHMgdmVyc2lvbiAnNS4xLjAwMCcgY2FsbGVkIFNERQ0KaW5jbHVkZSBDUU1Db21tb24gdmVyc2lvbiAnNC4xLjAwMCcgY2FsbGVkIENRTUNvbW1vbg0KaW5jbHVkZSBRSUNvcmVDb21tb24gdmVyc2lvbiAnNC4wLjAwMCcgY2FsbGVkIFFJQ29yZUNvbW1vbg0KaW5jbHVkZSBDdW11bGF0aXZlTWVkaWNhdGlvbkR1cmF0aW9uIHZlcnNpb24gJzYuMC4wMDAnIGNhbGxlZCBDTUQNCg0KY29kZXN5c3RlbSAiTE9JTkMiOiAnaHR0cDovL2xvaW5jLm9yZycNCg0KdmFsdWVzZXQgIkFibm9ybWFsIFdlaWdodCBMb3NzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI1OC4yJw0KdmFsdWVzZXQgIkFudGljb2FndWxhbnRzIGZvciBBbGwgSW5kaWNhdGlvbnMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjQ4LjIyJw0KdmFsdWVzZXQgIkFudGlkZXByZXNzYW50cyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTYzJw0KdmFsdWVzZXQgIkFudGloeXBlcnRlbnNpdmVzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI0OC4xNjQnDQp2YWx1ZXNldCAiQ2VudHJhbCBOZXJ2b3VzIFN5c3RlbSBEZXByZXNzYW50cyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTM0Jw0KdmFsdWVzZXQgIkNvYWd1bGF0aW9uIERpc29yZGVycyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMjMnDQp2YWx1ZXNldCAiRGVsaXJpdW0sIERlbWVudGlhLCBhbmQgT3RoZXIgUHN5Y2hvc2VzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI0OC4xNjgnDQp2YWx1ZXNldCAiRGVwcmVzc2lvbiI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTY5Jw0KdmFsdWVzZXQgIkRpdXJldGljcyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTcwJw0KdmFsdWVzZXQgIkVwaWxlcHN5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI0OC4xNzEnDQp2YWx1ZXNldCAiSW5wYXRpZW50IEZhbGxzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTE0Ny4xNzEnDQp2YWx1ZXNldCAiTGV1a2VtaWEgb3IgTHltcGhvbWEiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjQ4LjEzNicNCnZhbHVlc2V0ICJMaXZlciBEaXNlYXNlIE1vZGVyYXRlIHRvIFNldmVyZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTM3Jw0KdmFsdWVzZXQgIk1ham9yIEluanVyaWVzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTE0Ny4xMjAnDQp2YWx1ZXNldCAiTWFsaWduYW50IEJvbmUgRGlzZWFzZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMjQnDQp2YWx1ZXNldCAiTWFsbnV0cml0aW9uIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI3Mi4xJw0KdmFsdWVzZXQgIk1vZGVyYXRlIEluanVyaWVzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI0OC4yMDUnDQp2YWx1ZXNldCAiTmV1cm9sb2dpYyBNb3ZlbWVudCBhbmQgUmVsYXRlZCBEaXNvcmRlcnMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjQ4LjE3NCcNCnZhbHVlc2V0ICJOb3QgUHJlc2VudCBPbiBBZG1pc3Npb24gb3IgRG9jdW1lbnRhdGlvbiBJbnN1ZmZpY2llbnQgdG8gRGV0ZXJtaW5lIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTE0Ny4xOTgnDQp2YWx1ZXNldCAiT2Jlc2l0eSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTYyJw0KdmFsdWVzZXQgIk9waW9pZHMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjQ4LjEyMCcNCnZhbHVlc2V0ICJPc3Rlb3Bvcm9zaXMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjAwLjE0NycNCnZhbHVlc2V0ICJQZXJpcGhlcmFsIE5ldXJvcGF0aHkiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjQ4LjE3NScNCnZhbHVlc2V0ICJQcmVzZW50IG9uIEFkbWlzc2lvbiBvciBDbGluaWNhbGx5IFVuZGV0ZXJtaW5lZCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExNDcuMTk3Jw0KdmFsdWVzZXQgIlN0cm9rZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTc2Jw0KdmFsdWVzZXQgIlN1aWNpZGUgQXR0ZW1wdCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTMwJw0KDQpwYXJhbWV0ZXIgIk1lYXN1cmVtZW50IFBlcmlvZCIgSW50ZXJ2YWw8RGF0ZVRpbWU+DQogIGRlZmF1bHQgSW50ZXJ2YWxbQDIwMjYtMDEtMDFUMDA6MDA6MDAuMFosIEAyMDI2LTEyLTMxVDIzOjU5OjAwLjBaICkNCg0KY29udGV4dCBQYXRpZW50DQoNCmRlZmluZSAiUXVhbGlmeWluZyBFbmNvdW50ZXIiOg0KICBDUU1Db21tb24uIklucGF0aWVudCBFbmNvdW50ZXIiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdoZXJlIElucGF0aWVudEVuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApLmxlbmd0aEluRGF5cyAoICkgPD0gMTIwDQogICAgICBhbmQgQWdlSW5ZZWFyc0F0KGRhdGUgZnJvbSBzdGFydCBvZiBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kKSA+PSAxOA0KDQpkZWZpbmUgIkluaXRpYWwgUG9wdWxhdGlvbiI6DQogICJRdWFsaWZ5aW5nIEVuY291bnRlciINCg0KZGVmaW5lICJEZW5vbWluYXRvciI6DQogICJJbml0aWFsIFBvcHVsYXRpb24iDQoNCmRlZmluZSAiTnVtZXJhdG9yIjoNCiAgIkVuY291bnRlciBXaGVyZSBBIEZhbGwgQW5kIE1ham9yIEluanVyeSBPY2N1cnJlZCBOb3QgUE9BIg0KICAgIHVuaW9uICJFbmNvdW50ZXIgV2hlcmUgQSBGYWxsIEFuZCBNb2RlcmF0ZSBJbmp1cnkgT2NjdXJyZWQgTm90IFBPQSINCg0KZGVmaW5lICJFbmNvdW50ZXIgV2hlcmUgQSBGYWxsIEFuZCBNb2RlcmF0ZSBJbmp1cnkgT2NjdXJyZWQgTm90IFBPQSI6DQogICJFbmNvdW50ZXIgV2l0aCBBIEZhbGwgTm90IFByZXNlbnQgT24gQWRtaXNzaW9uIiBGYWxsT2NjdXJyZWQNCiAgICB3aGVyZSBleGlzdHMgKCAoIEZhbGxPY2N1cnJlZC5jbGFpbURpYWdub3NpcyAoICkgKSBNb2RlcmF0ZUZhbGxPY2N1cnJlZA0KICAgICAgICB3aGVyZSBNb2RlcmF0ZUZhbGxPY2N1cnJlZC5vbkFkbWlzc2lvbiBpcyBudWxsDQogICAgICAgICAgb3IgTW9kZXJhdGVGYWxsT2NjdXJyZWQub25BZG1pc3Npb24gaW4gIk5vdCBQcmVzZW50IE9uIEFkbWlzc2lvbiBvciBEb2N1bWVudGF0aW9uIEluc3VmZmljaWVudCB0byBEZXRlcm1pbmUiDQogICAgICAgICAgICBhbmQgKCBNb2RlcmF0ZUZhbGxPY2N1cnJlZC5kaWFnbm9zaXMgaW4gIk1vZGVyYXRlIEluanVyaWVzIg0KICAgICAgICAgICAgICAgIG9yIE1vZGVyYXRlRmFsbE9jY3VycmVkLmRpYWdub3Npcy5nZXRDb25kaXRpb24gKCApLmNvZGUgaW4gIk1vZGVyYXRlIEluanVyaWVzIg0KICAgICAgICAgICAgKQ0KICAgICkNCg0KZGVmaW5lICJFbmNvdW50ZXIgV2hlcmUgQSBGYWxsIEFuZCBNYWpvciBJbmp1cnkgT2NjdXJyZWQgTm90IFBPQSI6DQogICJFbmNvdW50ZXIgV2l0aCBBIEZhbGwgTm90IFByZXNlbnQgT24gQWRtaXNzaW9uIiBGYWxsT2NjdXJyZWQNCiAgICB3aGVyZSBleGlzdHMgKCAoIEZhbGxPY2N1cnJlZC5jbGFpbURpYWdub3NpcyAoICkgKSBNYWpvckZhbGxPY2N1cnJlZA0KICAgICAgICB3aGVyZSBNYWpvckZhbGxPY2N1cnJlZC5vbkFkbWlzc2lvbiBpcyBudWxsDQogICAgICAgICAgb3IgTWFqb3JGYWxsT2NjdXJyZWQub25BZG1pc3Npb24gaW4gIk5vdCBQcmVzZW50IE9uIEFkbWlzc2lvbiBvciBEb2N1bWVudGF0aW9uIEluc3VmZmljaWVudCB0byBEZXRlcm1pbmUiDQogICAgICAgICAgICBhbmQgKCBNYWpvckZhbGxPY2N1cnJlZC5kaWFnbm9zaXMgaW4gIk1ham9yIEluanVyaWVzIg0KICAgICAgICAgICAgICAgIG9yIE1ham9yRmFsbE9jY3VycmVkLmRpYWdub3Npcy5nZXRDb25kaXRpb24gKCApLmNvZGUgaW4gIk1ham9yIEluanVyaWVzIg0KICAgICAgICAgICAgKQ0KICAgICkNCg0KZGVmaW5lICJFbmNvdW50ZXIgV2hlcmUgQSBGYWxsIE9jY3VycmVkIjoNCiAgIkVuY291bnRlciBXaXRoIEEgRmFsbCBEaWFnbm9zaXMiDQogICAgdW5pb24gIkVuY291bnRlciBXaXRoIEEgRmFsbCBFdmVudCINCg0KZGVmaW5lICJFbmNvdW50ZXIgV2l0aCBBIEZhbGwgTm90IFByZXNlbnQgT24gQWRtaXNzaW9uIjoNCiAgIkVuY291bnRlciBXaGVyZSBBIEZhbGwgT2NjdXJyZWQiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdoZXJlIElucGF0aWVudEVuY291bnRlci5oYXNEaWFnbm9zaXNOb3RQcmVzZW50T25BZG1pc3Npb25Pck51bGwgKCAiSW5wYXRpZW50IEZhbGxzIiApDQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggQSBGYWxsIERpYWdub3NpcyI6DQogICJRdWFsaWZ5aW5nIEVuY291bnRlciIgUXVhbGlmeWluZ0VuY291bnRlcg0KICAgIHdoZXJlIFF1YWxpZnlpbmdFbmNvdW50ZXIucmVhc29uQ29kZSBpbiAiSW5wYXRpZW50IEZhbGxzIg0KICAgICAgb3IgUXVhbGlmeWluZ0VuY291bnRlci5lbmNvdW50ZXJzRGlhZ25vc2lzICggKS5jb2RlIGluICJJbnBhdGllbnQgRmFsbHMiDQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggQSBGYWxsIEV2ZW50IjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoIFtBZHZlcnNlRXZlbnQ6ICJJbnBhdGllbnQgRmFsbHMiXSBGYWxsc0RvY3VtZW50YXRpb24NCiAgICAgIHN1Y2ggdGhhdCBDb2FsZXNjZShGYWxsc0RvY3VtZW50YXRpb24uZGF0ZSwgRmFsbHNEb2N1bWVudGF0aW9uLnJlY29yZGVkRGF0ZSkgZHVyaW5nIElucGF0aWVudEVuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApDQoNCmRlZmluZSAiRGVub21pbmF0b3IgRXhjbHVzaW9ucyI6DQogICJFbmNvdW50ZXIgV2l0aCBBIEZhbGwgUHJlc2VudCBPbiBBZG1pc3Npb24iDQoNCmRlZmluZSAiTnVtZXJhdG9yIEV4Y2x1c2lvbnMiOg0KICAiRW5jb3VudGVyIFdpdGggQSBGYWxsIFByZXNlbnQgT24gQWRtaXNzaW9uIg0KDQpkZWZpbmUgIkVuY291bnRlciBXaXRoIEEgRmFsbCBQcmVzZW50IE9uIEFkbWlzc2lvbiI6DQogICJRdWFsaWZ5aW5nIEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgd2hlcmUgSW5wYXRpZW50RW5jb3VudGVyLmhhc0RpYWdub3Npc1ByZXNlbnRPbkFkbWlzc2lvbiAoICJJbnBhdGllbnQgRmFsbHMiICkNCg0KZGVmaW5lICJSaXNrIFZhcmlhYmxlIEJvZHkgTWFzcyBJbmRleCAoQk1JKSI6DQogIGZyb20NCiAgICBbIlVTQ29yZUJNSVByb2ZpbGUiXSBCTUkNCiAgICB3aXRoICJRdWFsaWZ5aW5nIEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgICBzdWNoIHRoYXQgQk1JLmVmZmVjdGl2ZS50b0ludGVydmFsICggKSBzdGFydHMgZHVyaW5nIElucGF0aWVudEVuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApDQogICAgICAgIGFuZCBCTUkudmFsdWUgaXMgbm90IG51bGwNCiAgICAgICAgYW5kIEJNSS5zdGF0dXMgaW4geyAnZmluYWwnLCAnYW1lbmRlZCcsICdjb3JyZWN0ZWQnIH0NCiAgICByZXR1cm4gQk1JLnZhbHVlIGFzIFF1YW50aXR5DQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBBbGwgRW5jb3VudGVyIERpYWdub3NlcyB3aXRoIFJhbmsgYW5kIFBPQSBJbmRpY2F0aW9uIjoNCiAgZnJvbQ0KICAgICJRdWFsaWZ5aW5nIEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgbGV0IGNsYWltOiAoIFtDbGFpbV0gQw0KICAgICAgICB3aGVyZSBDLnN0YXR1cyA9ICdhY3RpdmUnDQogICAgICAgICAgYW5kIEMudXNlID0gJ2NsYWltJw0KICAgICAgICAgIGFuZCBleGlzdHMgKCBDLml0ZW0gQ2xhaW1JdGVtDQogICAgICAgICAgICAgIHdoZXJlIENsYWltSXRlbS5lbmNvdW50ZXIucmVmZXJlbmNlcyAoIElucGF0aWVudEVuY291bnRlciApDQogICAgICAgICAgKQ0KICAgICksDQogICAgY2xhaW1JdGVtOiAoIGNsYWltLml0ZW0gQ2xhaW1JdGVtDQogICAgICAgIHdoZXJlIENsYWltSXRlbS5lbmNvdW50ZXIucmVmZXJlbmNlcyAoIElucGF0aWVudEVuY291bnRlciApDQogICAgKQ0KICAgIHJldHVybiBUdXBsZSB7DQogICAgICBlbmNvdW50ZXJJZDogSW5wYXRpZW50RW5jb3VudGVyLmlkLA0KICAgICAgZGlhZ25vc2lzOiBjbGFpbS5kaWFnbm9zaXMsDQogICAgICByYW5rOiBjbGFpbS5kaWFnbm9zaXMuc2VxdWVuY2UsDQogICAgICBQT0E6IGNsYWltLmRpYWdub3NpcyBEaWFnDQogICAgICAgIHdoZXJlIERpYWcub25BZG1pc3Npb24gaW4gIlByZXNlbnQgb24gQWRtaXNzaW9uIG9yIENsaW5pY2FsbHkgVW5kZXRlcm1pbmVkIg0KICAgICAgICAgIG9yIERpYWcub25BZG1pc3Npb24gaW4gIk5vdCBQcmVzZW50IE9uIEFkbWlzc2lvbiBvciBEb2N1bWVudGF0aW9uIEluc3VmZmljaWVudCB0byBEZXRlcm1pbmUiDQogICAgfQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggQWJub3JtYWwgV2VpZ2h0IExvc3Mgb3IgTWFsbnV0cml0aW9uIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIkFibm9ybWFsIFdlaWdodCBMb3NzIiApDQogICAgICBvciBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIk1hbG51dHJpdGlvbiIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggQW50aWNvYWd1bGFudCBBY3RpdmUgYXQgQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoIFsiTWVkaWNhdGlvblJlcXVlc3QiOiAiQW50aWNvYWd1bGFudHMgZm9yIEFsbCBJbmRpY2F0aW9ucyJdIEFudGljb2FndWxhbnRzDQogICAgICBzdWNoIHRoYXQgQW50aWNvYWd1bGFudHMuc3RhdHVzIGluIHsgJ2FjdGl2ZScsICdjb21wbGV0ZWQnIH0NCiAgICAgICAgYW5kICggQW50aWNvYWd1bGFudHMuaW50ZW50ID0gJ29yZGVyJw0KICAgICAgICAgICAgb3IgKCBBbnRpY29hZ3VsYW50cy5pbnRlbnQgPSAncGxhbicNCiAgICAgICAgICAgICAgICBhbmQgQW50aWNvYWd1bGFudHMuc3ViamVjdC5yZWZlcmVuY2UuZ2V0SWQgKCApID0gUGF0aWVudC5pZA0KICAgICAgICAgICAgKQ0KICAgICAgICApDQogICAgICAgIGFuZCBBbnRpY29hZ3VsYW50cy5pc0NvbW11bml0eSAoICkNCiAgICAgICAgYW5kIEFudGljb2FndWxhbnRzLm1lZGljYXRpb25SZXF1ZXN0UGVyaW9kICggKSBvdmVybGFwcyBiZWZvcmUgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZA0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggQW50aWNvYWd1bGFudCBBZG1pbmlzdHJhdGlvbiBEdXJpbmcgRW5jb3VudGVyIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoIFsiTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uIjogIkFudGljb2FndWxhbnRzIGZvciBBbGwgSW5kaWNhdGlvbnMiXSBBbnRpY29hZ3VsYW50cw0KICAgICAgc3VjaCB0aGF0IEFudGljb2FndWxhbnRzLmVmZmVjdGl2ZS50b0ludGVydmFsICggKSBzdGFydHMgZHVyaW5nIElucGF0aWVudEVuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApDQogICAgICAgIGFuZCBBbnRpY29hZ3VsYW50cy5zdGF0dXMgaW4geyAnaW4tcHJvZ3Jlc3MnLCAnY29tcGxldGVkJyB9DQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBFbmNvdW50ZXIgd2l0aCBBbnRpZGVwcmVzc2FudCBBY3RpdmUgYXQgQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoIFsiTWVkaWNhdGlvblJlcXVlc3QiOiAiQW50aWRlcHJlc3NhbnRzIl0gQW50aWRlcHJlc3NhbnRNZWQNCiAgICAgIHN1Y2ggdGhhdCBBbnRpZGVwcmVzc2FudE1lZC5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcgfQ0KICAgICAgICBhbmQgKCBBbnRpZGVwcmVzc2FudE1lZC5pbnRlbnQgPSAnb3JkZXInDQogICAgICAgICAgICBvciAoIEFudGlkZXByZXNzYW50TWVkLmludGVudCA9ICdwbGFuJw0KICAgICAgICAgICAgICAgIGFuZCBBbnRpZGVwcmVzc2FudE1lZC5zdWJqZWN0LnJlZmVyZW5jZS5nZXRJZCAoICkgPSBQYXRpZW50LmlkDQogICAgICAgICAgICApDQogICAgICAgICkNCiAgICAgICAgYW5kIEFudGlkZXByZXNzYW50TWVkLmlzQ29tbXVuaXR5ICggKQ0KICAgICAgICBhbmQgQW50aWRlcHJlc3NhbnRNZWQubWVkaWNhdGlvblJlcXVlc3RQZXJpb2QgKCApIG92ZXJsYXBzIGJlZm9yZSBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kDQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBFbmNvdW50ZXIgd2l0aCBBbnRpaHlwZXJ0ZW5zaXZlIEFjdGl2ZSBhdCBBZG1pc3Npb24iOg0KICAiUXVhbGlmeWluZyBFbmNvdW50ZXIiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdpdGggWyJNZWRpY2F0aW9uUmVxdWVzdCI6ICJBbnRpaHlwZXJ0ZW5zaXZlcyJdIEJQTWVkDQogICAgICBzdWNoIHRoYXQgQlBNZWQuc3RhdHVzIGluIHsgJ2FjdGl2ZScsICdjb21wbGV0ZWQnIH0NCiAgICAgICAgYW5kICggQlBNZWQuaW50ZW50ID0gJ29yZGVyJw0KICAgICAgICAgICAgb3IgKCBCUE1lZC5pbnRlbnQgPSAncGxhbicNCiAgICAgICAgICAgICAgICBhbmQgQlBNZWQuc3ViamVjdC5yZWZlcmVuY2UuZ2V0SWQgKCApID0gUGF0aWVudC5pZA0KICAgICAgICAgICAgKQ0KICAgICAgICApDQogICAgICAgIGFuZCBCUE1lZC5pc0NvbW11bml0eSAoICkNCiAgICAgICAgYW5kIEJQTWVkLm1lZGljYXRpb25SZXF1ZXN0UGVyaW9kICggKSBvdmVybGFwcyBiZWZvcmUgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZA0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggQ05TIERlcHJlc3NhbnQgQWN0aXZlIGF0IEFkbWlzc2lvbiI6DQogICJRdWFsaWZ5aW5nIEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgd2l0aCBbIk1lZGljYXRpb25SZXF1ZXN0IjogIkNlbnRyYWwgTmVydm91cyBTeXN0ZW0gRGVwcmVzc2FudHMiXSBDTlNNZWQNCiAgICAgIHN1Y2ggdGhhdCBDTlNNZWQuc3RhdHVzIGluIHsgJ2FjdGl2ZScsICdjb21wbGV0ZWQnIH0NCiAgICAgICAgYW5kICggQ05TTWVkLmludGVudCA9ICdvcmRlcicNCiAgICAgICAgICAgIG9yICggQ05TTWVkLmludGVudCA9ICdwbGFuJw0KICAgICAgICAgICAgICAgIGFuZCBDTlNNZWQuc3ViamVjdC5yZWZlcmVuY2UuZ2V0SWQgKCApID0gUGF0aWVudC5pZA0KICAgICAgICAgICAgKQ0KICAgICAgICApDQogICAgICAgIGFuZCBDTlNNZWQuaXNDb21tdW5pdHkgKCApDQogICAgICAgIGFuZCBDTlNNZWQubWVkaWNhdGlvblJlcXVlc3RQZXJpb2QgKCApIG92ZXJsYXBzIGJlZm9yZSBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kDQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBFbmNvdW50ZXIgd2l0aCBEaXVyZXRpYyBBY3RpdmUgYXQgQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoIFsiTWVkaWNhdGlvblJlcXVlc3QiOiAiRGl1cmV0aWNzIl0gRGl1cmV0aWNNZWQNCiAgICAgIHN1Y2ggdGhhdCBEaXVyZXRpY01lZC5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcgfQ0KICAgICAgICBhbmQgKCBEaXVyZXRpY01lZC5pbnRlbnQgPSAnb3JkZXInDQogICAgICAgICAgICBvciAoIERpdXJldGljTWVkLmludGVudCA9ICdwbGFuJw0KICAgICAgICAgICAgICAgIGFuZCBEaXVyZXRpY01lZC5zdWJqZWN0LnJlZmVyZW5jZS5nZXRJZCAoICkgPSBQYXRpZW50LmlkDQogICAgICAgICAgICApDQogICAgICAgICkNCiAgICAgICAgYW5kIERpdXJldGljTWVkLmlzQ29tbXVuaXR5ICggKQ0KICAgICAgICBhbmQgRGl1cmV0aWNNZWQubWVkaWNhdGlvblJlcXVlc3RQZXJpb2QgKCApIG92ZXJsYXBzIGJlZm9yZSBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kDQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBFbmNvdW50ZXIgd2l0aCBPcGlvaWQgTWVkaWNhdGlvbiBBY3RpdmUgYXQgQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoIFsiTWVkaWNhdGlvblJlcXVlc3QiOiAiT3Bpb2lkcyJdIE9waW9pZE1lZA0KICAgICAgc3VjaCB0aGF0IE9waW9pZE1lZC5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcgfQ0KICAgICAgICBhbmQgKCBPcGlvaWRNZWQuaW50ZW50ID0gJ29yZGVyJw0KICAgICAgICAgICAgb3IgKCBPcGlvaWRNZWQuaW50ZW50ID0gJ3BsYW4nDQogICAgICAgICAgICAgICAgYW5kIE9waW9pZE1lZC5zdWJqZWN0LnJlZmVyZW5jZS5nZXRJZCAoICkgPSBQYXRpZW50LmlkDQogICAgICAgICAgICApDQogICAgICAgICkNCiAgICAgICAgYW5kIE9waW9pZE1lZC5pc0NvbW11bml0eSAoICkNCiAgICAgICAgYW5kIE9waW9pZE1lZC5tZWRpY2F0aW9uUmVxdWVzdFBlcmlvZCAoICkgb3ZlcmxhcHMgYmVmb3JlIElucGF0aWVudEVuY291bnRlci5wZXJpb2QNCg0KZGVmaW5lICJSaXNrIFZhcmlhYmxlIEVuY291bnRlciB3aXRoIENvYWd1bGF0aW9uIERpc29yZGVyIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIkNvYWd1bGF0aW9uIERpc29yZGVycyIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggRGVsaXJpdW0gb3IgRGVtZW50aWEgb3IgT3RoZXIgUHN5Y2hvc2lzIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIkRlbGlyaXVtLCBEZW1lbnRpYSwgYW5kIE90aGVyIFBzeWNob3NlcyIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggRGVwcmVzc2lvbiBQcmVzZW50IG9uIEFkbWlzc2lvbiI6DQogICJRdWFsaWZ5aW5nIEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgd2hlcmUgSW5wYXRpZW50RW5jb3VudGVyLmhhc0RpYWdub3Npc1ByZXNlbnRPbkFkbWlzc2lvbiAoICJEZXByZXNzaW9uIiApDQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBFbmNvdW50ZXIgd2l0aCBFcGlsZXBzeSBQcmVzZW50IG9uIEFkbWlzc2lvbiI6DQogICJRdWFsaWZ5aW5nIEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgd2hlcmUgSW5wYXRpZW50RW5jb3VudGVyLmhhc0RpYWdub3Npc1ByZXNlbnRPbkFkbWlzc2lvbiAoICJFcGlsZXBzeSIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggTGV1a2VtaWEgb3IgTHltcGhvbWEgUHJlc2VudCBvbiBBZG1pc3Npb24iOg0KICAiUXVhbGlmeWluZyBFbmNvdW50ZXIiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdoZXJlIElucGF0aWVudEVuY291bnRlci5oYXNEaWFnbm9zaXNQcmVzZW50T25BZG1pc3Npb24gKCAiTGV1a2VtaWEgb3IgTHltcGhvbWEiICkNCg0KZGVmaW5lICJSaXNrIFZhcmlhYmxlIEVuY291bnRlciB3aXRoIExpdmVyIERpc2Vhc2UgTW9kZXJhdGUgdG8gU2V2ZXJlIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIkxpdmVyIERpc2Vhc2UgTW9kZXJhdGUgdG8gU2V2ZXJlIiApDQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBFbmNvdW50ZXIgd2l0aCBNYWxpZ25hbnQgQm9uZSBEaXNlYXNlIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIk1hbGlnbmFudCBCb25lIERpc2Vhc2UiICkNCg0KZGVmaW5lICJSaXNrIFZhcmlhYmxlIEVuY291bnRlciB3aXRoIE5ldXJvbG9naWMgRGlzb3JkZXIgUHJlc2VudCBvbiBBZG1pc3Npb24iOg0KICAiUXVhbGlmeWluZyBFbmNvdW50ZXIiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdoZXJlIElucGF0aWVudEVuY291bnRlci5oYXNEaWFnbm9zaXNQcmVzZW50T25BZG1pc3Npb24gKCAiTmV1cm9sb2dpYyBNb3ZlbWVudCBhbmQgUmVsYXRlZCBEaXNvcmRlcnMiICkNCg0KZGVmaW5lICJSaXNrIFZhcmlhYmxlIEVuY291bnRlciB3aXRoIE9iZXNpdHkgUHJlc2VudCBvbiBBZG1pc3Npb24iOg0KICAiUXVhbGlmeWluZyBFbmNvdW50ZXIiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdoZXJlIElucGF0aWVudEVuY291bnRlci5oYXNEaWFnbm9zaXNQcmVzZW50T25BZG1pc3Npb24gKCAiT2Jlc2l0eSIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggT3N0ZW9wb3Jvc2lzIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIk9zdGVvcG9yb3NpcyIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggUGVyaXBoZXJhbCBOZXVyb3BhdGh5IFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIlBlcmlwaGVyYWwgTmV1cm9wYXRoeSIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggU3Ryb2tlIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIlN0cm9rZSIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggU3VpY2lkZSBBdHRlbXB0IjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuZW5jb3VudGVyc0RpYWdub3NpcyAoICkuY29kZSBpbiAiU3VpY2lkZSBBdHRlbXB0Ig0KDQpkZWZpbmUgIlNERSBFdGhuaWNpdHkiOg0KICBTREUuIlNERSBFdGhuaWNpdHkiDQoNCmRlZmluZSAiU0RFIFBheWVyIjoNCiAgU0RFLiJTREUgUGF5ZXIiDQoNCmRlZmluZSAiU0RFIFJhY2UiOg0KICBTREUuIlNERSBSYWNlIg0KDQpkZWZpbmUgIlNERSBTZXgiOg0KICBTREUuIlNERSBTZXgiDQoNCmRlZmluZSBmdW5jdGlvbiAiRGVub21pbmF0b3IgT2JzZXJ2YXRpb24iKFF1YWxpZnlpbmdFbmNvdW50ZXIgRW5jb3VudGVyKToNCiAgZHVyYXRpb24gaW4gZGF5cyBvZiBRdWFsaWZ5aW5nRW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbiAoICkNCg0KZGVmaW5lIGZ1bmN0aW9uICJOdW1lcmF0b3IgT2JzZXJ2YXRpb24iKFF1YWxpZnlpbmdFbmNvdW50ZXIgRW5jb3VudGVyKToNCiAgQ291bnQoIk51bWVyYXRvciIgRmFsbHNFbmNvdW50ZXINCiAgICAgIHdoZXJlIEZhbGxzRW5jb3VudGVyLnBlcmlvZCBlbmRzIGR1cmluZyBRdWFsaWZ5aW5nRW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbigpDQogICkNCg0KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNEaWFnbm9zaXNQcmVzZW50T25BZG1pc3Npb24oZW5jb3VudGVyIEVuY291bnRlciwgZGlhZ25vc2lzVmFsdWVTZXQgVmFsdWVTZXQpOg0KICBleGlzdHMgKCBlbmNvdW50ZXIgSW5wdEVuY291bnRlcg0KICAgICAgbGV0IGNsYWltOiAoIFtDbGFpbV0gQ2xhaW1zDQogICAgICAgICAgd2hlcmUgQ2xhaW1zLnN0YXR1cyA9ICdhY3RpdmUnDQogICAgICAgICAgICBhbmQgQ2xhaW1zLnVzZSA9ICdjbGFpbScNCiAgICAgICAgICAgIGFuZCBleGlzdHMgKCBDbGFpbXMuaXRlbSBDbGFpbXNJdGVtDQogICAgICAgICAgICAgICAgd2hlcmUgQ2xhaW1zSXRlbS5lbmNvdW50ZXIucmVmZXJlbmNlcyAoIElucHRFbmNvdW50ZXIgKQ0KICAgICAgICAgICAgKQ0KICAgICAgKSwNCiAgICAgIGNsYWltSXRlbTogKCBjbGFpbS5pdGVtIENsYWltc0l0ZW0NCiAgICAgICAgICB3aGVyZSBDbGFpbXNJdGVtLmVuY291bnRlci5yZWZlcmVuY2VzICggSW5wdEVuY291bnRlciApDQogICAgICApDQogICAgICByZXR1cm4gY2xhaW0uZGlhZ25vc2lzIENsYWltc0RpYWcNCiAgICAgICAgd2hlcmUgQ2xhaW1zRGlhZy5zZXF1ZW5jZSBpbiBjbGFpbUl0ZW0uZGlhZ25vc2lzU2VxdWVuY2UNCiAgICAgICAgICBhbmQgQ2xhaW1zRGlhZy5vbkFkbWlzc2lvbiBpbiAiUHJlc2VudCBvbiBBZG1pc3Npb24gb3IgQ2xpbmljYWxseSBVbmRldGVybWluZWQiDQogICAgICAgICAgYW5kIENsYWltc0RpYWcuZGlhZ25vc2lzIGluIGRpYWdub3Npc1ZhbHVlU2V0DQogICkNCg0KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNEaWFnbm9zaXNOb3RQcmVzZW50T25BZG1pc3Npb24oZW5jb3VudGVyIEVuY291bnRlciwgZGlhZ25vc2lzVmFsdWVTZXQgVmFsdWVTZXQpOg0KICBleGlzdHMgKCBlbmNvdW50ZXIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgICBsZXQgY2xhaW06ICggW0NsYWltXSBDbGFpbXMNCiAgICAgICAgICB3aGVyZSBDbGFpbXMuc3RhdHVzID0gJ2FjdGl2ZScNCiAgICAgICAgICAgIGFuZCBDbGFpbXMudXNlID0gJ2NsYWltJw0KICAgICAgICAgICAgYW5kIGV4aXN0cyAoIENsYWltcy5pdGVtIENsYWltc0l0ZW0NCiAgICAgICAgICAgICAgICB3aGVyZSBDbGFpbXNJdGVtLmVuY291bnRlci5yZWZlcmVuY2VzICggSW5wYXRpZW50RW5jb3VudGVyICkNCiAgICAgICAgICAgICkNCiAgICAgICksDQogICAgICBjbGFpbUl0ZW06ICggY2xhaW0uaXRlbSBDbGFpbXNJdGVtDQogICAgICAgICAgd2hlcmUgQ2xhaW1zSXRlbS5lbmNvdW50ZXIucmVmZXJlbmNlcyAoIElucGF0aWVudEVuY291bnRlciApDQogICAgICApDQogICAgICByZXR1cm4gY2xhaW0uZGlhZ25vc2lzIENsYWltc0RpYWcNCiAgICAgICAgd2hlcmUgQ2xhaW1zRGlhZy5zZXF1ZW5jZSBpbiBjbGFpbUl0ZW0uZGlhZ25vc2lzU2VxdWVuY2UNCiAgICAgICAgICBhbmQgKCBDbGFpbXNEaWFnLm9uQWRtaXNzaW9uIGluICJOb3QgUHJlc2VudCBPbiBBZG1pc3Npb24gb3IgRG9jdW1lbnRhdGlvbiBJbnN1ZmZpY2llbnQgdG8gRGV0ZXJtaW5lIiApDQogICAgICAgICAgYW5kIENsYWltc0RpYWcuZGlhZ25vc2lzIGluIGRpYWdub3Npc1ZhbHVlU2V0DQogICkNCg0KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNEaWFnbm9zaXNOb3RQcmVzZW50T25BZG1pc3Npb25Pck51bGwoZW5jb3VudGVyIEVuY291bnRlciwgZGlhZ25vc2lzVmFsdWVTZXQgVmFsdWVTZXQpOg0KICBleGlzdHMgKCBlbmNvdW50ZXIgSW5wdEVuY291bnRlcg0KICAgICAgbGV0IGNsYWltOiAoIFtDbGFpbV0gQ2xhaW1zDQogICAgICAgICAgd2hlcmUgQ2xhaW1zLnN0YXR1cyA9ICdhY3RpdmUnDQogICAgICAgICAgICBhbmQgQ2xhaW1zLnVzZSA9ICdjbGFpbScNCiAgICAgICAgICAgIGFuZCBleGlzdHMgKCBDbGFpbXMuaXRlbSBDbGFpbXNJdGVtDQogICAgICAgICAgICAgICAgd2hlcmUgQ2xhaW1zSXRlbS5lbmNvdW50ZXIucmVmZXJlbmNlcyAoIElucHRFbmNvdW50ZXIgKQ0KICAgICAgICAgICAgKQ0KICAgICAgKSwNCiAgICAgIGNsYWltSXRlbTogKCBjbGFpbS5pdGVtIENsYWltc0l0ZW0NCiAgICAgICAgICB3aGVyZSBDbGFpbXNJdGVtLmVuY291bnRlci5yZWZlcmVuY2VzICggSW5wdEVuY291bnRlciApDQogICAgICApDQogICAgICByZXR1cm4gY2xhaW0uZGlhZ25vc2lzIENsYWltc0RpYWcNCiAgICAgICAgd2hlcmUgQ2xhaW1zRGlhZy5zZXF1ZW5jZSBpbiBjbGFpbUl0ZW0uZGlhZ25vc2lzU2VxdWVuY2UNCiAgICAgICAgICBhbmQgQ2xhaW1zRGlhZy5vbkFkbWlzc2lvbiBpcyBudWxsDQogICAgICAgICAgb3IgQ2xhaW1zRGlhZy5vbkFkbWlzc2lvbiBpbiAiTm90IFByZXNlbnQgT24gQWRtaXNzaW9uIG9yIERvY3VtZW50YXRpb24gSW5zdWZmaWNpZW50IHRvIERldGVybWluZSINCiAgICAgICAgICAgIGFuZCBDbGFpbXNEaWFnLmRpYWdub3NpcyBpbiBkaWFnbm9zaXNWYWx1ZVNldA0KICApDQoNCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gZW5jb3VudGVyc0RpYWdub3NpcyhFbmNvdW50ZXIgRW5jb3VudGVyKToNCiAgLy8gVGhlcmUgaXMgYSBwcm9ibGVtIGluIHRoZSBDUU1Db21tb24gZmx1ZW50IGZ1bmN0aW9uICdlbmNvdW50ZXJEaWFnbm9zaXMnIHdoZXJlaW4gdGhlIHVuaW9uIG9wZXJhdGlvbiBpc24ndCB3b3JraW5nIGFzIHVzZWQuDQogIC8vIFRoaXMgZnVuY3Rpb24gZml4ZXMgdGhhdCB1c2FnZSwgYnV0IHNob3VsZCBiZSBjb25zaWRlcmVkIHRlbXBvcmFyeSB1bnRpbCB0aGUgbGlicmFyeSBmdW5jdGlvbiB3b3JrcyBwcm9wZXJseSAgIA0KICANCiAgDQogIEVuY291bnRlci5yZWFzb25SZWZlcmVuY2UgRW5jRGlhZw0KICAgIHJldHVybiBzaW5nbGV0b24gZnJvbSAoICggW0NvbmRpdGlvbkVuY291bnRlckRpYWdub3Npc10gQ29uZGl0aW9uRUQNCiAgICAgICAgdW5pb24gW0NvbmRpdGlvblByb2JsZW1zSGVhbHRoQ29uY2VybnNdIENvbmRpdGlvblBIQyApIENvbmQNCiAgICAgICAgd2hlcmUgRW5jRGlhZy5yZWZlcmVuY2VzICggQ29uZC5pZCApDQogICAgKQ=="}]},"request":{"method":"PUT","url":"Library/CMS1017FHIRHHFI"}}]}
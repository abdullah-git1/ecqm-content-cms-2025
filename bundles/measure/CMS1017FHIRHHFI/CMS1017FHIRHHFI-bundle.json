{"resourceType":"Bundle","id":"CMS1017FHIRHHFI-bundle","type":"transaction","timestamp":"2025-07-09T09:47:58.395-06:00","entry":[{"resource":{"resourceType":"Library","id":"CMS1017FHIRHHFI","meta":{"profile":["http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary","http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-computablelibrary","http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary","http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-executablelibrary","http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library","http://hl7.org/fhir/uv/cql/StructureDefinition/elm-json-library","http://hl7.org/fhir/uv/cql/StructureDefinition/elm-xml-library"]},"language":"en","text":{"status":"extensions","div":"<div xmlns=\"http://www.w3.org/1999/xhtml\" class=\"col-12\">  \n         <table xmlns=\"null\" class=\"narrative-table\"> \n            <tbody xmlns=\"http://www.w3.org/1999/xhtml\"> \n               <tr> \n                  <th colspan=\"2\" scope=\"row\" class=\"row-header\">Knowledge Artifact Metadata</th> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Name (machine-readable)</th> \n                  <td class=\"content-container\">CMS1017FHIRHHFI</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Title (human-readable)</th> \n                  <td class=\"content-container\">CMS1017FHIRHHFI</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Status</th> \n                  <td class=\"content-container\">active</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Experimental</th> \n                  <td class=\"content-container\">false</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Description</th> \n                  <td class=\"content-container\">CMS1017FHIRHHFI</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Library Steward</th> \n                  <td class=\"content-container\">Centers for Medicare &amp; Medicaid Services (CMS)</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Library CQMCommon \n                     <br/> \n                     <em>Resource</em>: https://madie.cms.gov/Library/CQMCommon|4.1.000 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>https://madie.cms.gov/Library/CQMCommon|4.1.000</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Library QICoreCommon \n                     <br/> \n                     <em>Resource</em>: https://madie.cms.gov/Library/QICoreCommon|4.0.000 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>https://madie.cms.gov/Library/QICoreCommon|4.0.000</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Library CMD \n                     <br/> \n                     <em>Resource</em>: https://madie.cms.gov/Library/CumulativeMedicationDuration|6.0.000 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>https://madie.cms.gov/Library/CumulativeMedicationDuration|6.0.000</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Library SDE \n                     <br/> \n                     <em>Resource</em>: https://madie.cms.gov/Library/SupplementalDataElements|5.1.000 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>https://madie.cms.gov/Library/SupplementalDataElements|5.1.000</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Present on Admission or Clinically Undetermined \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.197 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.197</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Osteoporosis \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1200.147 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1200.147</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Coagulation Disorders \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.23 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.23</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Antidepressants \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.163 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.163</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Not Present On Admission or Documentation Insufficient to Determine \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.198 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.198</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Leukemia or Lymphoma \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.136 \n                     <br/> \n                     <em>Canonical URL</em>:  \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.136</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Obesity \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.162 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.162</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Peripheral Neuropathy \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.175 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.175</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Delirium, Dementia, and Other Psychoses \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.168 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.168</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Suicide Attempt \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.130 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.130</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Liver Disease Moderate to Severe \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.137 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.137</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Anticoagulants for All Indications \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Neurologic Movement and Related Disorders \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.174 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.174</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Abnormal Weight Loss \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1258.2 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1258.2</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Malnutrition \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1272.1 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1272.1</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Depression \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.169 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.169</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Epilepsy \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.171 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.171</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Diuretics \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.170 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.170</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Central Nervous System Depressants \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.134 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.134</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Malignant Bone Disease \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.24 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.24</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Antihypertensives \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.164 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.164</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Opioids \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.120 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.120</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Inpatient Falls \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.171 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.171</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Major Injuries \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.120 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.120</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Moderate Injuries \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.205 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.205</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Dependency</th> \n                  <td class=\"content-container\"> \n                     <em>Description</em>: Value set Stroke \n                     <br/> \n                     <em>Resource</em>: http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.176 \n                     <br/> \n                     <em>Canonical URL</em>: \n                     <tt>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.176</tt> \n                  </td> \n               </tr> \n               <tr> \n                  <th colspan=\"2\" scope=\"row\" class=\"row-header\">Library Metadata</th> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Identifier</th> \n                  <td class=\"content-container\">org.hl7.fhir.r5.model.Identifier@2814ffe4</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Version Number</th> \n                  <td class=\"content-container\">0.2.000</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Library Type</th> \n                  <td class=\"content-container\">[http://terminology.hl7.org/CodeSystem/library-type#logic-library]</td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.163 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value  \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.170 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.134 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.164 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.120 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationRequest \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest \n                     <br/> \n                     <em>Must Support Elements</em>: medication.reference.value, status, status.value, intent, intent.value, subject, subject.reference, subject.reference.value \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: Medication \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication \n                     <br/> \n                     <em>Must Support Elements</em>: id.value, code \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: Patient \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient \n                     <br/> \n                     <em>Must Support Elements</em>: id, id.value \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: Claim \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-claim \n                     <br/> \n                     <em>Must Support Elements</em>: status, status.value, use, use.value, item \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationAdministration \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationadministration \n                     <br/> \n                     <em>Must Support Elements</em>: medication, effective, status, status.value \n                     <br/> \n                     <em>Code Filter(s)</em>: \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>Path</em>: medication \n                     </span> \n                     <br/> \n                     <span class=\"tab-one\"> \n                        <em>ValueSet</em>: \n                     </span> http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22 \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: MedicationAdministration \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationadministration \n                     <br/> \n                     <em>Must Support Elements</em>: medication.reference.value, effective, status, status.value \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">Data Requirement</th> \n                  <td class=\"content-container\"> \n                     <em>Type</em>: Observation \n                     <br/> \n                     <em>Profile(s)</em>:  http://hl7.org/fhir/us/core/StructureDefinition/us-core-bmi \n                     <br/> \n                     <em>Must Support Elements</em>: effective, value, status, status.value \n                     <br/> \n                  </td> \n               </tr> \n               <tr> \n                  <th colspan=\"2\" scope=\"row\" class=\"row-header\">Library Content</th> \n               </tr> \n               <tr> \n                  <th scope=\"row\" class=\"row-header\">CQL Content</th> \n                  <td> \n                     <pre style=\"border: none;\" class=\"content-container highlight language-cql\"><code class=\"language-cql\">library CMS1017FHIRHHFI version '0.2.000'\n\nusing QICore version '6.0.0'\n\ninclude FHIRHelpers version '4.4.000' called FHIRHelpers\ninclude SupplementalDataElements version '5.1.000' called SDE\ninclude CQMCommon version '4.1.000' called CQMCommon\ninclude QICoreCommon version '4.0.000' called QICoreCommon\ninclude CumulativeMedicationDuration version '6.0.000' called CMD\n\ncodesystem &quot;LOINC&quot;: 'http://loinc.org'\n\nvalueset &quot;Abnormal Weight Loss&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1258.2'\nvalueset &quot;Anticoagulants for All Indications&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22'\nvalueset &quot;Antidepressants&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.163'\nvalueset &quot;Antihypertensives&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.164'\nvalueset &quot;Central Nervous System Depressants&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.134'\nvalueset &quot;Coagulation Disorders&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.23'\nvalueset &quot;Delirium, Dementia, and Other Psychoses&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.168'\nvalueset &quot;Depression&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.169'\nvalueset &quot;Diuretics&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.170'\nvalueset &quot;Epilepsy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.171'\nvalueset &quot;Inpatient Falls&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.171'\nvalueset &quot;Leukemia or Lymphoma&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.136'\nvalueset &quot;Liver Disease Moderate to Severe&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.137'\nvalueset &quot;Major Injuries&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.120'\nvalueset &quot;Malignant Bone Disease&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.24'\nvalueset &quot;Malnutrition&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1272.1'\nvalueset &quot;Moderate Injuries&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.205'\nvalueset &quot;Neurologic Movement and Related Disorders&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.174'\nvalueset &quot;Not Present On Admission or Documentation Insufficient to Determine&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.198'\nvalueset &quot;Obesity&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.162'\nvalueset &quot;Opioids&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.120'\nvalueset &quot;Osteoporosis&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1200.147'\nvalueset &quot;Peripheral Neuropathy&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.175'\nvalueset &quot;Present on Admission or Clinically Undetermined&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.197'\nvalueset &quot;Stroke&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.176'\nvalueset &quot;Suicide Attempt&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.130'\n\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\n\ncontext Patient\n\ndefine &quot;Qualifying Encounter&quot;:\n  CQMCommon.&quot;Inpatient Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hospitalizationWithObservation ( ).lengthInDays ( ) &lt;= 120\n      and AgeInYearsAt(date from start of InpatientEncounter.period) &gt;= 18\n\ndefine &quot;Initial Population&quot;:\n  &quot;Qualifying Encounter&quot;\n\ndefine &quot;Denominator&quot;:\n  &quot;Initial Population&quot;\n\ndefine &quot;Numerator&quot;:\n  &quot;Encounter Where A Fall And Major Injury Occurred Not POA&quot;\n    union &quot;Encounter Where A Fall And Moderate Injury Occurred Not POA&quot;\n\ndefine &quot;Encounter Where A Fall And Moderate Injury Occurred Not POA&quot;:\n  &quot;Encounter With A Fall Not Present On Admission&quot; FallOccurred\n    where exists ( ( FallOccurred.claimDiagnosis ( ) ) ModerateFallOccurred\n        where ModerateFallOccurred.onAdmission is null\n          or ModerateFallOccurred.onAdmission in &quot;Not Present On Admission or Documentation Insufficient to Determine&quot;\n            and ( ModerateFallOccurred.diagnosis in &quot;Moderate Injuries&quot;\n                or ModerateFallOccurred.diagnosis.getCondition ( ).code in &quot;Moderate Injuries&quot;\n            )\n    )\n\ndefine &quot;Encounter Where A Fall And Major Injury Occurred Not POA&quot;:\n  &quot;Encounter With A Fall Not Present On Admission&quot; FallOccurred\n    where exists ( ( FallOccurred.claimDiagnosis ( ) ) MajorFallOccurred\n        where MajorFallOccurred.onAdmission is null\n          or MajorFallOccurred.onAdmission in &quot;Not Present On Admission or Documentation Insufficient to Determine&quot;\n            and ( MajorFallOccurred.diagnosis in &quot;Major Injuries&quot;\n                or MajorFallOccurred.diagnosis.getCondition ( ).code in &quot;Major Injuries&quot;\n            )\n    )\n\ndefine &quot;Encounter Where A Fall Occurred&quot;:\n  &quot;Encounter With A Fall Diagnosis&quot;\n    union &quot;Encounter With A Fall Event&quot;\n\ndefine &quot;Encounter With A Fall Not Present On Admission&quot;:\n  &quot;Encounter Where A Fall Occurred&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisNotPresentOnAdmissionOrNull ( &quot;Inpatient Falls&quot; )\n\ndefine &quot;Encounter With A Fall Diagnosis&quot;:\n  &quot;Qualifying Encounter&quot; QualifyingEncounter\n    where QualifyingEncounter.reasonCode in &quot;Inpatient Falls&quot;\n      or QualifyingEncounter.encountersDiagnosis ( ).code in &quot;Inpatient Falls&quot;\n\ndefine &quot;Encounter With A Fall Event&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [AdverseEvent: &quot;Inpatient Falls&quot;] FallsDocumentation\n      such that Coalesce(FallsDocumentation.date, FallsDocumentation.recordedDate) during InpatientEncounter.hospitalizationWithObservation ( )\n\ndefine &quot;Denominator Exclusions&quot;:\n  &quot;Encounter With A Fall Present On Admission&quot;\n\ndefine &quot;Numerator Exclusions&quot;:\n  &quot;Encounter With A Fall Present On Admission&quot;\n\ndefine &quot;Encounter With A Fall Present On Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Inpatient Falls&quot; )\n\ndefine &quot;Risk Variable Body Mass Index (BMI)&quot;:\n  from\n    [&quot;USCoreBMIProfile&quot;] BMI\n    with &quot;Qualifying Encounter&quot; InpatientEncounter\n      such that BMI.effective.toInterval ( ) starts during InpatientEncounter.hospitalizationWithObservation ( )\n        and BMI.value is not null\n        and BMI.status in { 'final', 'amended', 'corrected' }\n    return BMI.value as Quantity\n\ndefine &quot;Risk Variable All Encounter Diagnoses with Rank and POA Indication&quot;:\n  from\n    &quot;Qualifying Encounter&quot; InpatientEncounter\n    let claim: ( [Claim] C\n        where C.status = 'active'\n          and C.use = 'claim'\n          and exists ( C.item ClaimItem\n              where ClaimItem.encounter.references ( InpatientEncounter )\n          )\n    ),\n    claimItem: ( claim.item ClaimItem\n        where ClaimItem.encounter.references ( InpatientEncounter )\n    )\n    return Tuple {\n      encounterId: InpatientEncounter.id,\n      diagnosis: claim.diagnosis,\n      rank: claim.diagnosis.sequence,\n      POA: claim.diagnosis Diag\n        where Diag.onAdmission in &quot;Present on Admission or Clinically Undetermined&quot;\n          or Diag.onAdmission in &quot;Not Present On Admission or Documentation Insufficient to Determine&quot;\n    }\n\ndefine &quot;Risk Variable Encounter with Abnormal Weight Loss or Malnutrition Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Abnormal Weight Loss&quot; )\n      or InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Malnutrition&quot; )\n\ndefine &quot;Risk Variable Encounter with Anticoagulant Active at Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationRequest&quot;: &quot;Anticoagulants for All Indications&quot;] Anticoagulants\n      such that Anticoagulants.status in { 'active', 'completed' }\n        and ( Anticoagulants.intent = 'order'\n            or ( Anticoagulants.intent = 'plan'\n                and Anticoagulants.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and Anticoagulants.isCommunity ( )\n        and Anticoagulants.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period\n\ndefine &quot;Risk Variable Encounter with Anticoagulant Administration During Encounter&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationAdministration&quot;: &quot;Anticoagulants for All Indications&quot;] Anticoagulants\n      such that Anticoagulants.effective.toInterval ( ) starts during InpatientEncounter.hospitalizationWithObservation ( )\n        and Anticoagulants.status in { 'in-progress', 'completed' }\n\ndefine &quot;Risk Variable Encounter with Antidepressant Active at Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationRequest&quot;: &quot;Antidepressants&quot;] AntidepressantMed\n      such that AntidepressantMed.status in { 'active', 'completed' }\n        and ( AntidepressantMed.intent = 'order'\n            or ( AntidepressantMed.intent = 'plan'\n                and AntidepressantMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and AntidepressantMed.isCommunity ( )\n        and AntidepressantMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period\n\ndefine &quot;Risk Variable Encounter with Antihypertensive Active at Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationRequest&quot;: &quot;Antihypertensives&quot;] BPMed\n      such that BPMed.status in { 'active', 'completed' }\n        and ( BPMed.intent = 'order'\n            or ( BPMed.intent = 'plan'\n                and BPMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and BPMed.isCommunity ( )\n        and BPMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period\n\ndefine &quot;Risk Variable Encounter with CNS Depressant Active at Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationRequest&quot;: &quot;Central Nervous System Depressants&quot;] CNSMed\n      such that CNSMed.status in { 'active', 'completed' }\n        and ( CNSMed.intent = 'order'\n            or ( CNSMed.intent = 'plan'\n                and CNSMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and CNSMed.isCommunity ( )\n        and CNSMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period\n\ndefine &quot;Risk Variable Encounter with Diuretic Active at Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationRequest&quot;: &quot;Diuretics&quot;] DiureticMed\n      such that DiureticMed.status in { 'active', 'completed' }\n        and ( DiureticMed.intent = 'order'\n            or ( DiureticMed.intent = 'plan'\n                and DiureticMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and DiureticMed.isCommunity ( )\n        and DiureticMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period\n\ndefine &quot;Risk Variable Encounter with Opioid Medication Active at Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    with [&quot;MedicationRequest&quot;: &quot;Opioids&quot;] OpioidMed\n      such that OpioidMed.status in { 'active', 'completed' }\n        and ( OpioidMed.intent = 'order'\n            or ( OpioidMed.intent = 'plan'\n                and OpioidMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and OpioidMed.isCommunity ( )\n        and OpioidMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period\n\ndefine &quot;Risk Variable Encounter with Coagulation Disorder Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Coagulation Disorders&quot; )\n\ndefine &quot;Risk Variable Encounter with Delirium or Dementia or Other Psychosis Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Delirium, Dementia, and Other Psychoses&quot; )\n\ndefine &quot;Risk Variable Encounter with Depression Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Depression&quot; )\n\ndefine &quot;Risk Variable Encounter with Epilepsy Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Epilepsy&quot; )\n\ndefine &quot;Risk Variable Encounter with Leukemia or Lymphoma Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Leukemia or Lymphoma&quot; )\n\ndefine &quot;Risk Variable Encounter with Liver Disease Moderate to Severe Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Liver Disease Moderate to Severe&quot; )\n\ndefine &quot;Risk Variable Encounter with Malignant Bone Disease Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Malignant Bone Disease&quot; )\n\ndefine &quot;Risk Variable Encounter with Neurologic Disorder Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Neurologic Movement and Related Disorders&quot; )\n\ndefine &quot;Risk Variable Encounter with Obesity Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Obesity&quot; )\n\ndefine &quot;Risk Variable Encounter with Osteoporosis Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Osteoporosis&quot; )\n\ndefine &quot;Risk Variable Encounter with Peripheral Neuropathy Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Peripheral Neuropathy&quot; )\n\ndefine &quot;Risk Variable Encounter with Stroke Present on Admission&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( &quot;Stroke&quot; )\n\ndefine &quot;Risk Variable Encounter with Suicide Attempt&quot;:\n  &quot;Qualifying Encounter&quot; InpatientEncounter\n    where InpatientEncounter.encountersDiagnosis ( ).code in &quot;Suicide Attempt&quot;\n\ndefine &quot;SDE Ethnicity&quot;:\n  SDE.&quot;SDE Ethnicity&quot;\n\ndefine &quot;SDE Payer&quot;:\n  SDE.&quot;SDE Payer&quot;\n\ndefine &quot;SDE Race&quot;:\n  SDE.&quot;SDE Race&quot;\n\ndefine &quot;SDE Sex&quot;:\n  SDE.&quot;SDE Sex&quot;\n\ndefine function &quot;Denominator Observation&quot;(QualifyingEncounter Encounter):\n  duration in days of QualifyingEncounter.hospitalizationWithObservation ( )\n\ndefine function &quot;Numerator Observation&quot;(QualifyingEncounter Encounter):\n  Count(&quot;Numerator&quot; FallsEncounter\n      where FallsEncounter.period ends during QualifyingEncounter.hospitalizationWithObservation()\n  )\n\ndefine fluent function hasDiagnosisPresentOnAdmission(encounter Encounter, diagnosisValueSet ValueSet):\n  exists ( encounter InptEncounter\n      let claim: ( [Claim] Claims\n          where Claims.status = 'active'\n            and Claims.use = 'claim'\n            and exists ( Claims.item ClaimsItem\n                where ClaimsItem.encounter.references ( InptEncounter )\n            )\n      ),\n      claimItem: ( claim.item ClaimsItem\n          where ClaimsItem.encounter.references ( InptEncounter )\n      )\n      return claim.diagnosis ClaimsDiag\n        where ClaimsDiag.sequence in claimItem.diagnosisSequence\n          and ClaimsDiag.onAdmission in &quot;Present on Admission or Clinically Undetermined&quot;\n          and ClaimsDiag.diagnosis in diagnosisValueSet\n  )\n\ndefine fluent function hasDiagnosisNotPresentOnAdmission(encounter Encounter, diagnosisValueSet ValueSet):\n  exists ( encounter InpatientEncounter\n      let claim: ( [Claim] Claims\n          where Claims.status = 'active'\n            and Claims.use = 'claim'\n            and exists ( Claims.item ClaimsItem\n                where ClaimsItem.encounter.references ( InpatientEncounter )\n            )\n      ),\n      claimItem: ( claim.item ClaimsItem\n          where ClaimsItem.encounter.references ( InpatientEncounter )\n      )\n      return claim.diagnosis ClaimsDiag\n        where ClaimsDiag.sequence in claimItem.diagnosisSequence\n          and ( ClaimsDiag.onAdmission in &quot;Not Present On Admission or Documentation Insufficient to Determine&quot; )\n          and ClaimsDiag.diagnosis in diagnosisValueSet\n  )\n\ndefine fluent function hasDiagnosisNotPresentOnAdmissionOrNull(encounter Encounter, diagnosisValueSet ValueSet):\n  exists ( encounter InptEncounter\n      let claim: ( [Claim] Claims\n          where Claims.status = 'active'\n            and Claims.use = 'claim'\n            and exists ( Claims.item ClaimsItem\n                where ClaimsItem.encounter.references ( InptEncounter )\n            )\n      ),\n      claimItem: ( claim.item ClaimsItem\n          where ClaimsItem.encounter.references ( InptEncounter )\n      )\n      return claim.diagnosis ClaimsDiag\n        where ClaimsDiag.sequence in claimItem.diagnosisSequence\n          and ClaimsDiag.onAdmission is null\n          or ClaimsDiag.onAdmission in &quot;Not Present On Admission or Documentation Insufficient to Determine&quot;\n            and ClaimsDiag.diagnosis in diagnosisValueSet\n  )\n\ndefine fluent function encountersDiagnosis(Encounter Encounter):\n  // There is a problem in the CQMCommon fluent function 'encounterDiagnosis' wherein the union operation isn't working as used.\n  // This function fixes that usage, but should be considered temporary until the library function works properly   \n  \n  \n  Encounter.reasonReference EncDiag\n    return singleton from ( ( [ConditionEncounterDiagnosis] ConditionED\n        union [ConditionProblemsHealthConcerns] ConditionPHC ) Cond\n        where EncDiag.references ( Cond.id )\n    )</code></pre> \n                  </td> \n               </tr> \n               <tr> \n                  <th colspan=\"2\" scope=\"row\" class=\"row-header\">Generated using version 0.4.7 of the sample-content-ig Liquid templates</th> \n               </tr> \n            </tbody> \n         </table> \n      </div>"},"contained":[{"resourceType":"Parameters","id":"options","parameter":[{"name":"translatorVersion","valueString":"3.25.0"},{"name":"option","valueString":"EnableAnnotations"},{"name":"option","valueString":"EnableLocators"},{"name":"option","valueString":"DisableListDemotion"},{"name":"option","valueString":"DisableListPromotion"},{"name":"format","valueString":"XML"},{"name":"format","valueString":"JSON"},{"name":"analyzeDataRequirements","valueBoolean":false},{"name":"collapseDataRequirements","valueBoolean":false},{"name":"compatibilityLevel","valueString":"1.5"},{"name":"enableCqlOnly","valueBoolean":false},{"name":"errorLevel","valueString":"Info"},{"name":"signatureLevel","valueString":"Overloads"},{"name":"validateUnits","valueBoolean":true},{"name":"verifyOnly","valueBoolean":false}]}],"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/cqf-cqlOptions","valueReference":{"reference":"#options"}},{"url":"http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-softwaresystem","valueReference":{"reference":"Device/cqf-tooling"}}],"url":"https://madie.cms.gov/Library/CMS1017FHIRHHFI","identifier":[{"use":"official","system":"https://madie.cms.gov/login","value":"CMS1017FHIRHHFI"}],"version":"0.2.000","name":"CMS1017FHIRHHFI","title":"CMS1017FHIRHHFI","status":"active","experimental":false,"type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/library-type","code":"logic-library"}]},"date":"2025-07-07T18:39:12+00:00","publisher":"Centers for Medicare & Medicaid Services (CMS)","description":"CMS1017FHIRHHFI","content":[{"contentType":"text/cql","data":"bGlicmFyeSBDTVMxMDE3RkhJUkhIRkkgdmVyc2lvbiAnMC4yLjAwMCcNCg0KdXNpbmcgUUlDb3JlIHZlcnNpb24gJzYuMC4wJw0KDQppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuNC4wMDAnIGNhbGxlZCBGSElSSGVscGVycw0KaW5jbHVkZSBTdXBwbGVtZW50YWxEYXRhRWxlbWVudHMgdmVyc2lvbiAnNS4xLjAwMCcgY2FsbGVkIFNERQ0KaW5jbHVkZSBDUU1Db21tb24gdmVyc2lvbiAnNC4xLjAwMCcgY2FsbGVkIENRTUNvbW1vbg0KaW5jbHVkZSBRSUNvcmVDb21tb24gdmVyc2lvbiAnNC4wLjAwMCcgY2FsbGVkIFFJQ29yZUNvbW1vbg0KaW5jbHVkZSBDdW11bGF0aXZlTWVkaWNhdGlvbkR1cmF0aW9uIHZlcnNpb24gJzYuMC4wMDAnIGNhbGxlZCBDTUQNCg0KY29kZXN5c3RlbSAiTE9JTkMiOiAnaHR0cDovL2xvaW5jLm9yZycNCg0KdmFsdWVzZXQgIkFibm9ybWFsIFdlaWdodCBMb3NzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI1OC4yJw0KdmFsdWVzZXQgIkFudGljb2FndWxhbnRzIGZvciBBbGwgSW5kaWNhdGlvbnMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjQ4LjIyJw0KdmFsdWVzZXQgIkFudGlkZXByZXNzYW50cyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTYzJw0KdmFsdWVzZXQgIkFudGloeXBlcnRlbnNpdmVzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI0OC4xNjQnDQp2YWx1ZXNldCAiQ2VudHJhbCBOZXJ2b3VzIFN5c3RlbSBEZXByZXNzYW50cyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTM0Jw0KdmFsdWVzZXQgIkNvYWd1bGF0aW9uIERpc29yZGVycyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMjMnDQp2YWx1ZXNldCAiRGVsaXJpdW0sIERlbWVudGlhLCBhbmQgT3RoZXIgUHN5Y2hvc2VzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI0OC4xNjgnDQp2YWx1ZXNldCAiRGVwcmVzc2lvbiI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTY5Jw0KdmFsdWVzZXQgIkRpdXJldGljcyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTcwJw0KdmFsdWVzZXQgIkVwaWxlcHN5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI0OC4xNzEnDQp2YWx1ZXNldCAiSW5wYXRpZW50IEZhbGxzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTE0Ny4xNzEnDQp2YWx1ZXNldCAiTGV1a2VtaWEgb3IgTHltcGhvbWEiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjQ4LjEzNicNCnZhbHVlc2V0ICJMaXZlciBEaXNlYXNlIE1vZGVyYXRlIHRvIFNldmVyZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTM3Jw0KdmFsdWVzZXQgIk1ham9yIEluanVyaWVzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTE0Ny4xMjAnDQp2YWx1ZXNldCAiTWFsaWduYW50IEJvbmUgRGlzZWFzZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMjQnDQp2YWx1ZXNldCAiTWFsbnV0cml0aW9uIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI3Mi4xJw0KdmFsdWVzZXQgIk1vZGVyYXRlIEluanVyaWVzIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTI0OC4yMDUnDQp2YWx1ZXNldCAiTmV1cm9sb2dpYyBNb3ZlbWVudCBhbmQgUmVsYXRlZCBEaXNvcmRlcnMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjQ4LjE3NCcNCnZhbHVlc2V0ICJOb3QgUHJlc2VudCBPbiBBZG1pc3Npb24gb3IgRG9jdW1lbnRhdGlvbiBJbnN1ZmZpY2llbnQgdG8gRGV0ZXJtaW5lIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTE0Ny4xOTgnDQp2YWx1ZXNldCAiT2Jlc2l0eSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTYyJw0KdmFsdWVzZXQgIk9waW9pZHMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjQ4LjEyMCcNCnZhbHVlc2V0ICJPc3Rlb3Bvcm9zaXMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjAwLjE0NycNCnZhbHVlc2V0ICJQZXJpcGhlcmFsIE5ldXJvcGF0aHkiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMjQ4LjE3NScNCnZhbHVlc2V0ICJQcmVzZW50IG9uIEFkbWlzc2lvbiBvciBDbGluaWNhbGx5IFVuZGV0ZXJtaW5lZCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExNDcuMTk3Jw0KdmFsdWVzZXQgIlN0cm9rZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTc2Jw0KdmFsdWVzZXQgIlN1aWNpZGUgQXR0ZW1wdCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMTMwJw0KDQpwYXJhbWV0ZXIgIk1lYXN1cmVtZW50IFBlcmlvZCIgSW50ZXJ2YWw8RGF0ZVRpbWU+DQogIGRlZmF1bHQgSW50ZXJ2YWxbQDIwMjYtMDEtMDFUMDA6MDA6MDAuMFosIEAyMDI2LTEyLTMxVDIzOjU5OjAwLjBaICkNCg0KY29udGV4dCBQYXRpZW50DQoNCmRlZmluZSAiUXVhbGlmeWluZyBFbmNvdW50ZXIiOg0KICBDUU1Db21tb24uIklucGF0aWVudCBFbmNvdW50ZXIiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdoZXJlIElucGF0aWVudEVuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApLmxlbmd0aEluRGF5cyAoICkgPD0gMTIwDQogICAgICBhbmQgQWdlSW5ZZWFyc0F0KGRhdGUgZnJvbSBzdGFydCBvZiBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kKSA+PSAxOA0KDQpkZWZpbmUgIkluaXRpYWwgUG9wdWxhdGlvbiI6DQogICJRdWFsaWZ5aW5nIEVuY291bnRlciINCg0KZGVmaW5lICJEZW5vbWluYXRvciI6DQogICJJbml0aWFsIFBvcHVsYXRpb24iDQoNCmRlZmluZSAiTnVtZXJhdG9yIjoNCiAgIkVuY291bnRlciBXaGVyZSBBIEZhbGwgQW5kIE1ham9yIEluanVyeSBPY2N1cnJlZCBOb3QgUE9BIg0KICAgIHVuaW9uICJFbmNvdW50ZXIgV2hlcmUgQSBGYWxsIEFuZCBNb2RlcmF0ZSBJbmp1cnkgT2NjdXJyZWQgTm90IFBPQSINCg0KZGVmaW5lICJFbmNvdW50ZXIgV2hlcmUgQSBGYWxsIEFuZCBNb2RlcmF0ZSBJbmp1cnkgT2NjdXJyZWQgTm90IFBPQSI6DQogICJFbmNvdW50ZXIgV2l0aCBBIEZhbGwgTm90IFByZXNlbnQgT24gQWRtaXNzaW9uIiBGYWxsT2NjdXJyZWQNCiAgICB3aGVyZSBleGlzdHMgKCAoIEZhbGxPY2N1cnJlZC5jbGFpbURpYWdub3NpcyAoICkgKSBNb2RlcmF0ZUZhbGxPY2N1cnJlZA0KICAgICAgICB3aGVyZSBNb2RlcmF0ZUZhbGxPY2N1cnJlZC5vbkFkbWlzc2lvbiBpcyBudWxsDQogICAgICAgICAgb3IgTW9kZXJhdGVGYWxsT2NjdXJyZWQub25BZG1pc3Npb24gaW4gIk5vdCBQcmVzZW50IE9uIEFkbWlzc2lvbiBvciBEb2N1bWVudGF0aW9uIEluc3VmZmljaWVudCB0byBEZXRlcm1pbmUiDQogICAgICAgICAgICBhbmQgKCBNb2RlcmF0ZUZhbGxPY2N1cnJlZC5kaWFnbm9zaXMgaW4gIk1vZGVyYXRlIEluanVyaWVzIg0KICAgICAgICAgICAgICAgIG9yIE1vZGVyYXRlRmFsbE9jY3VycmVkLmRpYWdub3Npcy5nZXRDb25kaXRpb24gKCApLmNvZGUgaW4gIk1vZGVyYXRlIEluanVyaWVzIg0KICAgICAgICAgICAgKQ0KICAgICkNCg0KZGVmaW5lICJFbmNvdW50ZXIgV2hlcmUgQSBGYWxsIEFuZCBNYWpvciBJbmp1cnkgT2NjdXJyZWQgTm90IFBPQSI6DQogICJFbmNvdW50ZXIgV2l0aCBBIEZhbGwgTm90IFByZXNlbnQgT24gQWRtaXNzaW9uIiBGYWxsT2NjdXJyZWQNCiAgICB3aGVyZSBleGlzdHMgKCAoIEZhbGxPY2N1cnJlZC5jbGFpbURpYWdub3NpcyAoICkgKSBNYWpvckZhbGxPY2N1cnJlZA0KICAgICAgICB3aGVyZSBNYWpvckZhbGxPY2N1cnJlZC5vbkFkbWlzc2lvbiBpcyBudWxsDQogICAgICAgICAgb3IgTWFqb3JGYWxsT2NjdXJyZWQub25BZG1pc3Npb24gaW4gIk5vdCBQcmVzZW50IE9uIEFkbWlzc2lvbiBvciBEb2N1bWVudGF0aW9uIEluc3VmZmljaWVudCB0byBEZXRlcm1pbmUiDQogICAgICAgICAgICBhbmQgKCBNYWpvckZhbGxPY2N1cnJlZC5kaWFnbm9zaXMgaW4gIk1ham9yIEluanVyaWVzIg0KICAgICAgICAgICAgICAgIG9yIE1ham9yRmFsbE9jY3VycmVkLmRpYWdub3Npcy5nZXRDb25kaXRpb24gKCApLmNvZGUgaW4gIk1ham9yIEluanVyaWVzIg0KICAgICAgICAgICAgKQ0KICAgICkNCg0KZGVmaW5lICJFbmNvdW50ZXIgV2hlcmUgQSBGYWxsIE9jY3VycmVkIjoNCiAgIkVuY291bnRlciBXaXRoIEEgRmFsbCBEaWFnbm9zaXMiDQogICAgdW5pb24gIkVuY291bnRlciBXaXRoIEEgRmFsbCBFdmVudCINCg0KZGVmaW5lICJFbmNvdW50ZXIgV2l0aCBBIEZhbGwgTm90IFByZXNlbnQgT24gQWRtaXNzaW9uIjoNCiAgIkVuY291bnRlciBXaGVyZSBBIEZhbGwgT2NjdXJyZWQiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdoZXJlIElucGF0aWVudEVuY291bnRlci5oYXNEaWFnbm9zaXNOb3RQcmVzZW50T25BZG1pc3Npb25Pck51bGwgKCAiSW5wYXRpZW50IEZhbGxzIiApDQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggQSBGYWxsIERpYWdub3NpcyI6DQogICJRdWFsaWZ5aW5nIEVuY291bnRlciIgUXVhbGlmeWluZ0VuY291bnRlcg0KICAgIHdoZXJlIFF1YWxpZnlpbmdFbmNvdW50ZXIucmVhc29uQ29kZSBpbiAiSW5wYXRpZW50IEZhbGxzIg0KICAgICAgb3IgUXVhbGlmeWluZ0VuY291bnRlci5lbmNvdW50ZXJzRGlhZ25vc2lzICggKS5jb2RlIGluICJJbnBhdGllbnQgRmFsbHMiDQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggQSBGYWxsIEV2ZW50IjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoIFtBZHZlcnNlRXZlbnQ6ICJJbnBhdGllbnQgRmFsbHMiXSBGYWxsc0RvY3VtZW50YXRpb24NCiAgICAgIHN1Y2ggdGhhdCBDb2FsZXNjZShGYWxsc0RvY3VtZW50YXRpb24uZGF0ZSwgRmFsbHNEb2N1bWVudGF0aW9uLnJlY29yZGVkRGF0ZSkgZHVyaW5nIElucGF0aWVudEVuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApDQoNCmRlZmluZSAiRGVub21pbmF0b3IgRXhjbHVzaW9ucyI6DQogICJFbmNvdW50ZXIgV2l0aCBBIEZhbGwgUHJlc2VudCBPbiBBZG1pc3Npb24iDQoNCmRlZmluZSAiTnVtZXJhdG9yIEV4Y2x1c2lvbnMiOg0KICAiRW5jb3VudGVyIFdpdGggQSBGYWxsIFByZXNlbnQgT24gQWRtaXNzaW9uIg0KDQpkZWZpbmUgIkVuY291bnRlciBXaXRoIEEgRmFsbCBQcmVzZW50IE9uIEFkbWlzc2lvbiI6DQogICJRdWFsaWZ5aW5nIEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgd2hlcmUgSW5wYXRpZW50RW5jb3VudGVyLmhhc0RpYWdub3Npc1ByZXNlbnRPbkFkbWlzc2lvbiAoICJJbnBhdGllbnQgRmFsbHMiICkNCg0KZGVmaW5lICJSaXNrIFZhcmlhYmxlIEJvZHkgTWFzcyBJbmRleCAoQk1JKSI6DQogIGZyb20NCiAgICBbIlVTQ29yZUJNSVByb2ZpbGUiXSBCTUkNCiAgICB3aXRoICJRdWFsaWZ5aW5nIEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgICBzdWNoIHRoYXQgQk1JLmVmZmVjdGl2ZS50b0ludGVydmFsICggKSBzdGFydHMgZHVyaW5nIElucGF0aWVudEVuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApDQogICAgICAgIGFuZCBCTUkudmFsdWUgaXMgbm90IG51bGwNCiAgICAgICAgYW5kIEJNSS5zdGF0dXMgaW4geyAnZmluYWwnLCAnYW1lbmRlZCcsICdjb3JyZWN0ZWQnIH0NCiAgICByZXR1cm4gQk1JLnZhbHVlIGFzIFF1YW50aXR5DQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBBbGwgRW5jb3VudGVyIERpYWdub3NlcyB3aXRoIFJhbmsgYW5kIFBPQSBJbmRpY2F0aW9uIjoNCiAgZnJvbQ0KICAgICJRdWFsaWZ5aW5nIEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgbGV0IGNsYWltOiAoIFtDbGFpbV0gQw0KICAgICAgICB3aGVyZSBDLnN0YXR1cyA9ICdhY3RpdmUnDQogICAgICAgICAgYW5kIEMudXNlID0gJ2NsYWltJw0KICAgICAgICAgIGFuZCBleGlzdHMgKCBDLml0ZW0gQ2xhaW1JdGVtDQogICAgICAgICAgICAgIHdoZXJlIENsYWltSXRlbS5lbmNvdW50ZXIucmVmZXJlbmNlcyAoIElucGF0aWVudEVuY291bnRlciApDQogICAgICAgICAgKQ0KICAgICksDQogICAgY2xhaW1JdGVtOiAoIGNsYWltLml0ZW0gQ2xhaW1JdGVtDQogICAgICAgIHdoZXJlIENsYWltSXRlbS5lbmNvdW50ZXIucmVmZXJlbmNlcyAoIElucGF0aWVudEVuY291bnRlciApDQogICAgKQ0KICAgIHJldHVybiBUdXBsZSB7DQogICAgICBlbmNvdW50ZXJJZDogSW5wYXRpZW50RW5jb3VudGVyLmlkLA0KICAgICAgZGlhZ25vc2lzOiBjbGFpbS5kaWFnbm9zaXMsDQogICAgICByYW5rOiBjbGFpbS5kaWFnbm9zaXMuc2VxdWVuY2UsDQogICAgICBQT0E6IGNsYWltLmRpYWdub3NpcyBEaWFnDQogICAgICAgIHdoZXJlIERpYWcub25BZG1pc3Npb24gaW4gIlByZXNlbnQgb24gQWRtaXNzaW9uIG9yIENsaW5pY2FsbHkgVW5kZXRlcm1pbmVkIg0KICAgICAgICAgIG9yIERpYWcub25BZG1pc3Npb24gaW4gIk5vdCBQcmVzZW50IE9uIEFkbWlzc2lvbiBvciBEb2N1bWVudGF0aW9uIEluc3VmZmljaWVudCB0byBEZXRlcm1pbmUiDQogICAgfQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggQWJub3JtYWwgV2VpZ2h0IExvc3Mgb3IgTWFsbnV0cml0aW9uIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIkFibm9ybWFsIFdlaWdodCBMb3NzIiApDQogICAgICBvciBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIk1hbG51dHJpdGlvbiIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggQW50aWNvYWd1bGFudCBBY3RpdmUgYXQgQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoIFsiTWVkaWNhdGlvblJlcXVlc3QiOiAiQW50aWNvYWd1bGFudHMgZm9yIEFsbCBJbmRpY2F0aW9ucyJdIEFudGljb2FndWxhbnRzDQogICAgICBzdWNoIHRoYXQgQW50aWNvYWd1bGFudHMuc3RhdHVzIGluIHsgJ2FjdGl2ZScsICdjb21wbGV0ZWQnIH0NCiAgICAgICAgYW5kICggQW50aWNvYWd1bGFudHMuaW50ZW50ID0gJ29yZGVyJw0KICAgICAgICAgICAgb3IgKCBBbnRpY29hZ3VsYW50cy5pbnRlbnQgPSAncGxhbicNCiAgICAgICAgICAgICAgICBhbmQgQW50aWNvYWd1bGFudHMuc3ViamVjdC5yZWZlcmVuY2UuZ2V0SWQgKCApID0gUGF0aWVudC5pZA0KICAgICAgICAgICAgKQ0KICAgICAgICApDQogICAgICAgIGFuZCBBbnRpY29hZ3VsYW50cy5pc0NvbW11bml0eSAoICkNCiAgICAgICAgYW5kIEFudGljb2FndWxhbnRzLm1lZGljYXRpb25SZXF1ZXN0UGVyaW9kICggKSBvdmVybGFwcyBiZWZvcmUgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZA0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggQW50aWNvYWd1bGFudCBBZG1pbmlzdHJhdGlvbiBEdXJpbmcgRW5jb3VudGVyIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoIFsiTWVkaWNhdGlvbkFkbWluaXN0cmF0aW9uIjogIkFudGljb2FndWxhbnRzIGZvciBBbGwgSW5kaWNhdGlvbnMiXSBBbnRpY29hZ3VsYW50cw0KICAgICAgc3VjaCB0aGF0IEFudGljb2FndWxhbnRzLmVmZmVjdGl2ZS50b0ludGVydmFsICggKSBzdGFydHMgZHVyaW5nIElucGF0aWVudEVuY291bnRlci5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb24gKCApDQogICAgICAgIGFuZCBBbnRpY29hZ3VsYW50cy5zdGF0dXMgaW4geyAnaW4tcHJvZ3Jlc3MnLCAnY29tcGxldGVkJyB9DQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBFbmNvdW50ZXIgd2l0aCBBbnRpZGVwcmVzc2FudCBBY3RpdmUgYXQgQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoIFsiTWVkaWNhdGlvblJlcXVlc3QiOiAiQW50aWRlcHJlc3NhbnRzIl0gQW50aWRlcHJlc3NhbnRNZWQNCiAgICAgIHN1Y2ggdGhhdCBBbnRpZGVwcmVzc2FudE1lZC5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcgfQ0KICAgICAgICBhbmQgKCBBbnRpZGVwcmVzc2FudE1lZC5pbnRlbnQgPSAnb3JkZXInDQogICAgICAgICAgICBvciAoIEFudGlkZXByZXNzYW50TWVkLmludGVudCA9ICdwbGFuJw0KICAgICAgICAgICAgICAgIGFuZCBBbnRpZGVwcmVzc2FudE1lZC5zdWJqZWN0LnJlZmVyZW5jZS5nZXRJZCAoICkgPSBQYXRpZW50LmlkDQogICAgICAgICAgICApDQogICAgICAgICkNCiAgICAgICAgYW5kIEFudGlkZXByZXNzYW50TWVkLmlzQ29tbXVuaXR5ICggKQ0KICAgICAgICBhbmQgQW50aWRlcHJlc3NhbnRNZWQubWVkaWNhdGlvblJlcXVlc3RQZXJpb2QgKCApIG92ZXJsYXBzIGJlZm9yZSBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kDQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBFbmNvdW50ZXIgd2l0aCBBbnRpaHlwZXJ0ZW5zaXZlIEFjdGl2ZSBhdCBBZG1pc3Npb24iOg0KICAiUXVhbGlmeWluZyBFbmNvdW50ZXIiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdpdGggWyJNZWRpY2F0aW9uUmVxdWVzdCI6ICJBbnRpaHlwZXJ0ZW5zaXZlcyJdIEJQTWVkDQogICAgICBzdWNoIHRoYXQgQlBNZWQuc3RhdHVzIGluIHsgJ2FjdGl2ZScsICdjb21wbGV0ZWQnIH0NCiAgICAgICAgYW5kICggQlBNZWQuaW50ZW50ID0gJ29yZGVyJw0KICAgICAgICAgICAgb3IgKCBCUE1lZC5pbnRlbnQgPSAncGxhbicNCiAgICAgICAgICAgICAgICBhbmQgQlBNZWQuc3ViamVjdC5yZWZlcmVuY2UuZ2V0SWQgKCApID0gUGF0aWVudC5pZA0KICAgICAgICAgICAgKQ0KICAgICAgICApDQogICAgICAgIGFuZCBCUE1lZC5pc0NvbW11bml0eSAoICkNCiAgICAgICAgYW5kIEJQTWVkLm1lZGljYXRpb25SZXF1ZXN0UGVyaW9kICggKSBvdmVybGFwcyBiZWZvcmUgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZA0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggQ05TIERlcHJlc3NhbnQgQWN0aXZlIGF0IEFkbWlzc2lvbiI6DQogICJRdWFsaWZ5aW5nIEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgd2l0aCBbIk1lZGljYXRpb25SZXF1ZXN0IjogIkNlbnRyYWwgTmVydm91cyBTeXN0ZW0gRGVwcmVzc2FudHMiXSBDTlNNZWQNCiAgICAgIHN1Y2ggdGhhdCBDTlNNZWQuc3RhdHVzIGluIHsgJ2FjdGl2ZScsICdjb21wbGV0ZWQnIH0NCiAgICAgICAgYW5kICggQ05TTWVkLmludGVudCA9ICdvcmRlcicNCiAgICAgICAgICAgIG9yICggQ05TTWVkLmludGVudCA9ICdwbGFuJw0KICAgICAgICAgICAgICAgIGFuZCBDTlNNZWQuc3ViamVjdC5yZWZlcmVuY2UuZ2V0SWQgKCApID0gUGF0aWVudC5pZA0KICAgICAgICAgICAgKQ0KICAgICAgICApDQogICAgICAgIGFuZCBDTlNNZWQuaXNDb21tdW5pdHkgKCApDQogICAgICAgIGFuZCBDTlNNZWQubWVkaWNhdGlvblJlcXVlc3RQZXJpb2QgKCApIG92ZXJsYXBzIGJlZm9yZSBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kDQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBFbmNvdW50ZXIgd2l0aCBEaXVyZXRpYyBBY3RpdmUgYXQgQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoIFsiTWVkaWNhdGlvblJlcXVlc3QiOiAiRGl1cmV0aWNzIl0gRGl1cmV0aWNNZWQNCiAgICAgIHN1Y2ggdGhhdCBEaXVyZXRpY01lZC5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcgfQ0KICAgICAgICBhbmQgKCBEaXVyZXRpY01lZC5pbnRlbnQgPSAnb3JkZXInDQogICAgICAgICAgICBvciAoIERpdXJldGljTWVkLmludGVudCA9ICdwbGFuJw0KICAgICAgICAgICAgICAgIGFuZCBEaXVyZXRpY01lZC5zdWJqZWN0LnJlZmVyZW5jZS5nZXRJZCAoICkgPSBQYXRpZW50LmlkDQogICAgICAgICAgICApDQogICAgICAgICkNCiAgICAgICAgYW5kIERpdXJldGljTWVkLmlzQ29tbXVuaXR5ICggKQ0KICAgICAgICBhbmQgRGl1cmV0aWNNZWQubWVkaWNhdGlvblJlcXVlc3RQZXJpb2QgKCApIG92ZXJsYXBzIGJlZm9yZSBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kDQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBFbmNvdW50ZXIgd2l0aCBPcGlvaWQgTWVkaWNhdGlvbiBBY3RpdmUgYXQgQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoIFsiTWVkaWNhdGlvblJlcXVlc3QiOiAiT3Bpb2lkcyJdIE9waW9pZE1lZA0KICAgICAgc3VjaCB0aGF0IE9waW9pZE1lZC5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcgfQ0KICAgICAgICBhbmQgKCBPcGlvaWRNZWQuaW50ZW50ID0gJ29yZGVyJw0KICAgICAgICAgICAgb3IgKCBPcGlvaWRNZWQuaW50ZW50ID0gJ3BsYW4nDQogICAgICAgICAgICAgICAgYW5kIE9waW9pZE1lZC5zdWJqZWN0LnJlZmVyZW5jZS5nZXRJZCAoICkgPSBQYXRpZW50LmlkDQogICAgICAgICAgICApDQogICAgICAgICkNCiAgICAgICAgYW5kIE9waW9pZE1lZC5pc0NvbW11bml0eSAoICkNCiAgICAgICAgYW5kIE9waW9pZE1lZC5tZWRpY2F0aW9uUmVxdWVzdFBlcmlvZCAoICkgb3ZlcmxhcHMgYmVmb3JlIElucGF0aWVudEVuY291bnRlci5wZXJpb2QNCg0KZGVmaW5lICJSaXNrIFZhcmlhYmxlIEVuY291bnRlciB3aXRoIENvYWd1bGF0aW9uIERpc29yZGVyIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIkNvYWd1bGF0aW9uIERpc29yZGVycyIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggRGVsaXJpdW0gb3IgRGVtZW50aWEgb3IgT3RoZXIgUHN5Y2hvc2lzIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIkRlbGlyaXVtLCBEZW1lbnRpYSwgYW5kIE90aGVyIFBzeWNob3NlcyIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggRGVwcmVzc2lvbiBQcmVzZW50IG9uIEFkbWlzc2lvbiI6DQogICJRdWFsaWZ5aW5nIEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgd2hlcmUgSW5wYXRpZW50RW5jb3VudGVyLmhhc0RpYWdub3Npc1ByZXNlbnRPbkFkbWlzc2lvbiAoICJEZXByZXNzaW9uIiApDQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBFbmNvdW50ZXIgd2l0aCBFcGlsZXBzeSBQcmVzZW50IG9uIEFkbWlzc2lvbiI6DQogICJRdWFsaWZ5aW5nIEVuY291bnRlciIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgd2hlcmUgSW5wYXRpZW50RW5jb3VudGVyLmhhc0RpYWdub3Npc1ByZXNlbnRPbkFkbWlzc2lvbiAoICJFcGlsZXBzeSIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggTGV1a2VtaWEgb3IgTHltcGhvbWEgUHJlc2VudCBvbiBBZG1pc3Npb24iOg0KICAiUXVhbGlmeWluZyBFbmNvdW50ZXIiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdoZXJlIElucGF0aWVudEVuY291bnRlci5oYXNEaWFnbm9zaXNQcmVzZW50T25BZG1pc3Npb24gKCAiTGV1a2VtaWEgb3IgTHltcGhvbWEiICkNCg0KZGVmaW5lICJSaXNrIFZhcmlhYmxlIEVuY291bnRlciB3aXRoIExpdmVyIERpc2Vhc2UgTW9kZXJhdGUgdG8gU2V2ZXJlIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIkxpdmVyIERpc2Vhc2UgTW9kZXJhdGUgdG8gU2V2ZXJlIiApDQoNCmRlZmluZSAiUmlzayBWYXJpYWJsZSBFbmNvdW50ZXIgd2l0aCBNYWxpZ25hbnQgQm9uZSBEaXNlYXNlIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIk1hbGlnbmFudCBCb25lIERpc2Vhc2UiICkNCg0KZGVmaW5lICJSaXNrIFZhcmlhYmxlIEVuY291bnRlciB3aXRoIE5ldXJvbG9naWMgRGlzb3JkZXIgUHJlc2VudCBvbiBBZG1pc3Npb24iOg0KICAiUXVhbGlmeWluZyBFbmNvdW50ZXIiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdoZXJlIElucGF0aWVudEVuY291bnRlci5oYXNEaWFnbm9zaXNQcmVzZW50T25BZG1pc3Npb24gKCAiTmV1cm9sb2dpYyBNb3ZlbWVudCBhbmQgUmVsYXRlZCBEaXNvcmRlcnMiICkNCg0KZGVmaW5lICJSaXNrIFZhcmlhYmxlIEVuY291bnRlciB3aXRoIE9iZXNpdHkgUHJlc2VudCBvbiBBZG1pc3Npb24iOg0KICAiUXVhbGlmeWluZyBFbmNvdW50ZXIiIElucGF0aWVudEVuY291bnRlcg0KICAgIHdoZXJlIElucGF0aWVudEVuY291bnRlci5oYXNEaWFnbm9zaXNQcmVzZW50T25BZG1pc3Npb24gKCAiT2Jlc2l0eSIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggT3N0ZW9wb3Jvc2lzIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIk9zdGVvcG9yb3NpcyIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggUGVyaXBoZXJhbCBOZXVyb3BhdGh5IFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIlBlcmlwaGVyYWwgTmV1cm9wYXRoeSIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggU3Ryb2tlIFByZXNlbnQgb24gQWRtaXNzaW9uIjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuaGFzRGlhZ25vc2lzUHJlc2VudE9uQWRtaXNzaW9uICggIlN0cm9rZSIgKQ0KDQpkZWZpbmUgIlJpc2sgVmFyaWFibGUgRW5jb3VudGVyIHdpdGggU3VpY2lkZSBBdHRlbXB0IjoNCiAgIlF1YWxpZnlpbmcgRW5jb3VudGVyIiBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aGVyZSBJbnBhdGllbnRFbmNvdW50ZXIuZW5jb3VudGVyc0RpYWdub3NpcyAoICkuY29kZSBpbiAiU3VpY2lkZSBBdHRlbXB0Ig0KDQpkZWZpbmUgIlNERSBFdGhuaWNpdHkiOg0KICBTREUuIlNERSBFdGhuaWNpdHkiDQoNCmRlZmluZSAiU0RFIFBheWVyIjoNCiAgU0RFLiJTREUgUGF5ZXIiDQoNCmRlZmluZSAiU0RFIFJhY2UiOg0KICBTREUuIlNERSBSYWNlIg0KDQpkZWZpbmUgIlNERSBTZXgiOg0KICBTREUuIlNERSBTZXgiDQoNCmRlZmluZSBmdW5jdGlvbiAiRGVub21pbmF0b3IgT2JzZXJ2YXRpb24iKFF1YWxpZnlpbmdFbmNvdW50ZXIgRW5jb3VudGVyKToNCiAgZHVyYXRpb24gaW4gZGF5cyBvZiBRdWFsaWZ5aW5nRW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbiAoICkNCg0KZGVmaW5lIGZ1bmN0aW9uICJOdW1lcmF0b3IgT2JzZXJ2YXRpb24iKFF1YWxpZnlpbmdFbmNvdW50ZXIgRW5jb3VudGVyKToNCiAgQ291bnQoIk51bWVyYXRvciIgRmFsbHNFbmNvdW50ZXINCiAgICAgIHdoZXJlIEZhbGxzRW5jb3VudGVyLnBlcmlvZCBlbmRzIGR1cmluZyBRdWFsaWZ5aW5nRW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbigpDQogICkNCg0KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNEaWFnbm9zaXNQcmVzZW50T25BZG1pc3Npb24oZW5jb3VudGVyIEVuY291bnRlciwgZGlhZ25vc2lzVmFsdWVTZXQgVmFsdWVTZXQpOg0KICBleGlzdHMgKCBlbmNvdW50ZXIgSW5wdEVuY291bnRlcg0KICAgICAgbGV0IGNsYWltOiAoIFtDbGFpbV0gQ2xhaW1zDQogICAgICAgICAgd2hlcmUgQ2xhaW1zLnN0YXR1cyA9ICdhY3RpdmUnDQogICAgICAgICAgICBhbmQgQ2xhaW1zLnVzZSA9ICdjbGFpbScNCiAgICAgICAgICAgIGFuZCBleGlzdHMgKCBDbGFpbXMuaXRlbSBDbGFpbXNJdGVtDQogICAgICAgICAgICAgICAgd2hlcmUgQ2xhaW1zSXRlbS5lbmNvdW50ZXIucmVmZXJlbmNlcyAoIElucHRFbmNvdW50ZXIgKQ0KICAgICAgICAgICAgKQ0KICAgICAgKSwNCiAgICAgIGNsYWltSXRlbTogKCBjbGFpbS5pdGVtIENsYWltc0l0ZW0NCiAgICAgICAgICB3aGVyZSBDbGFpbXNJdGVtLmVuY291bnRlci5yZWZlcmVuY2VzICggSW5wdEVuY291bnRlciApDQogICAgICApDQogICAgICByZXR1cm4gY2xhaW0uZGlhZ25vc2lzIENsYWltc0RpYWcNCiAgICAgICAgd2hlcmUgQ2xhaW1zRGlhZy5zZXF1ZW5jZSBpbiBjbGFpbUl0ZW0uZGlhZ25vc2lzU2VxdWVuY2UNCiAgICAgICAgICBhbmQgQ2xhaW1zRGlhZy5vbkFkbWlzc2lvbiBpbiAiUHJlc2VudCBvbiBBZG1pc3Npb24gb3IgQ2xpbmljYWxseSBVbmRldGVybWluZWQiDQogICAgICAgICAgYW5kIENsYWltc0RpYWcuZGlhZ25vc2lzIGluIGRpYWdub3Npc1ZhbHVlU2V0DQogICkNCg0KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNEaWFnbm9zaXNOb3RQcmVzZW50T25BZG1pc3Npb24oZW5jb3VudGVyIEVuY291bnRlciwgZGlhZ25vc2lzVmFsdWVTZXQgVmFsdWVTZXQpOg0KICBleGlzdHMgKCBlbmNvdW50ZXIgSW5wYXRpZW50RW5jb3VudGVyDQogICAgICBsZXQgY2xhaW06ICggW0NsYWltXSBDbGFpbXMNCiAgICAgICAgICB3aGVyZSBDbGFpbXMuc3RhdHVzID0gJ2FjdGl2ZScNCiAgICAgICAgICAgIGFuZCBDbGFpbXMudXNlID0gJ2NsYWltJw0KICAgICAgICAgICAgYW5kIGV4aXN0cyAoIENsYWltcy5pdGVtIENsYWltc0l0ZW0NCiAgICAgICAgICAgICAgICB3aGVyZSBDbGFpbXNJdGVtLmVuY291bnRlci5yZWZlcmVuY2VzICggSW5wYXRpZW50RW5jb3VudGVyICkNCiAgICAgICAgICAgICkNCiAgICAgICksDQogICAgICBjbGFpbUl0ZW06ICggY2xhaW0uaXRlbSBDbGFpbXNJdGVtDQogICAgICAgICAgd2hlcmUgQ2xhaW1zSXRlbS5lbmNvdW50ZXIucmVmZXJlbmNlcyAoIElucGF0aWVudEVuY291bnRlciApDQogICAgICApDQogICAgICByZXR1cm4gY2xhaW0uZGlhZ25vc2lzIENsYWltc0RpYWcNCiAgICAgICAgd2hlcmUgQ2xhaW1zRGlhZy5zZXF1ZW5jZSBpbiBjbGFpbUl0ZW0uZGlhZ25vc2lzU2VxdWVuY2UNCiAgICAgICAgICBhbmQgKCBDbGFpbXNEaWFnLm9uQWRtaXNzaW9uIGluICJOb3QgUHJlc2VudCBPbiBBZG1pc3Npb24gb3IgRG9jdW1lbnRhdGlvbiBJbnN1ZmZpY2llbnQgdG8gRGV0ZXJtaW5lIiApDQogICAgICAgICAgYW5kIENsYWltc0RpYWcuZGlhZ25vc2lzIGluIGRpYWdub3Npc1ZhbHVlU2V0DQogICkNCg0KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNEaWFnbm9zaXNOb3RQcmVzZW50T25BZG1pc3Npb25Pck51bGwoZW5jb3VudGVyIEVuY291bnRlciwgZGlhZ25vc2lzVmFsdWVTZXQgVmFsdWVTZXQpOg0KICBleGlzdHMgKCBlbmNvdW50ZXIgSW5wdEVuY291bnRlcg0KICAgICAgbGV0IGNsYWltOiAoIFtDbGFpbV0gQ2xhaW1zDQogICAgICAgICAgd2hlcmUgQ2xhaW1zLnN0YXR1cyA9ICdhY3RpdmUnDQogICAgICAgICAgICBhbmQgQ2xhaW1zLnVzZSA9ICdjbGFpbScNCiAgICAgICAgICAgIGFuZCBleGlzdHMgKCBDbGFpbXMuaXRlbSBDbGFpbXNJdGVtDQogICAgICAgICAgICAgICAgd2hlcmUgQ2xhaW1zSXRlbS5lbmNvdW50ZXIucmVmZXJlbmNlcyAoIElucHRFbmNvdW50ZXIgKQ0KICAgICAgICAgICAgKQ0KICAgICAgKSwNCiAgICAgIGNsYWltSXRlbTogKCBjbGFpbS5pdGVtIENsYWltc0l0ZW0NCiAgICAgICAgICB3aGVyZSBDbGFpbXNJdGVtLmVuY291bnRlci5yZWZlcmVuY2VzICggSW5wdEVuY291bnRlciApDQogICAgICApDQogICAgICByZXR1cm4gY2xhaW0uZGlhZ25vc2lzIENsYWltc0RpYWcNCiAgICAgICAgd2hlcmUgQ2xhaW1zRGlhZy5zZXF1ZW5jZSBpbiBjbGFpbUl0ZW0uZGlhZ25vc2lzU2VxdWVuY2UNCiAgICAgICAgICBhbmQgQ2xhaW1zRGlhZy5vbkFkbWlzc2lvbiBpcyBudWxsDQogICAgICAgICAgb3IgQ2xhaW1zRGlhZy5vbkFkbWlzc2lvbiBpbiAiTm90IFByZXNlbnQgT24gQWRtaXNzaW9uIG9yIERvY3VtZW50YXRpb24gSW5zdWZmaWNpZW50IHRvIERldGVybWluZSINCiAgICAgICAgICAgIGFuZCBDbGFpbXNEaWFnLmRpYWdub3NpcyBpbiBkaWFnbm9zaXNWYWx1ZVNldA0KICApDQoNCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gZW5jb3VudGVyc0RpYWdub3NpcyhFbmNvdW50ZXIgRW5jb3VudGVyKToNCiAgLy8gVGhlcmUgaXMgYSBwcm9ibGVtIGluIHRoZSBDUU1Db21tb24gZmx1ZW50IGZ1bmN0aW9uICdlbmNvdW50ZXJEaWFnbm9zaXMnIHdoZXJlaW4gdGhlIHVuaW9uIG9wZXJhdGlvbiBpc24ndCB3b3JraW5nIGFzIHVzZWQuDQogIC8vIFRoaXMgZnVuY3Rpb24gZml4ZXMgdGhhdCB1c2FnZSwgYnV0IHNob3VsZCBiZSBjb25zaWRlcmVkIHRlbXBvcmFyeSB1bnRpbCB0aGUgbGlicmFyeSBmdW5jdGlvbiB3b3JrcyBwcm9wZXJseSAgIA0KICANCiAgDQogIEVuY291bnRlci5yZWFzb25SZWZlcmVuY2UgRW5jRGlhZw0KICAgIHJldHVybiBzaW5nbGV0b24gZnJvbSAoICggW0NvbmRpdGlvbkVuY291bnRlckRpYWdub3Npc10gQ29uZGl0aW9uRUQNCiAgICAgICAgdW5pb24gW0NvbmRpdGlvblByb2JsZW1zSGVhbHRoQ29uY2VybnNdIENvbmRpdGlvblBIQyApIENvbmQNCiAgICAgICAgd2hlcmUgRW5jRGlhZy5yZWZlcmVuY2VzICggQ29uZC5pZCApDQogICAgKQ=="}]},"request":{"method":"PUT","url":"Library/CMS1017FHIRHHFI"}},{"resource":{"resourceType":"Measure","id":"CMS1017FHIRHHFI","meta":{"profile":["http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablemeasure","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/computable-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/publishable-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/executable-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cql-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/elm-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/ratio-measure-cqfm"]},"contained":[{"resourceType":"Library","id":"effective-data-requirements","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode","valueCoding":{"system":"http://terminology.hl7.org/CodeSystem/medicationrequest-category","code":"community","display":"Community"}},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode","valueCoding":{"system":"http://snomed.info/sct","code":"248153007","display":"Male (finding)"}},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode","valueCoding":{"system":"http://snomed.info/sct","code":"248152002","display":"Female (finding)"}},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CQMCommon"},{"url":"name","valueString":"Inpatient Encounter"},{"url":"statement","valueString":"define \"Inpatient Encounter\":\n  [Encounter: \"Encounter Inpatient\"] EncounterInpatient\n    where EncounterInpatient.status = 'finished'\n      and EncounterInpatient.period ends during day of \"Measurement Period\""},{"url":"displaySequence","valueInteger":0}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Qualifying Encounter"},{"url":"statement","valueString":"define \"Qualifying Encounter\":\n  CQMCommon.\"Inpatient Encounter\" InpatientEncounter\n    where InpatientEncounter.hospitalizationWithObservation ( ).lengthInDays ( ) <= 120\n      and AgeInYearsAt(date from start of InpatientEncounter.period) >= 18"},{"url":"displaySequence","valueInteger":1}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Osteoporosis Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Osteoporosis Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Osteoporosis\" )"},{"url":"displaySequence","valueInteger":2}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Coagulation Disorder Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Coagulation Disorder Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Coagulation Disorders\" )"},{"url":"displaySequence","valueInteger":3}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Antidepressant Active at Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Antidepressant Active at Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    with [\"MedicationRequest\": \"Antidepressants\"] AntidepressantMed\n      such that AntidepressantMed.status in { 'active', 'completed' }\n        and ( AntidepressantMed.intent = 'order'\n            or ( AntidepressantMed.intent = 'plan'\n                and AntidepressantMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and AntidepressantMed.isCommunity ( )\n        and AntidepressantMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period"},{"url":"displaySequence","valueInteger":4}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable All Encounter Diagnoses with Rank and POA Indication"},{"url":"statement","valueString":"define \"Risk Variable All Encounter Diagnoses with Rank and POA Indication\":\n  from\n    \"Qualifying Encounter\" InpatientEncounter\n    let claim: ( [Claim] C\n        where C.status = 'active'\n          and C.use = 'claim'\n          and exists ( C.item ClaimItem\n              where ClaimItem.encounter.references ( InpatientEncounter )\n          )\n    ),\n    claimItem: ( claim.item ClaimItem\n        where ClaimItem.encounter.references ( InpatientEncounter )\n    )\n    return Tuple {\n      encounterId: InpatientEncounter.id,\n      diagnosis: claim.diagnosis,\n      rank: claim.diagnosis.sequence,\n      POA: claim.diagnosis Diag\n        where Diag.onAdmission in \"Present on Admission or Clinically Undetermined\"\n          or Diag.onAdmission in \"Not Present On Admission or Documentation Insufficient to Determine\"\n    }"},{"url":"displaySequence","valueInteger":5}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Leukemia or Lymphoma Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Leukemia or Lymphoma Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Leukemia or Lymphoma\" )"},{"url":"displaySequence","valueInteger":6}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Obesity Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Obesity Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Obesity\" )"},{"url":"displaySequence","valueInteger":7}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Peripheral Neuropathy Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Peripheral Neuropathy Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Peripheral Neuropathy\" )"},{"url":"displaySequence","valueInteger":8}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Delirium or Dementia or Other Psychosis Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Delirium or Dementia or Other Psychosis Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Delirium, Dementia, and Other Psychoses\" )"},{"url":"displaySequence","valueInteger":9}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Suicide Attempt"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Suicide Attempt\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.encountersDiagnosis ( ).code in \"Suicide Attempt\""},{"url":"displaySequence","valueInteger":10}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"SupplementalDataElements"},{"url":"name","valueString":"SDE Payer"},{"url":"statement","valueString":"define \"SDE Payer\":\n  [Coverage: type in \"Payer Type\"] Payer\n    return {\n      code: Payer.type,\n      period: Payer.period\n    }"},{"url":"displaySequence","valueInteger":11}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"SDE Payer"},{"url":"statement","valueString":"define \"SDE Payer\":\n  SDE.\"SDE Payer\""},{"url":"displaySequence","valueInteger":12}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Liver Disease Moderate to Severe Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Liver Disease Moderate to Severe Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Liver Disease Moderate to Severe\" )"},{"url":"displaySequence","valueInteger":13}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Initial Population"},{"url":"statement","valueString":"define \"Initial Population\":\n  \"Qualifying Encounter\""},{"url":"displaySequence","valueInteger":14}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Anticoagulant Administration During Encounter"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Anticoagulant Administration During Encounter\":\n  \"Qualifying Encounter\" InpatientEncounter\n    with [\"MedicationAdministration\": \"Anticoagulants for All Indications\"] Anticoagulants\n      such that Anticoagulants.effective.toInterval ( ) starts during InpatientEncounter.hospitalizationWithObservation ( )\n        and Anticoagulants.status in { 'in-progress', 'completed' }"},{"url":"displaySequence","valueInteger":15}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Neurologic Disorder Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Neurologic Disorder Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Neurologic Movement and Related Disorders\" )"},{"url":"displaySequence","valueInteger":16}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Abnormal Weight Loss or Malnutrition Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Abnormal Weight Loss or Malnutrition Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Abnormal Weight Loss\" )\n      or InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Malnutrition\" )"},{"url":"displaySequence","valueInteger":17}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Anticoagulant Active at Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Anticoagulant Active at Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    with [\"MedicationRequest\": \"Anticoagulants for All Indications\"] Anticoagulants\n      such that Anticoagulants.status in { 'active', 'completed' }\n        and ( Anticoagulants.intent = 'order'\n            or ( Anticoagulants.intent = 'plan'\n                and Anticoagulants.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and Anticoagulants.isCommunity ( )\n        and Anticoagulants.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period"},{"url":"displaySequence","valueInteger":18}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Body Mass Index (BMI)"},{"url":"statement","valueString":"define \"Risk Variable Body Mass Index (BMI)\":\n  from\n    [\"USCoreBMIProfile\"] BMI\n    with \"Qualifying Encounter\" InpatientEncounter\n      such that BMI.effective.toInterval ( ) starts during InpatientEncounter.hospitalizationWithObservation ( )\n        and BMI.value is not null\n        and BMI.status in { 'final', 'amended', 'corrected' }\n    return BMI.value as Quantity"},{"url":"displaySequence","valueInteger":19}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Depression Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Depression Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Depression\" )"},{"url":"displaySequence","valueInteger":20}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Epilepsy Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Epilepsy Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Epilepsy\" )"},{"url":"displaySequence","valueInteger":21}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Diuretic Active at Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Diuretic Active at Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    with [\"MedicationRequest\": \"Diuretics\"] DiureticMed\n      such that DiureticMed.status in { 'active', 'completed' }\n        and ( DiureticMed.intent = 'order'\n            or ( DiureticMed.intent = 'plan'\n                and DiureticMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and DiureticMed.isCommunity ( )\n        and DiureticMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period"},{"url":"displaySequence","valueInteger":22}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with CNS Depressant Active at Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with CNS Depressant Active at Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    with [\"MedicationRequest\": \"Central Nervous System Depressants\"] CNSMed\n      such that CNSMed.status in { 'active', 'completed' }\n        and ( CNSMed.intent = 'order'\n            or ( CNSMed.intent = 'plan'\n                and CNSMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and CNSMed.isCommunity ( )\n        and CNSMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period"},{"url":"displaySequence","valueInteger":23}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"SupplementalDataElements"},{"url":"name","valueString":"SDE Race"},{"url":"statement","valueString":"define \"SDE Race\":\n  Patient.race R\n    return Tuple {\n      codes: R.ombCategory union R.detailed,\n      display: R.text\n    }"},{"url":"displaySequence","valueInteger":24}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"SDE Race"},{"url":"statement","valueString":"define \"SDE Race\":\n  SDE.\"SDE Race\""},{"url":"displaySequence","valueInteger":25}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Malignant Bone Disease Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Malignant Bone Disease Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Malignant Bone Disease\" )"},{"url":"displaySequence","valueInteger":26}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"SupplementalDataElements"},{"url":"name","valueString":"SDE Sex"},{"url":"statement","valueString":"define \"SDE Sex\":\n  case\n    when Patient.sex = '248153007' then \"Male (finding)\"\n    when Patient.sex = '248152002' then \"Female (finding)\"\n    else null\n  end"},{"url":"displaySequence","valueInteger":27}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"SDE Sex"},{"url":"statement","valueString":"define \"SDE Sex\":\n  SDE.\"SDE Sex\""},{"url":"displaySequence","valueInteger":28}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Antihypertensive Active at Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Antihypertensive Active at Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    with [\"MedicationRequest\": \"Antihypertensives\"] BPMed\n      such that BPMed.status in { 'active', 'completed' }\n        and ( BPMed.intent = 'order'\n            or ( BPMed.intent = 'plan'\n                and BPMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and BPMed.isCommunity ( )\n        and BPMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period"},{"url":"displaySequence","valueInteger":29}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Opioid Medication Active at Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Opioid Medication Active at Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    with [\"MedicationRequest\": \"Opioids\"] OpioidMed\n      such that OpioidMed.status in { 'active', 'completed' }\n        and ( OpioidMed.intent = 'order'\n            or ( OpioidMed.intent = 'plan'\n                and OpioidMed.subject.reference.getId ( ) = Patient.id\n            )\n        )\n        and OpioidMed.isCommunity ( )\n        and OpioidMed.medicationRequestPeriod ( ) overlaps before InpatientEncounter.period"},{"url":"displaySequence","valueInteger":30}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Encounter With A Fall Diagnosis"},{"url":"statement","valueString":"define \"Encounter With A Fall Diagnosis\":\n  \"Qualifying Encounter\" QualifyingEncounter\n    where QualifyingEncounter.reasonCode in \"Inpatient Falls\"\n      or QualifyingEncounter.encountersDiagnosis ( ).code in \"Inpatient Falls\""},{"url":"displaySequence","valueInteger":31}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Encounter With A Fall Event"},{"url":"statement","valueString":"define \"Encounter With A Fall Event\":\n  \"Qualifying Encounter\" InpatientEncounter\n    with [AdverseEvent: \"Inpatient Falls\"] FallsDocumentation\n      such that Coalesce(FallsDocumentation.date, FallsDocumentation.recordedDate) during InpatientEncounter.hospitalizationWithObservation ( )"},{"url":"displaySequence","valueInteger":32}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Encounter Where A Fall Occurred"},{"url":"statement","valueString":"define \"Encounter Where A Fall Occurred\":\n  \"Encounter With A Fall Diagnosis\"\n    union \"Encounter With A Fall Event\""},{"url":"displaySequence","valueInteger":33}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Encounter With A Fall Not Present On Admission"},{"url":"statement","valueString":"define \"Encounter With A Fall Not Present On Admission\":\n  \"Encounter Where A Fall Occurred\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisNotPresentOnAdmissionOrNull ( \"Inpatient Falls\" )"},{"url":"displaySequence","valueInteger":34}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Encounter Where A Fall And Major Injury Occurred Not POA"},{"url":"statement","valueString":"define \"Encounter Where A Fall And Major Injury Occurred Not POA\":\n  \"Encounter With A Fall Not Present On Admission\" FallOccurred\n    where exists ( ( FallOccurred.claimDiagnosis ( ) ) MajorFallOccurred\n        where MajorFallOccurred.onAdmission is null\n          or MajorFallOccurred.onAdmission in \"Not Present On Admission or Documentation Insufficient to Determine\"\n            and ( MajorFallOccurred.diagnosis in \"Major Injuries\"\n                or MajorFallOccurred.diagnosis.getCondition ( ).code in \"Major Injuries\"\n            )\n    )"},{"url":"displaySequence","valueInteger":35}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Encounter Where A Fall And Moderate Injury Occurred Not POA"},{"url":"statement","valueString":"define \"Encounter Where A Fall And Moderate Injury Occurred Not POA\":\n  \"Encounter With A Fall Not Present On Admission\" FallOccurred\n    where exists ( ( FallOccurred.claimDiagnosis ( ) ) ModerateFallOccurred\n        where ModerateFallOccurred.onAdmission is null\n          or ModerateFallOccurred.onAdmission in \"Not Present On Admission or Documentation Insufficient to Determine\"\n            and ( ModerateFallOccurred.diagnosis in \"Moderate Injuries\"\n                or ModerateFallOccurred.diagnosis.getCondition ( ).code in \"Moderate Injuries\"\n            )\n    )"},{"url":"displaySequence","valueInteger":36}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Numerator"},{"url":"statement","valueString":"define \"Numerator\":\n  \"Encounter Where A Fall And Major Injury Occurred Not POA\"\n    union \"Encounter Where A Fall And Moderate Injury Occurred Not POA\""},{"url":"displaySequence","valueInteger":37}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Denominator"},{"url":"statement","valueString":"define \"Denominator\":\n  \"Initial Population\""},{"url":"displaySequence","valueInteger":38}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Encounter With A Fall Present On Admission"},{"url":"statement","valueString":"define \"Encounter With A Fall Present On Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Inpatient Falls\" )"},{"url":"displaySequence","valueInteger":39}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Numerator Exclusions"},{"url":"statement","valueString":"define \"Numerator Exclusions\":\n  \"Encounter With A Fall Present On Admission\""},{"url":"displaySequence","valueInteger":40}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"SupplementalDataElements"},{"url":"name","valueString":"SDE Ethnicity"},{"url":"statement","valueString":"define \"SDE Ethnicity\":\n  Patient.ethnicity E\n    return Tuple {\n      codes: { E.ombCategory } union E.detailed,\n      display: E.text\n    }"},{"url":"displaySequence","valueInteger":41}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"SDE Ethnicity"},{"url":"statement","valueString":"define \"SDE Ethnicity\":\n  SDE.\"SDE Ethnicity\""},{"url":"displaySequence","valueInteger":42}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Denominator Exclusions"},{"url":"statement","valueString":"define \"Denominator Exclusions\":\n  \"Encounter With A Fall Present On Admission\""},{"url":"displaySequence","valueInteger":43}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Risk Variable Encounter with Stroke Present on Admission"},{"url":"statement","valueString":"define \"Risk Variable Encounter with Stroke Present on Admission\":\n  \"Qualifying Encounter\" InpatientEncounter\n    where InpatientEncounter.hasDiagnosisPresentOnAdmission ( \"Stroke\" )"},{"url":"displaySequence","valueInteger":44}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToInterval"},{"url":"statement","valueString":"/*\n@description: Converts the given [Period](https://hl7.org/fhir/datatypes.html#Period)\nvalue to a CQL DateTime Interval\n@comment: If the start value of the given period is unspecified, the starting\nboundary of the resulting interval will be open (meaning the start of the interval\nis unknown, as opposed to interpreted as the beginning of time).\n*/\ndefine function ToInterval(period FHIR.Period):\n    if period is null then\n        null\n    else\n        if period.\"start\" is null then\n            Interval(period.\"start\".value, period.\"end\".value]\n        else\n            Interval[period.\"start\".value, period.\"end\".value]"},{"url":"displaySequence","valueInteger":45}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CQMCommon"},{"url":"name","valueString":"lengthInDays"},{"url":"statement","valueString":"/*\n@description: Calculates the difference in calendar days between the start and end of the given interval.\n*/\ndefine fluent function lengthInDays(Value Interval<DateTime> ):\n  difference in days between start of Value and end of Value"},{"url":"displaySequence","valueInteger":46}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CQMCommon"},{"url":"name","valueString":"hospitalizationWithObservation"},{"url":"statement","valueString":"/*\n@description: Hospitalization with Observation returns the total interval from the start of any immediately prior emergency department visit through the observation visit to the discharge of the given encounter\n*/\ndefine fluent function hospitalizationWithObservation(TheEncounter Encounter ):\n  TheEncounter Visit\n  \t\tlet ObsVisit: Last([Encounter: \"Observation Services\"] LastObs\n  \t\t\t\twhere LastObs.status = 'finished'\n            and LastObs.period ends 1 hour or less on or before start of Visit.period\n  \t\t\t\tsort by end of period\n  \t\t\t),\n  \t\t\tVisitStart: Coalesce(start of ObsVisit.period, start of Visit.period),\n  \t\t\tEDVisit: Last([Encounter: \"Emergency Department Visit\"] LastED\n  \t\t\t\twhere LastED.status = 'finished'\n            and LastED.period ends 1 hour or less on or before VisitStart\n  \t\t\t\tsort by end of period\n  \t\t\t)\n  \t\treturn Interval[Coalesce(start of EDVisit.period, VisitStart), end of Visit.period]"},{"url":"displaySequence","valueInteger":47}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"hasDiagnosisPresentOnAdmission"},{"url":"statement","valueString":"define fluent function hasDiagnosisPresentOnAdmission(encounter Encounter, diagnosisValueSet ValueSet):\n  exists ( encounter InptEncounter\n      let claim: ( [Claim] Claims\n          where Claims.status = 'active'\n            and Claims.use = 'claim'\n            and exists ( Claims.item ClaimsItem\n                where ClaimsItem.encounter.references ( InptEncounter )\n            )\n      ),\n      claimItem: ( claim.item ClaimsItem\n          where ClaimsItem.encounter.references ( InptEncounter )\n      )\n      return claim.diagnosis ClaimsDiag\n        where ClaimsDiag.sequence in claimItem.diagnosisSequence\n          and ClaimsDiag.onAdmission in \"Present on Admission or Clinically Undetermined\"\n          and ClaimsDiag.diagnosis in diagnosisValueSet\n  )"},{"url":"displaySequence","valueInteger":48}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"references"},{"url":"statement","valueString":"/*\n@description: Returns true if any of the given references are to the given resource\n@comment: Returns true if the `id` element of the given resource exactly equals the tail of any of the given references.\nNOTE: This function assumes resources from the same source server.\n*/\ndefine fluent function references(references List<Reference>, resource Resource):\n  exists (references R where R.references(resource))"},{"url":"displaySequence","valueInteger":49}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"references"},{"url":"statement","valueString":"/*\n@description: Returns true if the given reference is to the given resource\n@comment: Returns true if the `id` element of the given resource exactly equals the tail of the given reference.\nNOTE: This function assumes resources from the same source server.\n*/\ndefine fluent function references(reference Reference, resource Resource):\n  resource.id = Last(Split(reference.reference, '/'))"},{"url":"displaySequence","valueInteger":50}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"getId"},{"url":"statement","valueString":"/*\n@description: Returns the tail of the given uri (i.e. everything after the last slash in the URI).\n@comment: This function can be used to determine the logical id of a given resource. It can be used in\na single-server environment to trace references. However, this function does not attempt to resolve\nor distinguish the base of the given url, and so cannot be used safely in multi-server environments.\n*/\ndefine fluent function getId(uri String):\n  Last(Split(uri, '/'))"},{"url":"displaySequence","valueInteger":51}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"isCommunity"},{"url":"statement","valueString":"/*\n@description: Returns true if the given MedicationRequest has a category of Community\n*/\ndefine fluent function isCommunity(medicationRequest Choice<MedicationRequest, MedicationNotRequested>):\n  exists (medicationRequest.category C\n    where C ~ Community\n  )"},{"url":"displaySequence","valueInteger":52}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToConcept"},{"url":"statement","valueString":"/*\n@description: Converts the given FHIR [CodeableConcept](https://hl7.org/fhir/datatypes.html#CodeableConcept) value to a CQL Concept.\n*/\ndefine function ToConcept(concept FHIR.CodeableConcept):\n    if concept is null then\n        null\n    else\n        System.Concept {\n            codes: concept.coding C return ToCode(C),\n            display: concept.text.value\n        }"},{"url":"displaySequence","valueInteger":53}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToCode"},{"url":"statement","valueString":"/*\n@description: Converts the given FHIR [Coding](https://hl7.org/fhir/datatypes.html#Coding) value to a CQL Code.\n*/\ndefine function ToCode(coding FHIR.Coding):\n    if coding is null then\n        null\n    else\n        System.Code {\n          code: coding.code.value,\n          system: coding.system.value,\n          version: coding.version.value,\n          display: coding.display.value\n        }"},{"url":"displaySequence","valueInteger":54}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CumulativeMedicationDuration"},{"url":"name","valueString":"medicationRequestPeriod"},{"url":"statement","valueString":"define fluent function medicationRequestPeriod(Request \"MedicationRequest\"):\n  Request R\n    let\n      dosage: singleton from R.dosageInstruction,\n      doseAndRate: singleton from dosage.doseAndRate,\n      timing: dosage.timing,\n      frequency: Coalesce(timing.repeat.frequencyMax, timing.repeat.frequency),\n      period: Quantity(timing.repeat.period, timing.repeat.periodUnit),\n      doseRange: doseAndRate.dose,\n      doseQuantity: doseAndRate.dose,\n      dose: Coalesce(end of doseRange, doseQuantity),\n      dosesPerDay: Coalesce(ToDaily(frequency, period), Count(timing.repeat.timeOfDay), 1.0),\n      boundsPeriod: timing.repeat.bounds as Interval<DateTime>,\n      daysSupply: (convert R.dispenseRequest.expectedSupplyDuration to days).value,\n      quantity: R.dispenseRequest.quantity,\n      refills: Coalesce(R.dispenseRequest.numberOfRepeatsAllowed, 0),\n      startDate:\n        Coalesce(\n          date from start of boundsPeriod,\n          date from R.authoredOn,\n          date from start of R.dispenseRequest.validityPeriod\n        ),\n      totalDaysSupplied: Coalesce(daysSupply, quantity.value / (dose.value * dosesPerDay)) * (1 + refills)\n    return\n      if startDate is not null and totalDaysSupplied is not null then\n        Interval[startDate, startDate + Quantity(totalDaysSupplied - 1, 'day') ]\n      else if startDate is not null and boundsPeriod.\"high\" is not null then\n        Interval[startDate, date from end of boundsPeriod]\n      else\n        null"},{"url":"displaySequence","valueInteger":55}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CumulativeMedicationDuration"},{"url":"name","valueString":"Quantity"},{"url":"statement","valueString":"/**********************************************************************/\n/* Functions in this region are copied from opioid-mme-r4             */\n/**********************************************************************/\n\ndefine function Quantity(value Decimal, unit String):\n  if value is not null then\n    System.Quantity { value: value, unit: unit }\n  else\n    null"},{"url":"displaySequence","valueInteger":56}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CumulativeMedicationDuration"},{"url":"name","valueString":"ToDaily"},{"url":"statement","valueString":"/*\n Goal is to get to number of days\n Two broad approaches to the calculation:\n  1) Based on supply and frequency, calculate the number of expected days the medication will cover/has covered\n  2) Based on relevant period, determine a covered interval and calculate the length of that interval in days\nThis topic covers several use cases and illustrates how to calculate Cumulative\nMedication Duration for each type of medication resource using the supply and\nfrequency approach.\n*/\n\n/*\n  For the first approach, we need to get from frequency to a frequency/day\n  So we define ToDaily\n*/\n\n/*\n  Calculates daily frequency given frequency within a period\n*/\ndefine function ToDaily(frequency System.Integer, period System.Quantity):\n  case period.unit\n    when 'h' then frequency * (24.0 / period.value)\n    when 'min' then frequency * (24.0 / period.value) * 60\n    when 's' then frequency * (24.0 / period.value) * 60 * 60\n    when 'd' then frequency * (24.0 / period.value) / 24\n    when 'wk' then frequency * (24.0 / period.value) / (24 * 7)\n    when 'mo' then frequency * (24.0 / period.value) / (24 * 30) /* assuming 30 days in month */\n    when 'a' then frequency * (24.0 / period.value) / (24 * 365) /* assuming 365 days in year */\n    when 'hour' then frequency * (24.0 / period.value)\n    when 'minute' then frequency * (24.0 / period.value) * 60\n    when 'second' then frequency * (24.0 / period.value) * 60 * 60\n    when 'day' then frequency * (24.0 / period.value) / 24\n    when 'week' then frequency * (24.0 / period.value) / (24 * 7)\n    when 'month' then frequency * (24.0 / period.value) / (24 * 30) /* assuming 30 days in month */\n    when 'year' then frequency * (24.0 / period.value) / (24 * 365) /* assuming 365 days in year */\n    when 'hours' then frequency * (24.0 / period.value)\n    when 'minutes' then frequency * (24.0 / period.value) * 60\n    when 'seconds' then frequency * (24.0 / period.value) * 60 * 60\n    when 'days' then frequency * (24.0 / period.value) / 24\n    when 'weeks' then frequency * (24.0 / period.value) / (24 * 7)\n    when 'months' then frequency * (24.0 / period.value) / (24 * 30) /* assuming 30 days in month */\n    when 'years' then frequency * (24.0 / period.value) / (24 * 365) /* assuming 365 days in year */\n    else Message(null, true, 'CMDLogic.ToDaily.UnknownUnit', ErrorLevel, 'Unknown unit ' & period.unit)\n  end"},{"url":"displaySequence","valueInteger":57}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"encountersDiagnosis"},{"url":"statement","valueString":"define fluent function encountersDiagnosis(Encounter Encounter):\n  // There is a problem in the CQMCommon fluent function 'encounterDiagnosis' wherein the union operation isn't working as used.\n  // This function fixes that usage, but should be considered temporary until the library function works properly   \n  \n  \n  Encounter.reasonReference EncDiag\n    return singleton from ( ( [ConditionEncounterDiagnosis] ConditionED\n        union [ConditionProblemsHealthConcerns] ConditionPHC ) Cond\n        where EncDiag.references ( Cond.id )\n    )"},{"url":"displaySequence","valueInteger":58}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"references"},{"url":"statement","valueString":"/*\n@description: Returns true if the given reference is to the given resourceId\n@comment: Returns true if the `resourceId` parameter exactly equals the tail of the given reference.\nNOTE: This function assumes resources from the same source server.\n*/\ndefine fluent function references(reference Reference, resourceId String):\n  resourceId = Last(Split(reference.reference, '/'))"},{"url":"displaySequence","valueInteger":59}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Denominator Observation"},{"url":"statement","valueString":"define function \"Denominator Observation\"(QualifyingEncounter Encounter):\n  duration in days of QualifyingEncounter.hospitalizationWithObservation ( )"},{"url":"displaySequence","valueInteger":60}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToString"},{"url":"statement","valueString":"define function ToString(value uri): value.value"},{"url":"displaySequence","valueInteger":61}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"hasDiagnosisNotPresentOnAdmissionOrNull"},{"url":"statement","valueString":"define fluent function hasDiagnosisNotPresentOnAdmissionOrNull(encounter Encounter, diagnosisValueSet ValueSet):\n  exists ( encounter InptEncounter\n      let claim: ( [Claim] Claims\n          where Claims.status = 'active'\n            and Claims.use = 'claim'\n            and exists ( Claims.item ClaimsItem\n                where ClaimsItem.encounter.references ( InptEncounter )\n            )\n      ),\n      claimItem: ( claim.item ClaimsItem\n          where ClaimsItem.encounter.references ( InptEncounter )\n      )\n      return claim.diagnosis ClaimsDiag\n        where ClaimsDiag.sequence in claimItem.diagnosisSequence\n          and ClaimsDiag.onAdmission is null\n          or ClaimsDiag.onAdmission in \"Not Present On Admission or Documentation Insufficient to Determine\"\n            and ClaimsDiag.diagnosis in diagnosisValueSet\n  )"},{"url":"displaySequence","valueInteger":62}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CQMCommon"},{"url":"name","valueString":"claimDiagnosis"},{"url":"statement","valueString":"/*\n@description: Returns the claim diagnosis elements for the given encounter\n@comment: See the QICore 6 Authoring Patterns discussion on [Principal Diagnosis and Present on Admission](https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/wiki/Authoring-Patterns-QICore-v6.0.0#conditions-present-on-admission-and-principal-diagnoses) for more information\n*/\ndefine fluent function claimDiagnosis(encounter Encounter):\n  encounter E\n    let \n      claim: ([Claim] C where C.status = 'active' and C.use = 'claim' and exists (C.item I where I.encounter.references(E))),\n      claimItem: (claim.item I where I.encounter.references(E))\n    return claim.diagnosis D where D.sequence in claimItem.diagnosisSequence"},{"url":"displaySequence","valueInteger":63}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CQMCommon"},{"url":"name","valueString":"getCondition"},{"url":"statement","valueString":"/*\n@description: Returns the Condition resource for the given reference\n*/\ndefine fluent function getCondition(reference Reference):\n  singleton from (([ConditionEncounterDiagnosis] union [ConditionProblemsHealthConcerns]) C where reference.references(C.id))"},{"url":"displaySequence","valueInteger":64}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMS1017FHIRHHFI"},{"url":"name","valueString":"Numerator Observation"},{"url":"statement","valueString":"define function \"Numerator Observation\"(QualifyingEncounter Encounter):\n  Count(\"Numerator\" FallsEncounter\n      where FallsEncounter.period ends during QualifyingEncounter.hospitalizationWithObservation()\n  )"},{"url":"displaySequence","valueInteger":65}]}],"name":"EffectiveDataRequirements","status":"active","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/library-type","code":"module-definition"}]},"relatedArtifact":[{"type":"depends-on","display":"Library CQMCommon","resource":"https://madie.cms.gov/Library/CQMCommon|4.1.000"},{"type":"depends-on","display":"Library FHIRHelpers","resource":"https://madie.cms.gov/Library/FHIRHelpers|4.4.000"},{"type":"depends-on","display":"Library QICoreCommon","resource":"https://madie.cms.gov/Library/QICoreCommon|4.0.000"},{"type":"depends-on","display":"Library CMD","resource":"https://madie.cms.gov/Library/CumulativeMedicationDuration|6.0.000"},{"type":"depends-on","display":"Library SDE","resource":"https://madie.cms.gov/Library/SupplementalDataElements|5.1.000"},{"type":"depends-on","display":"Code system MedicationRequestCategory","resource":"http://terminology.hl7.org/CodeSystem/medicationrequest-category"},{"type":"depends-on","display":"Code system SNOMEDCT","resource":"http://snomed.info/sct"},{"type":"depends-on","display":"Value set Encounter Inpatient","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"},{"type":"depends-on","display":"Value set Observation Services","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.143"},{"type":"depends-on","display":"Value set Emergency Department Visit","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292"},{"type":"depends-on","display":"Value set Present on Admission or Clinically Undetermined","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.197"},{"type":"depends-on","display":"Value set Osteoporosis","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1200.147"},{"type":"depends-on","display":"Value set Coagulation Disorders","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.23"},{"type":"depends-on","display":"Value set Antidepressants","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.163"},{"type":"depends-on","display":"Value set Not Present On Admission or Documentation Insufficient to Determine","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.198"},{"type":"depends-on","display":"Value set Leukemia or Lymphoma","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.136"},{"type":"depends-on","display":"Value set Obesity","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.162"},{"type":"depends-on","display":"Value set Peripheral Neuropathy","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.175"},{"type":"depends-on","display":"Value set Delirium, Dementia, and Other Psychoses","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.168"},{"type":"depends-on","display":"Value set Suicide Attempt","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.130"},{"type":"depends-on","display":"Value set Payer Type","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591"},{"type":"depends-on","display":"Value set Liver Disease Moderate to Severe","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.137"},{"type":"depends-on","display":"Value set Anticoagulants for All Indications","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22"},{"type":"depends-on","display":"Value set Neurologic Movement and Related Disorders","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.174"},{"type":"depends-on","display":"Value set Abnormal Weight Loss","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1258.2"},{"type":"depends-on","display":"Value set Malnutrition","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1272.1"},{"type":"depends-on","display":"Value set Depression","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.169"},{"type":"depends-on","display":"Value set Epilepsy","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.171"},{"type":"depends-on","display":"Value set Diuretics","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.170"},{"type":"depends-on","display":"Value set Central Nervous System Depressants","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.134"},{"type":"depends-on","display":"Value set Malignant Bone Disease","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.24"},{"type":"depends-on","display":"Value set Antihypertensives","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.164"},{"type":"depends-on","display":"Value set Opioids","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.120"},{"type":"depends-on","display":"Value set Inpatient Falls","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.171"},{"type":"depends-on","display":"Value set Major Injuries","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.120"},{"type":"depends-on","display":"Value set Moderate Injuries","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.205"},{"type":"depends-on","display":"Value set Stroke","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.176"}],"parameter":[{"name":"Measurement Period","use":"in","min":0,"max":"1","type":"Period"},{"name":"ErrorLevel","use":"in","min":0,"max":"1","type":"string"},{"name":"Initial Population","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Numerator","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Denominator","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Numerator Exclusions","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Denominator Exclusions","use":"out","min":0,"max":"*","type":"Resource"},{"name":"SDE Payer","use":"out","min":0,"max":"*","type":"Resource"},{"name":"SDE Race","use":"out","min":0,"max":"1","type":"Resource"},{"name":"SDE Sex","use":"out","min":0,"max":"1","type":"Coding"},{"name":"SDE Ethnicity","use":"out","min":0,"max":"1","type":"Resource"},{"name":"Risk Variable Encounter with Osteoporosis Present on Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Coagulation Disorder Present on Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Antidepressant Active at Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable All Encounter Diagnoses with Rank and POA Indication","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Leukemia or Lymphoma Present on Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Obesity Present on Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Peripheral Neuropathy Present on Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Delirium or Dementia or Other Psychosis Present on Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Suicide Attempt","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Liver Disease Moderate to Severe Present on Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Anticoagulant Administration During Encounter","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Neurologic Disorder Present on Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Abnormal Weight Loss or Malnutrition Present on Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Anticoagulant Active at Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Body Mass Index (BMI)","use":"out","min":0,"max":"*","type":"Quantity"},{"name":"Risk Variable Encounter with Depression Present on Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Epilepsy Present on Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Diuretic Active at Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with CNS Depressant Active at Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Malignant Bone Disease Present on Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Antihypertensive Active at Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Opioid Medication Active at Admission","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Risk Variable Encounter with Stroke Present on Admission","use":"out","min":0,"max":"*","type":"Resource"}],"dataRequirement":[{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","status","status.value","period"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.143"}]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","status","status.value","period"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292"}]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","status","status.value","period","id","id.value","reasonCode"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"}]},{"type":"Patient","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient"],"mustSupport":["id","id.value","url","extension"]},{"type":"Resource","profile":["http://hl7.org/fhir/StructureDefinition/Resource"],"mustSupport":["id","id.value"]},{"type":"Claim","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-claim"],"mustSupport":["status","status.value","use","use.value","item"]},{"type":"MedicationRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"],"mustSupport":["medication","dosageInstruction","dispenseRequest","dispenseRequest.expectedSupplyDuration","dispenseRequest.quantity","dispenseRequest.numberOfRepeatsAllowed","dispenseRequest.numberOfRepeatsAllowed.value","authoredOn","authoredOn.value","dispenseRequest.validityPeriod","status","status.value","intent","intent.value","subject","subject.reference","subject.reference.value"],"codeFilter":[{"path":"medication","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.163"}]},{"type":"MedicationRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"],"mustSupport":["medication","dosageInstruction","dispenseRequest","dispenseRequest.expectedSupplyDuration","dispenseRequest.quantity","dispenseRequest.numberOfRepeatsAllowed","dispenseRequest.numberOfRepeatsAllowed.value","authoredOn","authoredOn.value","dispenseRequest.validityPeriod","status","status.value","intent","intent.value","subject","subject.reference","subject.reference.value"],"codeFilter":[{"path":"medication","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22"}]},{"type":"MedicationRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"],"mustSupport":["medication","dosageInstruction","dispenseRequest","dispenseRequest.expectedSupplyDuration","dispenseRequest.quantity","dispenseRequest.numberOfRepeatsAllowed","dispenseRequest.numberOfRepeatsAllowed.value","authoredOn","authoredOn.value","dispenseRequest.validityPeriod","status","status.value","intent","intent.value","subject","subject.reference","subject.reference.value"],"codeFilter":[{"path":"medication","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.170"}]},{"type":"MedicationRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"],"mustSupport":["medication","dosageInstruction","dispenseRequest","dispenseRequest.expectedSupplyDuration","dispenseRequest.quantity","dispenseRequest.numberOfRepeatsAllowed","dispenseRequest.numberOfRepeatsAllowed.value","authoredOn","authoredOn.value","dispenseRequest.validityPeriod","status","status.value","intent","intent.value","subject","subject.reference","subject.reference.value"],"codeFilter":[{"path":"medication","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.134"}]},{"type":"MedicationRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"],"mustSupport":["medication","dosageInstruction","dispenseRequest","dispenseRequest.expectedSupplyDuration","dispenseRequest.quantity","dispenseRequest.numberOfRepeatsAllowed","dispenseRequest.numberOfRepeatsAllowed.value","authoredOn","authoredOn.value","dispenseRequest.validityPeriod","status","status.value","intent","intent.value","subject","subject.reference","subject.reference.value"],"codeFilter":[{"path":"medication","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.164"}]},{"type":"MedicationRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"],"mustSupport":["medication","dosageInstruction","dispenseRequest","dispenseRequest.expectedSupplyDuration","dispenseRequest.quantity","dispenseRequest.numberOfRepeatsAllowed","dispenseRequest.numberOfRepeatsAllowed.value","authoredOn","authoredOn.value","dispenseRequest.validityPeriod","status","status.value","intent","intent.value","subject","subject.reference","subject.reference.value"],"codeFilter":[{"path":"medication","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.120"}]},{"type":"MedicationRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"],"mustSupport":["medication.reference.value","dosageInstruction","dispenseRequest","dispenseRequest.expectedSupplyDuration","dispenseRequest.quantity","dispenseRequest.numberOfRepeatsAllowed","dispenseRequest.numberOfRepeatsAllowed.value","authoredOn","authoredOn.value","dispenseRequest.validityPeriod","status","status.value","intent","intent.value","subject","subject.reference","subject.reference.value"]},{"type":"Medication","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication"],"mustSupport":["id.value","code"]},{"type":"Condition","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-encounter-diagnosis"]},{"type":"Condition","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-problems-health-concerns"]},{"type":"Coverage","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-coverage"],"mustSupport":["type","period"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591"}]},{"type":"MedicationAdministration","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationadministration"],"mustSupport":["medication","effective","status","status.value"],"codeFilter":[{"path":"medication","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.22"}]},{"type":"MedicationAdministration","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationadministration"],"mustSupport":["medication.reference.value","effective","status","status.value"]},{"type":"Observation","profile":["http://hl7.org/fhir/us/core/StructureDefinition/us-core-bmi"],"mustSupport":["effective","value","status","status.value"]},{"type":"AdverseEvent","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-adverseevent"],"mustSupport":["event","date","date.value","recordedDate","recordedDate.value"],"codeFilter":[{"path":"event","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1147.171"}]}]}],"extension":[{"id":"supplementalDataGuidance","url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-supplementalDataGuidance","extension":[{"url":"guidance","valueString":"For every patient evaluated by this measure also identify payer, race, ethnicity and sex"},{"url":"usage","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data","display":"Supplemental Data"}],"text":"Supplemental Data Guidance"}}]},{"id":"riskAdjustmentVariableGuidance","url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-supplementalDataGuidance","extension":[{"url":"guidance","valueString":"Variables being collected for the development of baseline risk adjustment model include encounters with: \n\nMedications active on admission such as: \n - anticoagulants\n - antidepressants\n - antihypertensives\n - central nervous system depressant medications\n - diuretics\n - opioids\n\nMedications administered during the hospitalization, such as anticoagulants\n\nDiagnoses present on admission which may increase the risk for a fall with injury, such as:\n - abnormal weight loss or malnutrition\n - coagulation disorders\n - delirium, dementia, or other psychosis\n - depression\n - epilepsy\n - leukemia or lymphoma\n - liver disease (moderate to severe)\n - malignant bone disease\n - neurologic movement and related disorders\n - obesity\n - osteoporosis\n - peripheral neuropathy\n - stroke\n - suicide attempt\n\nPhysical traits, such as body mass index (BMI)\n \nAll encounter diagnoses along with their rank (e.g., 1 = principal, 2 = secondary) and present on admission (POA) indicators are being collected for the development of baseline risk adjustment model."},{"url":"usage","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor","display":"Risk Adjustment Factor"}],"text":"Risk Adjustment Variable Guidance"}}]},{"url":"http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-effectiveDataRequirements","valueReference":{"reference":"#effective-data-requirements"}}],"url":"https://madie.cms.gov/Measure/CMS1017FHIRHHFI","identifier":[{"use":"usual","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"short-name","display":"Short Name"}]},"system":"https://madie.cms.gov/measure/shortName","value":"CMS1017FHIR"},{"use":"official","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"version-independent","display":"Version Independent"}]},"system":"urn:ietf:rfc:3986","value":"urn:uuid:6425d5e9-a54b-40e0-a07d-e6e17137871c"},{"use":"official","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"version-specific","display":"Version Specific"}]},"system":"urn:ietf:rfc:3986","value":"urn:uuid:b73e62a3-0cfc-450e-afff-c06e0e255672"},{"use":"official","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"endorser","display":"Endorser"}]},"system":"https://madie.cms.gov/measure/cbeId","value":"4120e","assigner":{"display":"CMS Consensus Based Entity"}},{"use":"official","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"publisher","display":"Publisher"}]},"system":"https://madie.cms.gov/measure/cmsId","value":"1017FHIR","assigner":{"display":"CMS"}}],"version":"0.2.000","name":"CMS1017FHIRHHFI","title":"Hospital Harm – Falls with InjuryFHIR","status":"active","experimental":false,"date":"2025-07-07T18:39:11+00:00","publisher":"Centers for Medicare & Medicaid Services (CMS)","contact":[{"telecom":[{"system":"url","value":"https://www.cms.gov/"}]}],"description":"This ratio measure assesses the number of inpatient hospitalizations where at least one fall with a major or moderate injury occurs among the total qualifying inpatient hospital days for patients aged 18 years and older","usage":"Hospital days are measured in 24-hour periods starting from the time of arrival at the hospital (including time in the Emergency Department and or Observation).  The number of days will be counted as whole numbers; any fractional periods are dropped. For example, an eligible encounter with a length of stay of 75 hours will be measured as 3 days (72 hours).\n\nThis measure includes two measure observations used to calculate the ratio of the number of encounters with a fall over the total number of eligible hospital days. The ratio is reported as the rate of inpatient hospitalizations with falls with moderate or major injury per 1000 patient days. \n\nTo express the rate of inpatient hospitalizations with falls with moderate or major injury per 1,000 patient days, the following calculation is applied post-production during implementation: (Total number of encounters with falls with moderate or major injury / Total number of eligible hospital days) x 1000 = rate.\nExample: 1 eligible encounter with a patient fall with moderate or major injury over 120 eligible days (1/120) x 1000 = 8.33.\n\nIn ratio measures, both the Denominator and Numerator populations flow separately from the same Initial Population. Therefore, the same exclusion criteria must be applied to both the Denominator and Numerator to prevent excluded cases from being considered.\n\nThis dQM is an episode-based measure. An episode is defined as each inpatient hospitalization or encounter that ends during the measurement period.\n\nThis FHIR-based measure has been derived from the QDM-based measure: CMS1017v2. Please refer to the HL7 QI-Core Implementation Guide (https://hl7.org/fhir/us/qicore/STU6/) for more information on QI-Core and mapping recommendations from QDM to QI-Core STU 6 (https://hl7.org/fhir/us/qicore/STU6/qdm-to-qicore.html).","copyright":"Limited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. Mathematica disclaims all liability for use or accuracy of any third-party codes contained in the specifications. \n\nLOINC(R) copyright 2004-2024 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2024 International Health Terminology Standards Development Organisation. ICD-10 copyright 2024 World Health Organization. All Rights Reserved.","effectivePeriod":{"start":"2026-01-01","end":"2026-12-31"},"author":[{"name":"Mathematica","telecom":[{"system":"url","value":"https://www.mathematica.org/"}]}],"relatedArtifact":[{"type":"citation","citation":"CITATION - Mintz, J., Duprey, M. S., Zullo, A. R., Lee, Y., Kiel, D. P., Daiello, L. A., Rodriguez, K. E., Venkatesh, A. K., & Berry, S. D. (2022). Identification of Fall-Related Injuries in Nursing Home Residents Using Administrative Claims Data. The journals of gerontology. Series A, Biological sciences and medical sciences, 77(7), 1421–1429. https://doi.org/10.1093/gerona/glab274\n"},{"type":"citation","citation":"CITATION - Mohanty, S., Rosenthal, R.A., Russell, M.M., Neuman, M.D., Ko, C.Y., & Esnaola, N.F. (2016). Optimal Perioperative Management of the Geriatric Patient: Best Practices Guideline from ACS NSQIP/AGS. Journal of the American College of Surgeons 222(5), 930-947. doi: 10.1016/j.jamcollsurg.2015.12.026\n"},{"type":"citation","citation":"CITATION - Montero-Odasso, M., van der Velde, N., Martin, F. C., Petrovic, M., Tan, M. P., Ryg, J., Aguilar-Navarro, S., Alexander, N. B., Becker, C., Blain, H., Bourke, R., Cameron, I. D., Camicioli, R., Clemson, L., Close, J., Delbaere, K., Duan, L., Duque, G., Dyer, S. M., … Rixt Zijlstra, G. A. (2022). World guidelines for falls prevention and management for older adults: a global initiative. Age and Ageing, 51(9), 1–36. https://doi.org/10.1093/ageing/afac205\n"},{"type":"citation","citation":"CITATION - National Quality Forum. Serious Reportable Events. http://www.qualityforum.org/topics/sres/serious_reportable_events.aspx. Accessed July 24, 2019\n"},{"type":"citation","citation":"CITATION - Network of Patient Safety Databases Chartbook, 2022. Rockville, MD: Agency for Healthcare Research and Quality; September 2022. AHRQ Pub. No. 22-0051\n"},{"type":"citation","citation":"CITATION - NICE. (2013). Falls in older people: assessing risk and prevention. London, UK\n"},{"type":"citation","citation":"CITATION - Press Ganey Guidelines for Data Collection and Submission Patient Falls Indicator, January 2020\n"},{"type":"citation","citation":"CITATION - RNAO. (2017). Preventing falls and reducing injury from falls (4th edition). Toronto, ON\n"},{"type":"citation","citation":"CITATION - Schoberer, D., Breimaier, H. E., Zuschnegg, J., Findling, T., Schaffer, S., & Archan, T. (2022). Fall prevention in hospitals and nursing homes: Clinical practice guideline. Worldviews on Evidence-Based Nursing, Vol. 19. https://doi.org/10.1111/wvn.12571\n"},{"type":"citation","citation":"CITATION - WHO. (2009). Conceptual Framework for the International Classification for Patient Safety, Version 1.1. https://apps.who.int/iris/bitstream/handle/10665/70882/WHO_IER_PSP_2010.2_eng.pdf\n"}],"library":["https://madie.cms.gov/Library/CMS1017FHIRHHFI"],"disclaimer":"This performance measure is not a clinical guideline, does not establish a standard of medical care, and has not been tested for all potential applications. \n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND. \n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","rationale":"Inpatient falls are among the most common incidents reported in hospitals and can increase length of stay and patient costs. Due to the potential for serious harm associated with patient falls, “patient death or serious injury associated with a fall while being cared for in a health care setting” is considered a Serious Reportable Event by the National Quality Forum (NQF, 2019).\n\nFalls (including unplanned or unintended descents to the floor) can result in patient injury ranging from minor abrasion or bruising to death as a result of injuries sustained from a fall. While major injuries (e.g., fractures, closed head injuries, internal bleeding) (Mintz et al., 2022) have the biggest impact on patient outcomes, 2008-2021 data findings from the 2022 Network of Patient Safety Databases (NPSD) demonstrated that 41.8 % of falls resulted in moderate injuries such as skin tear, avulsion, hematoma, significant bruising, dislocations and lacerations requiring suturing (AHRQ, 2022). Moderate injury is, as defined by the National Database of Nursing Quality Indicators (NDNQI), that resulted in suturing, application of steri-strips or skin glue, splinting, or muscle/joint strain (NDNQI, 2020). NPSD findings also demonstrated that mild to moderate level of harm represent 24.2.%, 0.4% - severe harm, and 0.1% - death (AHRQ, 2022; WHO, 2009). \n\nBy focusing on falls with major and moderate injuries, the goal of this hospital harm dQM is to raise awareness of fall rates and, ultimately, to improve patient safety by preventing falls with injury in all hospital patients. The purpose of measuring the rate of falls with major and moderate injury events is to improve hospitals’ practices for monitoring patients at high risk for falls with injury and, in so doing, to reduce the frequency of patient falls with injury.","clinicalRecommendationStatement":"Certain protocols and prevention measures to reduce patient falls with injury include using fall risk assessment tools to gauge individual patient risk, implementing fall prevention protocols directed at individual patient risk factors, and implementing environmental rounds to assess and correct environmental fall hazards. Recommended clinical guidelines and practices to reduce falls and injuries from falls in hospitals support many prevention activities including implementing multifactorial interventions and tailoring interventions to individual patient's conditions and needs. The intent and desired outcome for this dQM is to work with existing and recommended falls prevention processes to track falls with injury, and aim to reduce rates of inpatient falls resulting in major injury.\n\nRecommended falls prevention guidelines are:\n\n- Optimal Perioperative Management of the Geriatric Patient: Best Practices Guideline (ACS NSQIP/AGS, 2016)\n- Falls in older people: assessing risk and prevention (NICE, 2013)\n- Preventing falls and reducing injury from falls (4th edition) (RNAO, 2017)\n- Fall prevention in hospitals and nursing homes: Clinical practice guideline (Schoberer et al., 2022)\n- World guidelines for falls prevention and management for older adults: a global initiative, (Montero-Odasso et al., 2022)","group":[{"id":"Group_1","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-scoring","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-scoring","code":"ratio","display":"Ratio"}]}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-populationBasis","valueCode":"Encounter"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-type","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-type","code":"outcome","display":"Outcome"}]}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-rateAggregation","valueCode":"None"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-improvementNotation","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-improvement-notation","code":"decrease","display":"decrease"}]}}],"population":[{"id":"InitialPopulation_1","code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"initial-population","display":"Initial Population"}]},"description":"Inpatient hospitalizations for patients aged 18 years and older with a length of stay less than or equal to 120 days that ends during the measurement period","criteria":{"language":"text/cql-identifier","expression":"Initial Population"}},{"id":"Denominator_1","code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"denominator","display":"Denominator"}]},"description":"Equals Initial Population","criteria":{"language":"text/cql-identifier","expression":"Denominator"}},{"id":"DenominatorExclusion_1","code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"denominator-exclusion","display":"Denominator Exclusion"}]},"description":"Inpatient hospitalizations where the patient has a fall diagnosis present on admission.","criteria":{"language":"text/cql-identifier","expression":"Denominator Exclusions"}},{"id":"Numerator_1","code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"numerator","display":"Numerator"}]},"description":"Inpatient hospitalizations where the patient has a fall that results in a major or moderate injury during the encounter. \n\nThe diagnosis of a major or moderate injury must not be present on admission. ","criteria":{"language":"text/cql-identifier","expression":"Numerator"}},{"id":"NumeratorExclusion_1","code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"numerator-exclusion","display":"Numerator Exclusion"}]},"description":"Inpatient hospitalizations where the patient has a fall diagnosis present on admission","criteria":{"language":"text/cql-identifier","expression":"Numerator Exclusions"}},{"id":"MeasureObservation_1_1","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-aggregateMethod","valueString":"Sum"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-criteriaReference","valueString":"Denominator_1"}],"code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"measure-observation","display":"Measure Observation"}]},"description":"Denominator Observation, associated with the Denominator: The total number of eligible days across all encounters which match the initial population/denominator criteria. ","criteria":{"language":"text/cql-identifier","expression":"Denominator Observation"}},{"id":"MeasureObservation_1_2","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-aggregateMethod","valueString":"Count"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-criteriaReference","valueString":"Numerator_1"}],"code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"measure-observation","display":"Measure Observation"}]},"description":"Numerator Observation, associated with the Numerator: The total number of inpatient hospitalizations where a fall with major or moderate injury occurred, across all eligible encounters.","criteria":{"language":"text/cql-identifier","expression":"Numerator Observation"}}]}],"supplementalData":[{"id":"sde-ethnicity","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"SDE Ethnicity","criteria":{"language":"text/cql-identifier","expression":"SDE Ethnicity"}},{"id":"sde-payer","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"SDE Payer","criteria":{"language":"text/cql-identifier","expression":"SDE Payer"}},{"id":"sde-race","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"SDE Race","criteria":{"language":"text/cql-identifier","expression":"SDE Race"}},{"id":"sde-sex","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"SDE Sex","criteria":{"language":"text/cql-identifier","expression":"SDE Sex"}},{"id":"risk-variable-body-mass-index-(bmi)","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Body Mass Index (BMI)","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Body Mass Index (BMI)"}},{"id":"risk-variable-all-encounter-diagnoses-with-rank-and-poa-indication","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable All Encounter Diagnoses with Rank and POA Indication","criteria":{"language":"text/cql-identifier","expression":"Risk Variable All Encounter Diagnoses with Rank and POA Indication"}},{"id":"risk-variable-encounter-with-abnormal-weight-loss-or-malnutrition-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Abnormal Weight Loss or Malnutrition Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Abnormal Weight Loss or Malnutrition Present on Admission"}},{"id":"risk-variable-encounter-with-anticoagulant-active-at-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Anticoagulant Active at Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Anticoagulant Active at Admission"}},{"id":"risk-variable-encounter-with-anticoagulant-administration-during-encounter","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Anticoagulant Administration During Encounter","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Anticoagulant Administration During Encounter"}},{"id":"risk-variable-encounter-with-antidepressant-active-at-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Antidepressant Active at Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Antidepressant Active at Admission"}},{"id":"risk-variable-encounter-with-antihypertensive-active-at-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Antihypertensive Active at Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Antihypertensive Active at Admission"}},{"id":"risk-variable-encounter-with-cns-depressant-active-at-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with CNS Depressant Active at Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with CNS Depressant Active at Admission"}},{"id":"risk-variable-encounter-with-diuretic-active-at-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Diuretic Active at Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Diuretic Active at Admission"}},{"id":"risk-variable-encounter-with-opioid-medication-active-at-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Opioid Medication Active at Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Opioid Medication Active at Admission"}},{"id":"risk-variable-encounter-with-coagulation-disorder-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Coagulation Disorder Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Coagulation Disorder Present on Admission"}},{"id":"risk-variable-encounter-with-depression-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Depression Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Depression Present on Admission"}},{"id":"risk-variable-encounter-with-delirium-or-dementia-or-other-psychosis-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Delirium or Dementia or Other Psychosis Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Delirium or Dementia or Other Psychosis Present on Admission"}},{"id":"risk-variable-encounter-with-epilepsy-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Epilepsy Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Epilepsy Present on Admission"}},{"id":"risk-variable-encounter-with-leukemia-or-lymphoma-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Leukemia or Lymphoma Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Leukemia or Lymphoma Present on Admission"}},{"id":"risk-variable-encounter-with-liver-disease-moderate-to-severe-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Liver Disease Moderate to Severe Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Liver Disease Moderate to Severe Present on Admission"}},{"id":"risk-variable-encounter-with-malignant-bone-disease-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Malignant Bone Disease Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Malignant Bone Disease Present on Admission"}},{"id":"risk-variable-encounter-with-neurologic-disorder-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Neurologic Disorder Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Neurologic Disorder Present on Admission"}},{"id":"risk-variable-encounter-with-obesity-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Obesity Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Obesity Present on Admission"}},{"id":"risk-variable-encounter-with-osteoporosis-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Osteoporosis Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Osteoporosis Present on Admission"}},{"id":"risk-variable-encounter-with-peripheral-neuropathy-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Peripheral Neuropathy Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Peripheral Neuropathy Present on Admission"}},{"id":"risk-variable-encounter-with-stroke-present-on-admission","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Stroke Present on Admission","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Stroke Present on Admission"}},{"id":"risk-variable-encounter-with-suicide-attempt","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"risk-adjustment-factor"}]}],"description":"Risk Variable Encounter with Suicide Attempt","criteria":{"language":"text/cql-identifier","expression":"Risk Variable Encounter with Suicide Attempt"}}]},"request":{"method":"PUT","url":"Measure/CMS1017FHIRHHFI"}}]}
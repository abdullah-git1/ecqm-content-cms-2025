{"resourceType":"Bundle","id":"CMSFHIR529HybridHospitalWideReadmission-bundle","type":"transaction","timestamp":"2025-07-09T09:47:56.560-06:00","entry":[{"resource":{"resourceType":"Library","id":"CMSFHIR529HybridHospitalWideReadmission","meta":{"profile":["http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablelibrary","http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-computablelibrary","http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-publishablelibrary","http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-executablelibrary","http://hl7.org/fhir/uv/cql/StructureDefinition/cql-library","http://hl7.org/fhir/uv/cql/StructureDefinition/elm-json-library","http://hl7.org/fhir/uv/cql/StructureDefinition/elm-xml-library"]},"language":"en","text":{"status":"extensions","div":"<div xmlns=\"http://www.w3.org/1999/xhtml\"> \n         <table class=\"grid dict\"> \n            <tr> \n               <th scope=\"row\"> \n                  <b>Title: </b> \n               </th> \n               <td style=\"padding-left: 4px;\">CMSFHIR529HybridHospitalWideReadmission</td> \n            </tr> \n            <tr> \n               <th scope=\"row\"> \n                  <b>Id: </b> \n               </th> \n               <td style=\"padding-left: 4px;\">CMSFHIR529HybridHospitalWideReadmission</td> \n            </tr> \n            <tr> \n               <th scope=\"row\"> \n                  <b>Version: </b> \n               </th> \n               <td style=\"padding-left: 4px;\">0.4.002</td> \n            </tr> \n            <tr> \n               <th scope=\"row\"> \n                  <b>Url: </b> \n               </th> \n               <td style=\"padding-left: 4px;\">https://madie.cms.gov/Library/CMSFHIR529HybridHospitalWideReadmission</td> \n            </tr> \n            <tr> \n               <th scope=\"row\"> \n                  <b> official </b> \n               </th> \n               <td style=\"padding-left: 4px;\"> \n                  <p style=\"margin-bottom: 5px;\"> \n                     <span>CMSFHIR529HybridHospitalWideReadmission</span> \n                  </p> \n               </td> \n            </tr> \n            <tr> \n               <th scope=\"row\"> \n                  <b>Type: </b> \n               </th> \n               <td style=\"padding-left: 4px;\"> \n                  <p style=\"margin-bottom: 5px;\"> \n                     <b>system: </b> \n                     <span>http://terminology.hl7.org/CodeSystem/library-type</span> \n                  </p> \n                  <p style=\"margin-bottom: 5px;\"> \n                     <b>code: </b> \n                     <span>logic-library</span> \n                  </p> \n               </td> \n            </tr> \n            <tr> \n               <th scope=\"row\"> \n                  <b>Date: </b> \n               </th> \n               <td style=\"padding-left: 4px;\">2025-04-21T15:42:49+00:00</td> \n            </tr> \n            <tr> \n               <th scope=\"row\"> \n                  <b>Publisher: </b> \n               </th> \n               <td style=\"padding-left: 4px;\">Centers for Medicare &amp; Medicaid Services (CMS)</td> \n            </tr> \n            <tr> \n               <th scope=\"row\"> \n                  <b>Description: </b> \n               </th> \n               <td style=\"padding-left: 4px;\">CMSFHIR529HybridHospitalWideReadmission</td> \n            </tr> \n            <tr> \n               <th scope=\"row\"> \n                  <b>Related Artifacts: </b> \n               </th> \n               <td style=\"padding-left: 4px;\"> \n                  <p> \n                     <b>Dependencies</b> \n                  </p> \n                  <ul> \n                     <li>https://madie.cms.gov/Library/CQMCommon|4.0.000</li> \n                     <li>https://madie.cms.gov/Library/FHIRHelpers|4.4.000</li> \n                     <li>https://madie.cms.gov/Library/QICoreCommon|4.0.000</li> \n                     <li>https://madie.cms.gov/Library/SupplementalDataElements|5.0.000</li> \n                     <li>http://loinc.org</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1104.10</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1104.12</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.209</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1170.57</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.119</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.134</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.139</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.114</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.2363</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.117</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.151</li> \n                     <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.129</li> \n                  </ul> \n               </td> \n            </tr> \n            <tr> \n               <th scope=\"row\"> \n                  <b>Data Requirements:</b> \n               </th> \n               <td style=\"padding-left: 4px;\"> \n                  <table class=\"grid-dict\"> \n                     <tr> \n                        <th> \n                           <b>Type</b> \n                        </th> \n                        <th> \n                           <b>Profile</b> \n                        </th> \n                        <th> \n                           <b>MS</b> \n                        </th> \n                        <th> \n                           <b>Code Filter</b> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Coverage</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-coverage</th> \n                        <th>;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>type</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1104.10</span> \n                           </span> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Coverage</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-coverage</th> \n                        <th>;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>type</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1104.12</span> \n                           </span>  \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Coverage</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-coverage</th> \n                        <th>;;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>type</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591</span> \n                           </span> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/core/StructureDefinition/us-core-heart-rate</th> \n                        <th>;;;;</th> \n                        <th> </th> \n                     </tr> \n                     <tr> \n                        <th>ServiceRequest</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest</th> \n                        <th>;;;;;;;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>code</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.209</span> \n                           </span> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>ServiceRequest</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest</th> \n                        <th>;;;;;;;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>code</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1170.57</span> \n                           </span> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Encounter</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter</th> \n                        <th>;;;</th> \n                        <th> </th> \n                     </tr> \n                     <tr> \n                        <th>Procedure</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure</th> \n                        <th>;;;;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>code</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.209</span> \n                           </span> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/core/StructureDefinition/us-core-body-weight</th> \n                        <th>;;;;</th> \n                        <th> </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab</th> \n                        <th>;;;;;;;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>code</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.119</span> \n                           </span> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab</th> \n                        <th>;;;;;;;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>code</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.134</span> \n                           </span> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab</th> \n                        <th>;;;;;;;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>code</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.139</span> \n                           </span> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab</th> \n                        <th>;;;;;;;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>code</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.114</span> \n                           </span> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab</th> \n                        <th>;;;;;;;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>code</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.2363</span> \n                           </span> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab</th> \n                        <th>;;;;;;;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>code</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.117</span> \n                           </span> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab</th> \n                        <th>;;;;;;;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>code</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.129</span> \n                           </span> \n                        </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/core/StructureDefinition/us-core-respiratory-rate</th> \n                        <th>;;;;</th> \n                        <th> </th> \n                     </tr> \n                     <tr> \n                        <th>Patient</th> \n                        <th>http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient</th> \n                        <th>;;</th> \n                        <th> </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/core/StructureDefinition/us-core-body-temperature</th> \n                        <th>;;;;</th> \n                        <th> </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/core/StructureDefinition/us-core-blood-pressure</th> \n                        <th>;;;;</th> \n                        <th> </th> \n                     </tr> \n                     <tr> \n                        <th>Observation</th> \n                        <th>http://hl7.org/fhir/us/core/StructureDefinition/us-core-pulse-oximetry</th> \n                        <th>;;;;;</th> \n                        <th> \n                           <b>code filter: </b> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>path: </b> \n                              <span>code</span> \n                           </span> \n                           <br/> \n                           <span style=\"padding-left: 4px;\"> \n                              <b>value set: </b> \n                              <span>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.151</span> \n                           </span> \n                        </th> \n                     </tr> \n                  </table> \n               </td> \n            </tr> \n            <tr> \n               <td colspan=\"2\"> \n                  <table> \n                     <tr> \n                        <th> \n                           <a id=\"cql-content\"> \n                              <b>Content: </b> \n                           </a> text/cql \n                        </th> \n                     </tr> \n                     <tr> \n                        <td> \n                           <pre><code class=\"language-cql\">library CMSFHIR529HybridHospitalWideReadmission version '0.4.002'\n\nusing QICore version '6.0.0'\n\ninclude CQMCommon version '4.0.000' called CQMCommon\ninclude FHIRHelpers version '4.4.000' called FHIRHelpers\ninclude QICoreCommon version '4.0.000' called QICoreCommon\ninclude SupplementalDataElements version '5.0.000' called SDE\n\ncodesystem &quot;ActCode&quot;: 'http://terminology.hl7.org/CodeSystem/v3-ActCode'\ncodesystem &quot;LOINC&quot;: 'http://loinc.org'\ncodesystem &quot;SNOMEDCT&quot;: 'http://snomed.info/sct'\ncodesystem &quot;Source of Payment Typology&quot;: 'https://nahdo.org/sopt'\n\nvalueset &quot;Bicarbonate lab test&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.139'\nvalueset &quot;Creatinine lab test&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.2363'\nvalueset &quot;Encounter Inpatient&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307'\nvalueset &quot;Glucose lab test&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.134'\nvalueset &quot;Hematocrit lab test&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.114'\nvalueset &quot;Non Invasive Oxygen Therapy by Nasal Cannula or Mask&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.209'\nvalueset &quot;Non Invasive Oxygen Therapy Device Codes&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1170.57'\nvalueset &quot;Medicare Advantage payer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1104.12'\nvalueset &quot;Medicare FFS payer&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1104.10'\nvalueset &quot;Oxygen Saturation by Pulse Oximetry&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.151'\nvalueset &quot;Potassium lab test&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.117'\nvalueset &quot;Sodium lab test&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.119'\nvalueset &quot;White blood cells count lab test&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.129'\n\ncode &quot;Systolic blood pressure&quot;: '8480-6' from &quot;LOINC&quot; display 'Systolic BP'\n\nparameter &quot;Measurement Period&quot; Interval&lt;DateTime&gt;\n\ncontext Patient\n\ndefine &quot;Initial Population&quot;:\n  &quot;Inpatient Encounters&quot;\n\ndefine &quot;Inpatient Encounters&quot;:\n  [Encounter: &quot;Encounter Inpatient&quot;] InpatientEncounter\n    with ( [Coverage: &quot;Medicare FFS payer&quot;]\n      union [Coverage: &quot;Medicare Advantage payer&quot;] ) MedicarePayer\n      such that ( InpatientEncounter.hospitalizationWithObservationAndOutpatientSurgeryService ( ).lengthInDays ( ) ) &lt; 365\n        and InpatientEncounter.status = 'finished'\n        and AgeInYearsAt(date from start of InpatientEncounter.period) &gt;= 65\n        and InpatientEncounter.period ends during day of &quot;Measurement Period&quot;\n\ndefine &quot;Encounter With First Body Temperature&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstTemperature: First([USCoreBodyTemperatureProfile] Temperature\n        where Temperature.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and Temperature.status in { 'final', 'amended', 'corrected' }\n          and Temperature.value is not null\n        sort by effective.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstTemperatureResult: FirstTemperature.value as Quantity,\n      Timing: FirstTemperature.effective.earliest ( )\n    }\n\ndefine &quot;Encounter With First Heart Rate&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstHeartRate: First([USCoreHeartRateProfile] HeartRate\n        where HeartRate.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and HeartRate.status in { 'final', 'amended', 'corrected' }\n          and HeartRate.value is not null\n        sort by effective.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstHeartRateResult: FirstHeartRate.value as Quantity,\n      Timing: FirstHeartRate.effective.earliest ( )\n    }\n\ndefine &quot;Encounter With First Oxygen Saturation&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstOxygenSat: First([&quot;USCorePulseOximetryProfile&quot;: &quot;Oxygen Saturation by Pulse Oximetry&quot;] O2Saturation\n        where O2Saturation.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and O2Saturation.status in { 'final', 'amended', 'corrected' }\n          and O2Saturation.value is not null\n        sort by effective.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstOxygenSatResult: FirstOxygenSat.value as Quantity,\n      Timing: FirstOxygenSat.effective.earliest ( )\n    }\n\ndefine &quot;Encounter With First Respiratory Rate&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstRespRate: First([USCoreRespiratoryRateProfile] Respirations\n        where Respirations.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and Respirations.status in { 'final', 'amended', 'corrected' }\n          and Respirations.value is not null\n        sort by effective.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstRespRateResult: FirstRespRate.value as Quantity,\n      Timing: FirstRespRate.effective.earliest ( )\n    }\n\ndefine &quot;Encounter With First Systolic Blood Pressure&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstSystolicBP: First([&quot;USCoreBloodPressureProfile&quot;] BP\n        where BP.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and BP.status in { 'final', 'amended', 'corrected' }\n          and BP.component.value is not null\n        sort by effective.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstSBPResult: FirstSystolicBP.component C\n        where C.code ~ &quot;Systolic blood pressure&quot;\n        return C.value as Quantity,\n      Timing: FirstSystolicBP.effective.earliest ( )\n    }\n\ndefine &quot;Encounter With First Bicarbonate Lab Test&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstBicarbonateLab: First([&quot;LaboratoryResultObservation&quot;: &quot;Bicarbonate lab test&quot;] bicarbonatelab\n        where bicarbonatelab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and bicarbonatelab.status in { 'final', 'amended', 'corrected' }\n          and bicarbonatelab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstBicarbonateLab.value as Quantity,\n      Timing: FirstBicarbonateLab.issued\n    }\n\ndefine &quot;Encounter With First Creatinine Lab Test&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstCreatinineLab: First([&quot;LaboratoryResultObservation&quot;: &quot;Creatinine lab test&quot;] CreatinineLab\n        where CreatinineLab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and CreatinineLab.status in { 'final', 'amended', 'corrected' }\n          and CreatinineLab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstCreatinineLab.value as Quantity,\n      Timing: FirstCreatinineLab.issued\n    }\n\ndefine &quot;Encounter With First Glucose Lab Test&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstGlucoseLab: First([&quot;LaboratoryResultObservation&quot;: &quot;Glucose lab test&quot;] GlucoseLab\n        where GlucoseLab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and GlucoseLab.status in { 'final', 'amended', 'corrected' }\n          and GlucoseLab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstGlucoseLab.value as Quantity,\n      Timing: FirstGlucoseLab.issued\n    }\n\ndefine &quot;Encounter With First Hematocrit Lab Test&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstHematocritLab: First([&quot;LaboratoryResultObservation&quot;: &quot;Hematocrit lab test&quot;] HematocritLab\n        where HematocritLab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and HematocritLab.status in { 'final', 'amended', 'corrected' }\n          and HematocritLab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstHematocritLab.value as Quantity,\n      Timing: FirstHematocritLab.issued\n    }\n\ndefine &quot;Encounter With First Potassium Lab Test&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstPotassiumLab: First([&quot;LaboratoryResultObservation&quot;: &quot;Potassium lab test&quot;] PotassiumLab\n        where PotassiumLab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and PotassiumLab.status in { 'final', 'amended', 'corrected' }\n          and PotassiumLab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstPotassiumLab.value as Quantity,\n      Timing: FirstPotassiumLab.issued\n    }\n\ndefine &quot;Encounter With First Sodium Lab Test&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstSodiumLab: First([&quot;LaboratoryResultObservation&quot;: &quot;Sodium lab test&quot;] SodiumLab\n        where SodiumLab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and SodiumLab.status in { 'final', 'amended', 'corrected' }\n          and SodiumLab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstSodiumLab.value as Quantity,\n      Timing: FirstSodiumLab.issued\n    }\n\ndefine &quot;Encounter With First White Blood Cells Lab Test&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstWhiteBloodCellLab: First([&quot;LaboratoryResultObservation&quot;: &quot;White blood cells count lab test&quot;] WhiteBloodCellLab\n        where WhiteBloodCellLab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and WhiteBloodCellLab.status in { 'final', 'amended', 'corrected' }\n          and WhiteBloodCellLab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstWhiteBloodCellLab.value as Quantity,\n      Timing: FirstWhiteBloodCellLab.issued\n    }\n\ndefine &quot;Encounter With First Weight Recorded&quot;:\n  &quot;Inpatient Encounters&quot; EncounterInpatient\n    let FirstWeight: First([&quot;USCoreBodyWeightProfile&quot;] WeightExam\n        where WeightExam.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and WeightExam.status in { 'final', 'amended', 'corrected' }\n          and WeightExam.value is not null\n        sort by effective.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstWeight.value as Quantity,\n      Timing: FirstWeight.effective.earliest ( )\n    }\n\ndefine &quot;Encounter With Oxygen 60 Minutes Or Less Prior To ED Admission Or During ED&quot;:\n  &quot;Initial Population&quot; EncounterInpatient\n    where exists ( ( [ServiceRequest: &quot;Non Invasive Oxygen Therapy by Nasal Cannula or Mask&quot;]\n        union [ServiceRequest: &quot;Non Invasive Oxygen Therapy Device Codes&quot;] ) OxygenTherapyOrder\n        where ( OxygenTherapyOrder.authoredOn during EncounterInpatient.edVisit ( ).period\n            or OxygenTherapyOrder.authoredOn 60 minutes or less before or on start of EncounterInpatient.edVisit ( ).period\n        )\n          and OxygenTherapyOrder.status in { 'active', 'completed' }\n          and OxygenTherapyOrder.intent = 'order'\n        return {\n          EncounterId: EncounterInpatient.id,\n          OrderStatus: OxygenTherapyOrder.status,\n          OrderTiming: OxygenTherapyOrder.authoredOn\n        }\n    )\n      or exists ( [Procedure: &quot;Non Invasive Oxygen Therapy by Nasal Cannula or Mask&quot;] OxygenAdminInterv\n          where ( OxygenAdminInterv.performed.toInterval ( ) starts during EncounterInpatient.edVisit ( ).period\n              or OxygenAdminInterv.performed.toInterval ( ) 60 minutes or less before or on start of EncounterInpatient.edVisit ( ).period\n          )\n            and OxygenAdminInterv.status = 'completed'\n          return {\n            EncounterId: EncounterInpatient.id,\n            EDEncounterTiming: EncounterInpatient.edVisit ( ).period,\n            PerformedStatus: OxygenAdminInterv.status,\n            PerformedTiming: OxygenAdminInterv.performed.toInterval ( )\n          }\n      )\n\ndefine &quot;SDE Ethnicity&quot;:\n  SDE.&quot;SDE Ethnicity&quot;\n\ndefine &quot;SDE Payer&quot;:\n  SDE.&quot;SDE Payer&quot;\n\ndefine &quot;SDE Race&quot;:\n  SDE.&quot;SDE Race&quot;\n\ndefine &quot;SDE Sex&quot;:\n  SDE.&quot;SDE Sex&quot;</code></pre> \n                        </td> \n                     </tr> \n                  </table> \n               </td> \n            </tr> \n         </table> \n      </div>"},"contained":[{"resourceType":"Parameters","id":"options","parameter":[{"name":"translatorVersion","valueString":"3.25.0"},{"name":"option","valueString":"EnableAnnotations"},{"name":"option","valueString":"EnableLocators"},{"name":"option","valueString":"DisableListDemotion"},{"name":"option","valueString":"DisableListPromotion"},{"name":"format","valueString":"XML"},{"name":"format","valueString":"JSON"},{"name":"analyzeDataRequirements","valueBoolean":false},{"name":"collapseDataRequirements","valueBoolean":false},{"name":"compatibilityLevel","valueString":"1.5"},{"name":"enableCqlOnly","valueBoolean":false},{"name":"errorLevel","valueString":"Info"},{"name":"signatureLevel","valueString":"Overloads"},{"name":"validateUnits","valueBoolean":true},{"name":"verifyOnly","valueBoolean":false}]}],"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/cqf-directReferenceCode","valueCoding":{"system":"http://loinc.org","code":"8480-6","display":"Systolic blood pressure"}},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-cqlOptions","valueReference":{"reference":"#options"}},{"url":"http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-softwaresystem","valueReference":{"reference":"Device/cqf-tooling"}}],"url":"https://madie.cms.gov/Library/CMSFHIR529HybridHospitalWideReadmission","identifier":[{"use":"official","system":"https://madie.cms.gov/login","value":"CMSFHIR529HybridHospitalWideReadmission"}],"version":"0.4.002","name":"CMSFHIR529HybridHospitalWideReadmission","title":"CMSFHIR529HybridHospitalWideReadmission","status":"active","experimental":false,"type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/library-type","code":"logic-library"}]},"date":"2025-04-21T15:42:49+00:00","publisher":"Centers for Medicare & Medicaid Services (CMS)","description":"CMSFHIR529HybridHospitalWideReadmission","content":[{"contentType":"text/cql","data":"bGlicmFyeSBDTVNGSElSNTI5SHlicmlkSG9zcGl0YWxXaWRlUmVhZG1pc3Npb24gdmVyc2lvbiAnMC40LjAwMicNCg0KdXNpbmcgUUlDb3JlIHZlcnNpb24gJzYuMC4wJw0KDQppbmNsdWRlIENRTUNvbW1vbiB2ZXJzaW9uICc0LjAuMDAwJyBjYWxsZWQgQ1FNQ29tbW9uDQppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuNC4wMDAnIGNhbGxlZCBGSElSSGVscGVycw0KaW5jbHVkZSBRSUNvcmVDb21tb24gdmVyc2lvbiAnNC4wLjAwMCcgY2FsbGVkIFFJQ29yZUNvbW1vbg0KaW5jbHVkZSBTdXBwbGVtZW50YWxEYXRhRWxlbWVudHMgdmVyc2lvbiAnNS4wLjAwMCcgY2FsbGVkIFNERQ0KDQpjb2Rlc3lzdGVtICJBY3RDb2RlIjogJ2h0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vdjMtQWN0Q29kZScNCmNvZGVzeXN0ZW0gIkxPSU5DIjogJ2h0dHA6Ly9sb2luYy5vcmcnDQpjb2Rlc3lzdGVtICJTTk9NRURDVCI6ICdodHRwOi8vc25vbWVkLmluZm8vc2N0Jw0KY29kZXN5c3RlbSAiU291cmNlIG9mIFBheW1lbnQgVHlwb2xvZ3kiOiAnaHR0cHM6Ly9uYWhkby5vcmcvc29wdCcNCg0KdmFsdWVzZXQgIkJpY2FyYm9uYXRlIGxhYiB0ZXN0IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTA0NS4xMzknDQp2YWx1ZXNldCAiQ3JlYXRpbmluZSBsYWIgdGVzdCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy42NjYuNS4yMzYzJw0KdmFsdWVzZXQgIkVuY291bnRlciBJbnBhdGllbnQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNjY2LjUuMzA3Jw0KdmFsdWVzZXQgIkdsdWNvc2UgbGFiIHRlc3QiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMDQ1LjEzNCcNCnZhbHVlc2V0ICJIZW1hdG9jcml0IGxhYiB0ZXN0IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTA0NS4xMTQnDQp2YWx1ZXNldCAiTm9uIEludmFzaXZlIE94eWdlbiBUaGVyYXB5IGJ5IE5hc2FsIENhbm51bGEgb3IgTWFzayI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEyNDguMjA5Jw0KdmFsdWVzZXQgIk5vbiBJbnZhc2l2ZSBPeHlnZW4gVGhlcmFweSBEZXZpY2UgQ29kZXMiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTcwLjU3Jw0KdmFsdWVzZXQgIk1lZGljYXJlIEFkdmFudGFnZSBwYXllciI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMDQuMTInDQp2YWx1ZXNldCAiTWVkaWNhcmUgRkZTIHBheWVyIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTEwNC4xMCcNCnZhbHVlc2V0ICJPeHlnZW4gU2F0dXJhdGlvbiBieSBQdWxzZSBPeGltZXRyeSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEwNDUuMTUxJw0KdmFsdWVzZXQgIlBvdGFzc2l1bSBsYWIgdGVzdCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEwNDUuMTE3Jw0KdmFsdWVzZXQgIlNvZGl1bSBsYWIgdGVzdCI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEwNDUuMTE5Jw0KdmFsdWVzZXQgIldoaXRlIGJsb29kIGNlbGxzIGNvdW50IGxhYiB0ZXN0IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTA0NS4xMjknDQoNCmNvZGUgIlN5c3RvbGljIGJsb29kIHByZXNzdXJlIjogJzg0ODAtNicgZnJvbSAiTE9JTkMiIGRpc3BsYXkgJ1N5c3RvbGljIEJQJw0KDQpwYXJhbWV0ZXIgIk1lYXN1cmVtZW50IFBlcmlvZCIgSW50ZXJ2YWw8RGF0ZVRpbWU+DQogIGRlZmF1bHQgSW50ZXJ2YWxbQDIwMjYtMDEtMDFUMDA6MDA6MDAuMFosIEAyMDI2LTEyLTMxVDIzOjU5OjAwLjBaICkNCg0KY29udGV4dCBQYXRpZW50DQoNCmRlZmluZSAiSW5pdGlhbCBQb3B1bGF0aW9uIjoNCiAgIklucGF0aWVudCBFbmNvdW50ZXJzIg0KDQpkZWZpbmUgIklucGF0aWVudCBFbmNvdW50ZXJzIjoNCiAgW0VuY291bnRlcjogIkVuY291bnRlciBJbnBhdGllbnQiXSBJbnBhdGllbnRFbmNvdW50ZXINCiAgICB3aXRoICggW0NvdmVyYWdlOiAiTWVkaWNhcmUgRkZTIHBheWVyIl0NCiAgICAgIHVuaW9uIFtDb3ZlcmFnZTogIk1lZGljYXJlIEFkdmFudGFnZSBwYXllciJdICkgTWVkaWNhcmVQYXllcg0KICAgICAgc3VjaCB0aGF0ICggSW5wYXRpZW50RW5jb3VudGVyLmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbkFuZE91dHBhdGllbnRTdXJnZXJ5U2VydmljZSAoICkubGVuZ3RoSW5EYXlzICggKSApIDwgMzY1DQogICAgICAgIGFuZCBJbnBhdGllbnRFbmNvdW50ZXIuc3RhdHVzID0gJ2ZpbmlzaGVkJw0KICAgICAgICBhbmQgQWdlSW5ZZWFyc0F0KGRhdGUgZnJvbSBzdGFydCBvZiBJbnBhdGllbnRFbmNvdW50ZXIucGVyaW9kKSA+PSA2NQ0KICAgICAgICBhbmQgSW5wYXRpZW50RW5jb3VudGVyLnBlcmlvZCBlbmRzIGR1cmluZyBkYXkgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCINCg0KZGVmaW5lICJFbmNvdW50ZXIgV2l0aCBGaXJzdCBCb2R5IFRlbXBlcmF0dXJlIjoNCiAgIklucGF0aWVudCBFbmNvdW50ZXJzIiBFbmNvdW50ZXJJbnBhdGllbnQNCiAgICBsZXQgRmlyc3RUZW1wZXJhdHVyZTogRmlyc3QoW1VTQ29yZUJvZHlUZW1wZXJhdHVyZVByb2ZpbGVdIFRlbXBlcmF0dXJlDQogICAgICAgIHdoZXJlIFRlbXBlcmF0dXJlLmVmZmVjdGl2ZS5lYXJsaWVzdCgpIGR1cmluZyBFbmNvdW50ZXJJbnBhdGllbnQuaG9zcGl0YWxpemF0aW9uV2l0aE9ic2VydmF0aW9uQW5kT3V0cGF0aWVudFN1cmdlcnlTZXJ2aWNlKCkNCiAgICAgICAgICBhbmQgVGVtcGVyYXR1cmUuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9DQogICAgICAgICAgYW5kIFRlbXBlcmF0dXJlLnZhbHVlIGlzIG5vdCBudWxsDQogICAgICAgIHNvcnQgYnkgZWZmZWN0aXZlLmVhcmxpZXN0KCkNCiAgICApDQogICAgcmV0dXJuIHsNCiAgICAgIEVuY291bnRlcklkOiBFbmNvdW50ZXJJbnBhdGllbnQuaWQsDQogICAgICBGaXJzdFRlbXBlcmF0dXJlUmVzdWx0OiBGaXJzdFRlbXBlcmF0dXJlLnZhbHVlIGFzIFF1YW50aXR5LA0KICAgICAgVGltaW5nOiBGaXJzdFRlbXBlcmF0dXJlLmVmZmVjdGl2ZS5lYXJsaWVzdCAoICkNCiAgICB9DQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggRmlyc3QgSGVhcnQgUmF0ZSI6DQogICJJbnBhdGllbnQgRW5jb3VudGVycyIgRW5jb3VudGVySW5wYXRpZW50DQogICAgbGV0IEZpcnN0SGVhcnRSYXRlOiBGaXJzdChbVVNDb3JlSGVhcnRSYXRlUHJvZmlsZV0gSGVhcnRSYXRlDQogICAgICAgIHdoZXJlIEhlYXJ0UmF0ZS5lZmZlY3RpdmUuZWFybGllc3QoKSBkdXJpbmcgRW5jb3VudGVySW5wYXRpZW50Lmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbkFuZE91dHBhdGllbnRTdXJnZXJ5U2VydmljZSgpDQogICAgICAgICAgYW5kIEhlYXJ0UmF0ZS5zdGF0dXMgaW4geyAnZmluYWwnLCAnYW1lbmRlZCcsICdjb3JyZWN0ZWQnIH0NCiAgICAgICAgICBhbmQgSGVhcnRSYXRlLnZhbHVlIGlzIG5vdCBudWxsDQogICAgICAgIHNvcnQgYnkgZWZmZWN0aXZlLmVhcmxpZXN0KCkNCiAgICApDQogICAgcmV0dXJuIHsNCiAgICAgIEVuY291bnRlcklkOiBFbmNvdW50ZXJJbnBhdGllbnQuaWQsDQogICAgICBGaXJzdEhlYXJ0UmF0ZVJlc3VsdDogRmlyc3RIZWFydFJhdGUudmFsdWUgYXMgUXVhbnRpdHksDQogICAgICBUaW1pbmc6IEZpcnN0SGVhcnRSYXRlLmVmZmVjdGl2ZS5lYXJsaWVzdCAoICkNCiAgICB9DQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggRmlyc3QgT3h5Z2VuIFNhdHVyYXRpb24iOg0KICAiSW5wYXRpZW50IEVuY291bnRlcnMiIEVuY291bnRlcklucGF0aWVudA0KICAgIGxldCBGaXJzdE94eWdlblNhdDogRmlyc3QoWyJVU0NvcmVQdWxzZU94aW1ldHJ5UHJvZmlsZSI6ICJPeHlnZW4gU2F0dXJhdGlvbiBieSBQdWxzZSBPeGltZXRyeSJdIE8yU2F0dXJhdGlvbg0KICAgICAgICB3aGVyZSBPMlNhdHVyYXRpb24uZWZmZWN0aXZlLmVhcmxpZXN0KCkgZHVyaW5nIEVuY291bnRlcklucGF0aWVudC5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb25BbmRPdXRwYXRpZW50U3VyZ2VyeVNlcnZpY2UoKQ0KICAgICAgICAgIGFuZCBPMlNhdHVyYXRpb24uc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9DQogICAgICAgICAgYW5kIE8yU2F0dXJhdGlvbi52YWx1ZSBpcyBub3QgbnVsbA0KICAgICAgICBzb3J0IGJ5IGVmZmVjdGl2ZS5lYXJsaWVzdCgpDQogICAgKQ0KICAgIHJldHVybiB7DQogICAgICBFbmNvdW50ZXJJZDogRW5jb3VudGVySW5wYXRpZW50LmlkLA0KICAgICAgRmlyc3RPeHlnZW5TYXRSZXN1bHQ6IEZpcnN0T3h5Z2VuU2F0LnZhbHVlIGFzIFF1YW50aXR5LA0KICAgICAgVGltaW5nOiBGaXJzdE94eWdlblNhdC5lZmZlY3RpdmUuZWFybGllc3QgKCApDQogICAgfQ0KDQpkZWZpbmUgIkVuY291bnRlciBXaXRoIEZpcnN0IFJlc3BpcmF0b3J5IFJhdGUiOg0KICAiSW5wYXRpZW50IEVuY291bnRlcnMiIEVuY291bnRlcklucGF0aWVudA0KICAgIGxldCBGaXJzdFJlc3BSYXRlOiBGaXJzdChbVVNDb3JlUmVzcGlyYXRvcnlSYXRlUHJvZmlsZV0gUmVzcGlyYXRpb25zDQogICAgICAgIHdoZXJlIFJlc3BpcmF0aW9ucy5lZmZlY3RpdmUuZWFybGllc3QoKSBkdXJpbmcgRW5jb3VudGVySW5wYXRpZW50Lmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbkFuZE91dHBhdGllbnRTdXJnZXJ5U2VydmljZSgpDQogICAgICAgICAgYW5kIFJlc3BpcmF0aW9ucy5zdGF0dXMgaW4geyAnZmluYWwnLCAnYW1lbmRlZCcsICdjb3JyZWN0ZWQnIH0NCiAgICAgICAgICBhbmQgUmVzcGlyYXRpb25zLnZhbHVlIGlzIG5vdCBudWxsDQogICAgICAgIHNvcnQgYnkgZWZmZWN0aXZlLmVhcmxpZXN0KCkNCiAgICApDQogICAgcmV0dXJuIHsNCiAgICAgIEVuY291bnRlcklkOiBFbmNvdW50ZXJJbnBhdGllbnQuaWQsDQogICAgICBGaXJzdFJlc3BSYXRlUmVzdWx0OiBGaXJzdFJlc3BSYXRlLnZhbHVlIGFzIFF1YW50aXR5LA0KICAgICAgVGltaW5nOiBGaXJzdFJlc3BSYXRlLmVmZmVjdGl2ZS5lYXJsaWVzdCAoICkNCiAgICB9DQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggRmlyc3QgU3lzdG9saWMgQmxvb2QgUHJlc3N1cmUiOg0KICAiSW5wYXRpZW50IEVuY291bnRlcnMiIEVuY291bnRlcklucGF0aWVudA0KICAgIGxldCBGaXJzdFN5c3RvbGljQlA6IEZpcnN0KFsiVVNDb3JlQmxvb2RQcmVzc3VyZVByb2ZpbGUiXSBCUA0KICAgICAgICB3aGVyZSBCUC5lZmZlY3RpdmUuZWFybGllc3QoKSBkdXJpbmcgRW5jb3VudGVySW5wYXRpZW50Lmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbkFuZE91dHBhdGllbnRTdXJnZXJ5U2VydmljZSgpDQogICAgICAgICAgYW5kIEJQLnN0YXR1cyBpbiB7ICdmaW5hbCcsICdhbWVuZGVkJywgJ2NvcnJlY3RlZCcgfQ0KICAgICAgICAgIGFuZCBCUC5jb21wb25lbnQudmFsdWUgaXMgbm90IG51bGwNCiAgICAgICAgc29ydCBieSBlZmZlY3RpdmUuZWFybGllc3QoKQ0KICAgICkNCiAgICByZXR1cm4gew0KICAgICAgRW5jb3VudGVySWQ6IEVuY291bnRlcklucGF0aWVudC5pZCwNCiAgICAgIEZpcnN0U0JQUmVzdWx0OiBGaXJzdFN5c3RvbGljQlAuY29tcG9uZW50IEMNCiAgICAgICAgd2hlcmUgQy5jb2RlIH4gIlN5c3RvbGljIGJsb29kIHByZXNzdXJlIg0KICAgICAgICByZXR1cm4gQy52YWx1ZSBhcyBRdWFudGl0eSwNCiAgICAgIFRpbWluZzogRmlyc3RTeXN0b2xpY0JQLmVmZmVjdGl2ZS5lYXJsaWVzdCAoICkNCiAgICB9DQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggRmlyc3QgQmljYXJib25hdGUgTGFiIFRlc3QiOg0KICAiSW5wYXRpZW50IEVuY291bnRlcnMiIEVuY291bnRlcklucGF0aWVudA0KICAgIGxldCBGaXJzdEJpY2FyYm9uYXRlTGFiOiBGaXJzdChbIkxhYm9yYXRvcnlSZXN1bHRPYnNlcnZhdGlvbiI6ICJCaWNhcmJvbmF0ZSBsYWIgdGVzdCJdIGJpY2FyYm9uYXRlbGFiDQogICAgICAgIHdoZXJlIGJpY2FyYm9uYXRlbGFiLmVmZmVjdGl2ZS5lYXJsaWVzdCgpIGR1cmluZyBFbmNvdW50ZXJJbnBhdGllbnQuaG9zcGl0YWxpemF0aW9uV2l0aE9ic2VydmF0aW9uQW5kT3V0cGF0aWVudFN1cmdlcnlTZXJ2aWNlKCkNCiAgICAgICAgICBhbmQgYmljYXJib25hdGVsYWIuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9DQogICAgICAgICAgYW5kIGJpY2FyYm9uYXRlbGFiLnZhbHVlIGlzIG5vdCBudWxsDQogICAgICAgIHNvcnQgYnkgaXNzdWVkLmVhcmxpZXN0KCkNCiAgICApDQogICAgcmV0dXJuIHsNCiAgICAgIEVuY291bnRlcklkOiBFbmNvdW50ZXJJbnBhdGllbnQuaWQsDQogICAgICBGaXJzdFJlc3VsdDogRmlyc3RCaWNhcmJvbmF0ZUxhYi52YWx1ZSBhcyBRdWFudGl0eSwNCiAgICAgIFRpbWluZzogRmlyc3RCaWNhcmJvbmF0ZUxhYi5pc3N1ZWQNCiAgICB9DQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggRmlyc3QgQ3JlYXRpbmluZSBMYWIgVGVzdCI6DQogICJJbnBhdGllbnQgRW5jb3VudGVycyIgRW5jb3VudGVySW5wYXRpZW50DQogICAgbGV0IEZpcnN0Q3JlYXRpbmluZUxhYjogRmlyc3QoWyJMYWJvcmF0b3J5UmVzdWx0T2JzZXJ2YXRpb24iOiAiQ3JlYXRpbmluZSBsYWIgdGVzdCJdIENyZWF0aW5pbmVMYWINCiAgICAgICAgd2hlcmUgQ3JlYXRpbmluZUxhYi5lZmZlY3RpdmUuZWFybGllc3QoKSBkdXJpbmcgRW5jb3VudGVySW5wYXRpZW50Lmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbkFuZE91dHBhdGllbnRTdXJnZXJ5U2VydmljZSgpDQogICAgICAgICAgYW5kIENyZWF0aW5pbmVMYWIuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9DQogICAgICAgICAgYW5kIENyZWF0aW5pbmVMYWIudmFsdWUgaXMgbm90IG51bGwNCiAgICAgICAgc29ydCBieSBpc3N1ZWQuZWFybGllc3QoKQ0KICAgICkNCiAgICByZXR1cm4gew0KICAgICAgRW5jb3VudGVySWQ6IEVuY291bnRlcklucGF0aWVudC5pZCwNCiAgICAgIEZpcnN0UmVzdWx0OiBGaXJzdENyZWF0aW5pbmVMYWIudmFsdWUgYXMgUXVhbnRpdHksDQogICAgICBUaW1pbmc6IEZpcnN0Q3JlYXRpbmluZUxhYi5pc3N1ZWQNCiAgICB9DQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggRmlyc3QgR2x1Y29zZSBMYWIgVGVzdCI6DQogICJJbnBhdGllbnQgRW5jb3VudGVycyIgRW5jb3VudGVySW5wYXRpZW50DQogICAgbGV0IEZpcnN0R2x1Y29zZUxhYjogRmlyc3QoWyJMYWJvcmF0b3J5UmVzdWx0T2JzZXJ2YXRpb24iOiAiR2x1Y29zZSBsYWIgdGVzdCJdIEdsdWNvc2VMYWINCiAgICAgICAgd2hlcmUgR2x1Y29zZUxhYi5lZmZlY3RpdmUuZWFybGllc3QoKSBkdXJpbmcgRW5jb3VudGVySW5wYXRpZW50Lmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbkFuZE91dHBhdGllbnRTdXJnZXJ5U2VydmljZSgpDQogICAgICAgICAgYW5kIEdsdWNvc2VMYWIuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9DQogICAgICAgICAgYW5kIEdsdWNvc2VMYWIudmFsdWUgaXMgbm90IG51bGwNCiAgICAgICAgc29ydCBieSBpc3N1ZWQuZWFybGllc3QoKQ0KICAgICkNCiAgICByZXR1cm4gew0KICAgICAgRW5jb3VudGVySWQ6IEVuY291bnRlcklucGF0aWVudC5pZCwNCiAgICAgIEZpcnN0UmVzdWx0OiBGaXJzdEdsdWNvc2VMYWIudmFsdWUgYXMgUXVhbnRpdHksDQogICAgICBUaW1pbmc6IEZpcnN0R2x1Y29zZUxhYi5pc3N1ZWQNCiAgICB9DQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggRmlyc3QgSGVtYXRvY3JpdCBMYWIgVGVzdCI6DQogICJJbnBhdGllbnQgRW5jb3VudGVycyIgRW5jb3VudGVySW5wYXRpZW50DQogICAgbGV0IEZpcnN0SGVtYXRvY3JpdExhYjogRmlyc3QoWyJMYWJvcmF0b3J5UmVzdWx0T2JzZXJ2YXRpb24iOiAiSGVtYXRvY3JpdCBsYWIgdGVzdCJdIEhlbWF0b2NyaXRMYWINCiAgICAgICAgd2hlcmUgSGVtYXRvY3JpdExhYi5lZmZlY3RpdmUuZWFybGllc3QoKSBkdXJpbmcgRW5jb3VudGVySW5wYXRpZW50Lmhvc3BpdGFsaXphdGlvbldpdGhPYnNlcnZhdGlvbkFuZE91dHBhdGllbnRTdXJnZXJ5U2VydmljZSgpDQogICAgICAgICAgYW5kIEhlbWF0b2NyaXRMYWIuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9DQogICAgICAgICAgYW5kIEhlbWF0b2NyaXRMYWIudmFsdWUgaXMgbm90IG51bGwNCiAgICAgICAgc29ydCBieSBpc3N1ZWQuZWFybGllc3QoKQ0KICAgICkNCiAgICByZXR1cm4gew0KICAgICAgRW5jb3VudGVySWQ6IEVuY291bnRlcklucGF0aWVudC5pZCwNCiAgICAgIEZpcnN0UmVzdWx0OiBGaXJzdEhlbWF0b2NyaXRMYWIudmFsdWUgYXMgUXVhbnRpdHksDQogICAgICBUaW1pbmc6IEZpcnN0SGVtYXRvY3JpdExhYi5pc3N1ZWQNCiAgICB9DQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggRmlyc3QgUG90YXNzaXVtIExhYiBUZXN0IjoNCiAgIklucGF0aWVudCBFbmNvdW50ZXJzIiBFbmNvdW50ZXJJbnBhdGllbnQNCiAgICBsZXQgRmlyc3RQb3Rhc3NpdW1MYWI6IEZpcnN0KFsiTGFib3JhdG9yeVJlc3VsdE9ic2VydmF0aW9uIjogIlBvdGFzc2l1bSBsYWIgdGVzdCJdIFBvdGFzc2l1bUxhYg0KICAgICAgICB3aGVyZSBQb3Rhc3NpdW1MYWIuZWZmZWN0aXZlLmVhcmxpZXN0KCkgZHVyaW5nIEVuY291bnRlcklucGF0aWVudC5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb25BbmRPdXRwYXRpZW50U3VyZ2VyeVNlcnZpY2UoKQ0KICAgICAgICAgIGFuZCBQb3Rhc3NpdW1MYWIuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9DQogICAgICAgICAgYW5kIFBvdGFzc2l1bUxhYi52YWx1ZSBpcyBub3QgbnVsbA0KICAgICAgICBzb3J0IGJ5IGlzc3VlZC5lYXJsaWVzdCgpDQogICAgKQ0KICAgIHJldHVybiB7DQogICAgICBFbmNvdW50ZXJJZDogRW5jb3VudGVySW5wYXRpZW50LmlkLA0KICAgICAgRmlyc3RSZXN1bHQ6IEZpcnN0UG90YXNzaXVtTGFiLnZhbHVlIGFzIFF1YW50aXR5LA0KICAgICAgVGltaW5nOiBGaXJzdFBvdGFzc2l1bUxhYi5pc3N1ZWQNCiAgICB9DQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggRmlyc3QgU29kaXVtIExhYiBUZXN0IjoNCiAgIklucGF0aWVudCBFbmNvdW50ZXJzIiBFbmNvdW50ZXJJbnBhdGllbnQNCiAgICBsZXQgRmlyc3RTb2RpdW1MYWI6IEZpcnN0KFsiTGFib3JhdG9yeVJlc3VsdE9ic2VydmF0aW9uIjogIlNvZGl1bSBsYWIgdGVzdCJdIFNvZGl1bUxhYg0KICAgICAgICB3aGVyZSBTb2RpdW1MYWIuZWZmZWN0aXZlLmVhcmxpZXN0KCkgZHVyaW5nIEVuY291bnRlcklucGF0aWVudC5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb25BbmRPdXRwYXRpZW50U3VyZ2VyeVNlcnZpY2UoKQ0KICAgICAgICAgIGFuZCBTb2RpdW1MYWIuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9DQogICAgICAgICAgYW5kIFNvZGl1bUxhYi52YWx1ZSBpcyBub3QgbnVsbA0KICAgICAgICBzb3J0IGJ5IGlzc3VlZC5lYXJsaWVzdCgpDQogICAgKQ0KICAgIHJldHVybiB7DQogICAgICBFbmNvdW50ZXJJZDogRW5jb3VudGVySW5wYXRpZW50LmlkLA0KICAgICAgRmlyc3RSZXN1bHQ6IEZpcnN0U29kaXVtTGFiLnZhbHVlIGFzIFF1YW50aXR5LA0KICAgICAgVGltaW5nOiBGaXJzdFNvZGl1bUxhYi5pc3N1ZWQNCiAgICB9DQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggRmlyc3QgV2hpdGUgQmxvb2QgQ2VsbHMgTGFiIFRlc3QiOg0KICAiSW5wYXRpZW50IEVuY291bnRlcnMiIEVuY291bnRlcklucGF0aWVudA0KICAgIGxldCBGaXJzdFdoaXRlQmxvb2RDZWxsTGFiOiBGaXJzdChbIkxhYm9yYXRvcnlSZXN1bHRPYnNlcnZhdGlvbiI6ICJXaGl0ZSBibG9vZCBjZWxscyBjb3VudCBsYWIgdGVzdCJdIFdoaXRlQmxvb2RDZWxsTGFiDQogICAgICAgIHdoZXJlIFdoaXRlQmxvb2RDZWxsTGFiLmVmZmVjdGl2ZS5lYXJsaWVzdCgpIGR1cmluZyBFbmNvdW50ZXJJbnBhdGllbnQuaG9zcGl0YWxpemF0aW9uV2l0aE9ic2VydmF0aW9uQW5kT3V0cGF0aWVudFN1cmdlcnlTZXJ2aWNlKCkNCiAgICAgICAgICBhbmQgV2hpdGVCbG9vZENlbGxMYWIuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9DQogICAgICAgICAgYW5kIFdoaXRlQmxvb2RDZWxsTGFiLnZhbHVlIGlzIG5vdCBudWxsDQogICAgICAgIHNvcnQgYnkgaXNzdWVkLmVhcmxpZXN0KCkNCiAgICApDQogICAgcmV0dXJuIHsNCiAgICAgIEVuY291bnRlcklkOiBFbmNvdW50ZXJJbnBhdGllbnQuaWQsDQogICAgICBGaXJzdFJlc3VsdDogRmlyc3RXaGl0ZUJsb29kQ2VsbExhYi52YWx1ZSBhcyBRdWFudGl0eSwNCiAgICAgIFRpbWluZzogRmlyc3RXaGl0ZUJsb29kQ2VsbExhYi5pc3N1ZWQNCiAgICB9DQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggRmlyc3QgV2VpZ2h0IFJlY29yZGVkIjoNCiAgIklucGF0aWVudCBFbmNvdW50ZXJzIiBFbmNvdW50ZXJJbnBhdGllbnQNCiAgICBsZXQgRmlyc3RXZWlnaHQ6IEZpcnN0KFsiVVNDb3JlQm9keVdlaWdodFByb2ZpbGUiXSBXZWlnaHRFeGFtDQogICAgICAgIHdoZXJlIFdlaWdodEV4YW0uZWZmZWN0aXZlLmVhcmxpZXN0KCkgZHVyaW5nIEVuY291bnRlcklucGF0aWVudC5ob3NwaXRhbGl6YXRpb25XaXRoT2JzZXJ2YXRpb25BbmRPdXRwYXRpZW50U3VyZ2VyeVNlcnZpY2UoKQ0KICAgICAgICAgIGFuZCBXZWlnaHRFeGFtLnN0YXR1cyBpbiB7ICdmaW5hbCcsICdhbWVuZGVkJywgJ2NvcnJlY3RlZCcgfQ0KICAgICAgICAgIGFuZCBXZWlnaHRFeGFtLnZhbHVlIGlzIG5vdCBudWxsDQogICAgICAgIHNvcnQgYnkgZWZmZWN0aXZlLmVhcmxpZXN0KCkNCiAgICApDQogICAgcmV0dXJuIHsNCiAgICAgIEVuY291bnRlcklkOiBFbmNvdW50ZXJJbnBhdGllbnQuaWQsDQogICAgICBGaXJzdFJlc3VsdDogRmlyc3RXZWlnaHQudmFsdWUgYXMgUXVhbnRpdHksDQogICAgICBUaW1pbmc6IEZpcnN0V2VpZ2h0LmVmZmVjdGl2ZS5lYXJsaWVzdCAoICkNCiAgICB9DQoNCmRlZmluZSAiRW5jb3VudGVyIFdpdGggT3h5Z2VuIDYwIE1pbnV0ZXMgT3IgTGVzcyBQcmlvciBUbyBFRCBBZG1pc3Npb24gT3IgRHVyaW5nIEVEIjoNCiAgIkluaXRpYWwgUG9wdWxhdGlvbiIgRW5jb3VudGVySW5wYXRpZW50DQogICAgd2hlcmUgZXhpc3RzICggKCBbU2VydmljZVJlcXVlc3Q6ICJOb24gSW52YXNpdmUgT3h5Z2VuIFRoZXJhcHkgYnkgTmFzYWwgQ2FubnVsYSBvciBNYXNrIl0NCiAgICAgICAgdW5pb24gW1NlcnZpY2VSZXF1ZXN0OiAiTm9uIEludmFzaXZlIE94eWdlbiBUaGVyYXB5IERldmljZSBDb2RlcyJdICkgT3h5Z2VuVGhlcmFweU9yZGVyDQogICAgICAgIHdoZXJlICggT3h5Z2VuVGhlcmFweU9yZGVyLmF1dGhvcmVkT24gZHVyaW5nIEVuY291bnRlcklucGF0aWVudC5lZFZpc2l0ICggKS5wZXJpb2QNCiAgICAgICAgICAgIG9yIE94eWdlblRoZXJhcHlPcmRlci5hdXRob3JlZE9uIDYwIG1pbnV0ZXMgb3IgbGVzcyBiZWZvcmUgb3Igb24gc3RhcnQgb2YgRW5jb3VudGVySW5wYXRpZW50LmVkVmlzaXQgKCApLnBlcmlvZA0KICAgICAgICApDQogICAgICAgICAgYW5kIE94eWdlblRoZXJhcHlPcmRlci5zdGF0dXMgaW4geyAnYWN0aXZlJywgJ2NvbXBsZXRlZCcgfQ0KICAgICAgICAgIGFuZCBPeHlnZW5UaGVyYXB5T3JkZXIuaW50ZW50ID0gJ29yZGVyJw0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgIEVuY291bnRlcklkOiBFbmNvdW50ZXJJbnBhdGllbnQuaWQsDQogICAgICAgICAgT3JkZXJTdGF0dXM6IE94eWdlblRoZXJhcHlPcmRlci5zdGF0dXMsDQogICAgICAgICAgT3JkZXJUaW1pbmc6IE94eWdlblRoZXJhcHlPcmRlci5hdXRob3JlZE9uDQogICAgICAgIH0NCiAgICApDQogICAgICBvciBleGlzdHMgKCBbUHJvY2VkdXJlOiAiTm9uIEludmFzaXZlIE94eWdlbiBUaGVyYXB5IGJ5IE5hc2FsIENhbm51bGEgb3IgTWFzayJdIE94eWdlbkFkbWluSW50ZXJ2DQogICAgICAgICAgd2hlcmUgKCBPeHlnZW5BZG1pbkludGVydi5wZXJmb3JtZWQudG9JbnRlcnZhbCAoICkgc3RhcnRzIGR1cmluZyBFbmNvdW50ZXJJbnBhdGllbnQuZWRWaXNpdCAoICkucGVyaW9kDQogICAgICAgICAgICAgIG9yIE94eWdlbkFkbWluSW50ZXJ2LnBlcmZvcm1lZC50b0ludGVydmFsICggKSA2MCBtaW51dGVzIG9yIGxlc3MgYmVmb3JlIG9yIG9uIHN0YXJ0IG9mIEVuY291bnRlcklucGF0aWVudC5lZFZpc2l0ICggKS5wZXJpb2QNCiAgICAgICAgICApDQogICAgICAgICAgICBhbmQgT3h5Z2VuQWRtaW5JbnRlcnYuc3RhdHVzID0gJ2NvbXBsZXRlZCcNCiAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgRW5jb3VudGVySWQ6IEVuY291bnRlcklucGF0aWVudC5pZCwNCiAgICAgICAgICAgIEVERW5jb3VudGVyVGltaW5nOiBFbmNvdW50ZXJJbnBhdGllbnQuZWRWaXNpdCAoICkucGVyaW9kLA0KICAgICAgICAgICAgUGVyZm9ybWVkU3RhdHVzOiBPeHlnZW5BZG1pbkludGVydi5zdGF0dXMsDQogICAgICAgICAgICBQZXJmb3JtZWRUaW1pbmc6IE94eWdlbkFkbWluSW50ZXJ2LnBlcmZvcm1lZC50b0ludGVydmFsICggKQ0KICAgICAgICAgIH0NCiAgICAgICkNCg0KZGVmaW5lICJTREUgRXRobmljaXR5IjoNCiAgU0RFLiJTREUgRXRobmljaXR5Ig0KDQpkZWZpbmUgIlNERSBQYXllciI6DQogIFNERS4iU0RFIFBheWVyIg0KDQpkZWZpbmUgIlNERSBSYWNlIjoNCiAgU0RFLiJTREUgUmFjZSINCg0KZGVmaW5lICJTREUgU2V4IjoNCiAgU0RFLiJTREUgU2V4Ig=="}]},"request":{"method":"PUT","url":"Library/CMSFHIR529HybridHospitalWideReadmission"}},{"resource":{"resourceType":"Measure","id":"CMSFHIR529HybridHospitalWideReadmission","meta":{"profile":["http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-shareablemeasure","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/computable-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/publishable-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/executable-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cql-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/elm-measure-cqfm","http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cohort-measure-cqfm"]},"contained":[{"resourceType":"Library","id":"effective-data-requirements","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://snomed.info/sct","code":"248153007","display":"Male (finding)"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://snomed.info/sct","code":"248152002","display":"Female (finding)"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://loinc.org","code":"8480-6","display":"Systolic BP"}},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Inpatient Encounters"},{"url":"statement","valueString":"define \"Inpatient Encounters\":\n  [Encounter: \"Encounter Inpatient\"] InpatientEncounter\n    with ( [Coverage: \"Medicare FFS payer\"]\n      union [Coverage: \"Medicare Advantage payer\"] ) MedicarePayer\n      such that ( InpatientEncounter.hospitalizationWithObservationAndOutpatientSurgeryService ( ).lengthInDays ( ) ) < 365\n        and InpatientEncounter.status = 'finished'\n        and AgeInYearsAt(date from start of InpatientEncounter.period) >= 65\n        and InpatientEncounter.period ends during day of \"Measurement Period\""},{"url":"displaySequence","valueInteger":0}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First Heart Rate"},{"url":"statement","valueString":"define \"Encounter With First Heart Rate\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstHeartRate: First([USCoreHeartRateProfile] HeartRate\n        where HeartRate.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and HeartRate.status in { 'final', 'amended', 'corrected' }\n          and HeartRate.value is not null\n        sort by effective.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstHeartRateResult: FirstHeartRate.value as Quantity,\n      Timing: FirstHeartRate.effective.earliest ( )\n    }"},{"url":"displaySequence","valueInteger":1}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Initial Population"},{"url":"statement","valueString":"define \"Initial Population\":\n  \"Inpatient Encounters\""},{"url":"displaySequence","valueInteger":2}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With Oxygen 60 Minutes Or Less Prior To ED Admission Or During ED"},{"url":"statement","valueString":"define \"Encounter With Oxygen 60 Minutes Or Less Prior To ED Admission Or During ED\":\n  \"Initial Population\" EncounterInpatient\n    where exists ( ( [ServiceRequest: \"Non Invasive Oxygen Therapy by Nasal Cannula or Mask\"]\n        union [ServiceRequest: \"Non Invasive Oxygen Therapy Device Codes\"] ) OxygenTherapyOrder\n        where ( OxygenTherapyOrder.authoredOn during EncounterInpatient.edVisit ( ).period\n            or OxygenTherapyOrder.authoredOn 60 minutes or less before or on start of EncounterInpatient.edVisit ( ).period\n        )\n          and OxygenTherapyOrder.status in { 'active', 'completed' }\n          and OxygenTherapyOrder.intent = 'order'\n        return {\n          EncounterId: EncounterInpatient.id,\n          OrderStatus: OxygenTherapyOrder.status,\n          OrderTiming: OxygenTherapyOrder.authoredOn\n        }\n    )\n      or exists ( [Procedure: \"Non Invasive Oxygen Therapy by Nasal Cannula or Mask\"] OxygenAdminInterv\n          where ( OxygenAdminInterv.performed.toInterval ( ) starts during EncounterInpatient.edVisit ( ).period\n              or OxygenAdminInterv.performed.toInterval ( ) 60 minutes or less before or on start of EncounterInpatient.edVisit ( ).period\n          )\n            and OxygenAdminInterv.status = 'completed'\n          return {\n            EncounterId: EncounterInpatient.id,\n            EDEncounterTiming: EncounterInpatient.edVisit ( ).period,\n            PerformedStatus: OxygenAdminInterv.status,\n            PerformedTiming: OxygenAdminInterv.performed.toInterval ( )\n          }\n      )"},{"url":"displaySequence","valueInteger":3}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First Weight Recorded"},{"url":"statement","valueString":"define \"Encounter With First Weight Recorded\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstWeight: First([\"USCoreBodyWeightProfile\"] WeightExam\n        where WeightExam.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and WeightExam.status in { 'final', 'amended', 'corrected' }\n          and WeightExam.value is not null\n        sort by effective.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstWeight.value as Quantity,\n      Timing: FirstWeight.effective.earliest ( )\n    }"},{"url":"displaySequence","valueInteger":4}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First Sodium Lab Test"},{"url":"statement","valueString":"define \"Encounter With First Sodium Lab Test\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstSodiumLab: First([\"LaboratoryResultObservation\": \"Sodium lab test\"] SodiumLab\n        where SodiumLab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and SodiumLab.status in { 'final', 'amended', 'corrected' }\n          and SodiumLab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstSodiumLab.value as Quantity,\n      Timing: FirstSodiumLab.issued\n    }"},{"url":"displaySequence","valueInteger":5}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First Glucose Lab Test"},{"url":"statement","valueString":"define \"Encounter With First Glucose Lab Test\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstGlucoseLab: First([\"LaboratoryResultObservation\": \"Glucose lab test\"] GlucoseLab\n        where GlucoseLab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and GlucoseLab.status in { 'final', 'amended', 'corrected' }\n          and GlucoseLab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstGlucoseLab.value as Quantity,\n      Timing: FirstGlucoseLab.issued\n    }"},{"url":"displaySequence","valueInteger":6}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First Bicarbonate Lab Test"},{"url":"statement","valueString":"define \"Encounter With First Bicarbonate Lab Test\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstBicarbonateLab: First([\"LaboratoryResultObservation\": \"Bicarbonate lab test\"] bicarbonatelab\n        where bicarbonatelab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and bicarbonatelab.status in { 'final', 'amended', 'corrected' }\n          and bicarbonatelab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstBicarbonateLab.value as Quantity,\n      Timing: FirstBicarbonateLab.issued\n    }"},{"url":"displaySequence","valueInteger":7}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First Respiratory Rate"},{"url":"statement","valueString":"define \"Encounter With First Respiratory Rate\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstRespRate: First([USCoreRespiratoryRateProfile] Respirations\n        where Respirations.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and Respirations.status in { 'final', 'amended', 'corrected' }\n          and Respirations.value is not null\n        sort by effective.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstRespRateResult: FirstRespRate.value as Quantity,\n      Timing: FirstRespRate.effective.earliest ( )\n    }"},{"url":"displaySequence","valueInteger":8}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"SupplementalDataElements"},{"url":"name","valueString":"SDE Race"},{"url":"statement","valueString":"define \"SDE Race\":\n  Patient.race R\n    return Tuple {\n      codes: R.ombCategory union R.detailed,\n      display: R.text\n    }"},{"url":"displaySequence","valueInteger":9}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"SDE Race"},{"url":"statement","valueString":"define \"SDE Race\":\n  SDE.\"SDE Race\""},{"url":"displaySequence","valueInteger":10}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First Hematocrit Lab Test"},{"url":"statement","valueString":"define \"Encounter With First Hematocrit Lab Test\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstHematocritLab: First([\"LaboratoryResultObservation\": \"Hematocrit lab test\"] HematocritLab\n        where HematocritLab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and HematocritLab.status in { 'final', 'amended', 'corrected' }\n          and HematocritLab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstHematocritLab.value as Quantity,\n      Timing: FirstHematocritLab.issued\n    }"},{"url":"displaySequence","valueInteger":11}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First Body Temperature"},{"url":"statement","valueString":"define \"Encounter With First Body Temperature\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstTemperature: First([USCoreBodyTemperatureProfile] Temperature\n        where Temperature.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and Temperature.status in { 'final', 'amended', 'corrected' }\n          and Temperature.value is not null\n        sort by effective.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstTemperatureResult: FirstTemperature.value as Quantity,\n      Timing: FirstTemperature.effective.earliest ( )\n    }"},{"url":"displaySequence","valueInteger":12}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"SupplementalDataElements"},{"url":"name","valueString":"SDE Sex"},{"url":"statement","valueString":"define \"SDE Sex\":\n  case\n    when Patient.sex = '248153007' then \"Male (finding)\"\n    when Patient.sex = '248152002' then \"Female (finding)\"\n    else null\n  end"},{"url":"displaySequence","valueInteger":13}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"SDE Sex"},{"url":"statement","valueString":"define \"SDE Sex\":\n  SDE.\"SDE Sex\""},{"url":"displaySequence","valueInteger":14}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First Systolic Blood Pressure"},{"url":"statement","valueString":"define \"Encounter With First Systolic Blood Pressure\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstSystolicBP: First([\"USCoreBloodPressureProfile\"] BP\n        where BP.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and BP.status in { 'final', 'amended', 'corrected' }\n          and BP.component.value is not null\n        sort by effective.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstSBPResult: FirstSystolicBP.component C\n        where C.code ~ \"Systolic blood pressure\"\n        return C.value as Quantity,\n      Timing: FirstSystolicBP.effective.earliest ( )\n    }"},{"url":"displaySequence","valueInteger":15}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"SupplementalDataElements"},{"url":"name","valueString":"SDE Payer"},{"url":"statement","valueString":"define \"SDE Payer\":\n  [Coverage: type in \"Payer Type\"] Payer\n    return {\n      code: Payer.type,\n      period: Payer.period\n    }"},{"url":"displaySequence","valueInteger":16}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"SDE Payer"},{"url":"statement","valueString":"define \"SDE Payer\":\n  SDE.\"SDE Payer\""},{"url":"displaySequence","valueInteger":17}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First Creatinine Lab Test"},{"url":"statement","valueString":"define \"Encounter With First Creatinine Lab Test\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstCreatinineLab: First([\"LaboratoryResultObservation\": \"Creatinine lab test\"] CreatinineLab\n        where CreatinineLab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and CreatinineLab.status in { 'final', 'amended', 'corrected' }\n          and CreatinineLab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstCreatinineLab.value as Quantity,\n      Timing: FirstCreatinineLab.issued\n    }"},{"url":"displaySequence","valueInteger":18}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First Potassium Lab Test"},{"url":"statement","valueString":"define \"Encounter With First Potassium Lab Test\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstPotassiumLab: First([\"LaboratoryResultObservation\": \"Potassium lab test\"] PotassiumLab\n        where PotassiumLab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and PotassiumLab.status in { 'final', 'amended', 'corrected' }\n          and PotassiumLab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstPotassiumLab.value as Quantity,\n      Timing: FirstPotassiumLab.issued\n    }"},{"url":"displaySequence","valueInteger":19}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"SupplementalDataElements"},{"url":"name","valueString":"SDE Ethnicity"},{"url":"statement","valueString":"define \"SDE Ethnicity\":\n  Patient.ethnicity E\n    return Tuple {\n      codes: { E.ombCategory } union E.detailed,\n      display: E.text\n    }"},{"url":"displaySequence","valueInteger":20}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"SDE Ethnicity"},{"url":"statement","valueString":"define \"SDE Ethnicity\":\n  SDE.\"SDE Ethnicity\""},{"url":"displaySequence","valueInteger":21}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First Oxygen Saturation"},{"url":"statement","valueString":"define \"Encounter With First Oxygen Saturation\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstOxygenSat: First([\"USCorePulseOximetryProfile\": \"Oxygen Saturation by Pulse Oximetry\"] O2Saturation\n        where O2Saturation.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and O2Saturation.status in { 'final', 'amended', 'corrected' }\n          and O2Saturation.value is not null\n        sort by effective.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstOxygenSatResult: FirstOxygenSat.value as Quantity,\n      Timing: FirstOxygenSat.effective.earliest ( )\n    }"},{"url":"displaySequence","valueInteger":22}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CMSFHIR529HybridHospitalWideReadmission"},{"url":"name","valueString":"Encounter With First White Blood Cells Lab Test"},{"url":"statement","valueString":"define \"Encounter With First White Blood Cells Lab Test\":\n  \"Inpatient Encounters\" EncounterInpatient\n    let FirstWhiteBloodCellLab: First([\"LaboratoryResultObservation\": \"White blood cells count lab test\"] WhiteBloodCellLab\n        where WhiteBloodCellLab.effective.earliest() during EncounterInpatient.hospitalizationWithObservationAndOutpatientSurgeryService()\n          and WhiteBloodCellLab.status in { 'final', 'amended', 'corrected' }\n          and WhiteBloodCellLab.value is not null\n        sort by issued.earliest()\n    )\n    return {\n      EncounterId: EncounterInpatient.id,\n      FirstResult: FirstWhiteBloodCellLab.value as Quantity,\n      Timing: FirstWhiteBloodCellLab.issued\n    }"},{"url":"displaySequence","valueInteger":23}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CQMCommon"},{"url":"name","valueString":"lengthInDays"},{"url":"statement","valueString":"/*\n@description: Calculates the difference in calendar days between the start and end of the given interval.\n*/\ndefine fluent function lengthInDays(Value Interval<DateTime> ):\n  difference in days between start of Value and end of Value"},{"url":"displaySequence","valueInteger":24}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CQMCommon"},{"url":"name","valueString":"hospitalizationWithObservationAndOutpatientSurgeryService"},{"url":"statement","valueString":"/*\n@description: Hospitalization with Observation and Outpatient Surgery Service returns the total interval from the start of any immediately prior emergency department visit, outpatient surgery visit or observation visit to the discharge of the given encounter.\n*/\ndefine fluent function hospitalizationWithObservationAndOutpatientSurgeryService(TheEncounter \"Encounter\" ):\n  TheEncounter Visit\n\t  let ObsVisit: Last([Encounter: \"Observation Services\"] LastObs\n\t\t  \twhere LastObs.status = 'finished'\n          and LastObs.period ends 1 hour or less on or before start of Visit.period\n\t\t\t  sort by\tend of period\n    \t),\n    \tVisitStart: Coalesce(start of ObsVisit.period, start of Visit.period),\n    \tEDVisit: Last([Encounter: \"Emergency Department Visit\"] LastED\n\t\t\t  where LastED.status = 'finished'\n          and LastED.period ends 1 hour or less on or before VisitStart\n\t\t\t  sort by\tend of period\n    \t),\n    \tVisitStartWithED: Coalesce(start of EDVisit.period, VisitStart),\n    \tOutpatientSurgeryVisit: Last([Encounter: \"Outpatient Surgery Service\"] LastSurgeryOP\n\t\t\t  where LastSurgeryOP.period ends 1 hour or less on or before VisitStartWithED\n\t\t\t  sort by\tend of period\n    \t)\n  \treturn Interval[Coalesce(start of OutpatientSurgeryVisit.period, VisitStartWithED), end of Visit.period]"},{"url":"displaySequence","valueInteger":25}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToInterval"},{"url":"statement","valueString":"/*\n@description: Converts the given [Period](https://hl7.org/fhir/datatypes.html#Period)\nvalue to a CQL DateTime Interval\n@comment: If the start value of the given period is unspecified, the starting\nboundary of the resulting interval will be open (meaning the start of the interval\nis unknown, as opposed to interpreted as the beginning of time).\n*/\ndefine function ToInterval(period FHIR.Period):\n    if period is null then\n        null\n    else\n        if period.\"start\" is null then\n            Interval(period.\"start\".value, period.\"end\".value]\n        else\n            Interval[period.\"start\".value, period.\"end\".value]"},{"url":"displaySequence","valueInteger":26}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"CQMCommon"},{"url":"name","valueString":"edVisit"},{"url":"statement","valueString":"/*\n@description: Returns the most recent emergency department visit, if any, that occurs 1 hour or less prior to the given encounter.\n*/\ndefine fluent function edVisit(TheEncounter Encounter ):\n  Last(\n    [Encounter: \"Emergency Department Visit\"] EDVisit\n      where EDVisit.status = 'finished'\n        and EDVisit.period ends 1 hour or less on or before start of TheEncounter.period\n      sort by end of period\n    )"},{"url":"displaySequence","valueInteger":27}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"toInterval"},{"url":"statement","valueString":"/*\n@description: Normalizes a value that is a choice of timing-valued types to an equivalent interval\n@comment: Normalizes a choice type of DateTime, Quanitty, Interval<DateTime>, or Interval<Quantity> types\nto an equivalent interval. This selection of choice types is a superset of the majority of choice types that are used as possible\nrepresentations for timing-valued elements in QICore, allowing this function to be used across any resource.\nThe input can be provided as a DateTime, Quantity, Interval<DateTime> or Interval<Quantity>.\nThe intent of this function is to provide a clear and concise mechanism to treat single\nelements that have multiple possible representations as intervals so that logic doesn't have to account\nfor the variability. More complex calculations (such as medication request period or dispense period\ncalculation) need specific guidance and consideration. That guidance may make use of this function, but\nthe focus of this function is on single element calculations where the semantics are unambiguous.\nIf the input is a DateTime, the result a DateTime Interval beginning and ending on that DateTime.\nIf the input is a Quantity, the quantity is expected to be a calendar-duration interpreted as an Age,\nand the result is a DateTime Interval beginning on the Date the patient turned that age and ending immediately before one year later.\nIf the input is a DateTime Interval, the result is the input.\nIf the input is a Quantity Interval, the quantities are expected to be calendar-durations interpreted as an Age, and the result\nis a DateTime Interval beginning on the date the patient turned the age given as the start of the quantity interval, and ending\nimmediately before one year later than the date the patient turned the age given as the end of the quantity interval.\nIf the input is a Timing, an error will be thrown indicating that Timing calculations are not implemented. Any other input will reslt in a null DateTime Interval\n*/\ndefine fluent function toInterval(choice Choice<DateTime, Quantity, Interval<DateTime>, Interval<Quantity>, Timing>):\n  case\n\t  when choice is DateTime then\n    \tInterval[choice as DateTime, choice as DateTime]\n\t\twhen choice is Interval<DateTime> then\n  \t\tchoice as Interval<DateTime>\n\t\twhen choice is Quantity then\n\t\t  Interval[Patient.birthDate + (choice as Quantity),\n\t\t\t  Patient.birthDate + (choice as Quantity) + 1 year)\n\t\twhen choice is Interval<Quantity> then\n\t\t  Interval[Patient.birthDate + (choice.low as Quantity),\n\t\t\t  Patient.birthDate + (choice.high as Quantity) + 1 year)\n\t\twhen choice is Timing then\n      Message(null, true, 'NOT_IMPLEMENTED', 'Error', 'Calculation of an interval from a Timing value is not supported') as Interval<DateTime>\n\t\telse\n\t\t\tnull as Interval<DateTime>\n\tend"},{"url":"displaySequence","valueInteger":28}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"earliest"},{"url":"statement","valueString":"/*\n@description: Given an interval, return the starting point if the interval has a starting boundary specified,\notherwise, return the ending point\n*/\ndefine fluent function earliest(choice Choice<DateTime, Quantity, Interval<DateTime>, Interval<Quantity>> ):\n  (choice.toInterval()) period\n    return\n      if (period.\"hasStart\"()) then start of period\n      else end of period"},{"url":"displaySequence","valueInteger":29}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToString"},{"url":"statement","valueString":"define function ToString(value uri): value.value"},{"url":"displaySequence","valueInteger":30}]},{"url":"http://hl7.org/fhir/StructureDefinition/cqf-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToCode"},{"url":"statement","valueString":"/*\n@description: Converts the given FHIR [Coding](https://hl7.org/fhir/datatypes.html#Coding) value to a CQL Code.\n*/\ndefine function ToCode(coding FHIR.Coding):\n    if coding is null then\n        null\n    else\n        System.Code {\n          code: coding.code.value,\n          system: coding.system.value,\n          version: coding.version.value,\n          display: coding.display.value\n        }"},{"url":"displaySequence","valueInteger":31}]}],"name":"EffectiveDataRequirements","status":"active","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/library-type","code":"module-definition"}]},"relatedArtifact":[{"type":"depends-on","display":"Library CQMCommon","resource":"https://madie.cms.gov/Library/CQMCommon|4.0.000"},{"type":"depends-on","display":"Library FHIRHelpers","resource":"https://madie.cms.gov/Library/FHIRHelpers|4.4.000"},{"type":"depends-on","display":"Library QICoreCommon","resource":"https://madie.cms.gov/Library/QICoreCommon|4.0.000"},{"type":"depends-on","display":"Library SDE","resource":"https://madie.cms.gov/Library/SupplementalDataElements|5.0.000"},{"type":"depends-on","display":"Code system SNOMEDCT","resource":"http://snomed.info/sct"},{"type":"depends-on","display":"Code system LOINC","resource":"http://loinc.org"},{"type":"depends-on","display":"Value set Encounter Inpatient","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"},{"type":"depends-on","display":"Value set Medicare FFS payer","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1104.10"},{"type":"depends-on","display":"Value set Medicare Advantage payer","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1104.12"},{"type":"depends-on","display":"Value set Observation Services","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.143"},{"type":"depends-on","display":"Value set Emergency Department Visit","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292"},{"type":"depends-on","display":"Value set Outpatient Surgery Service","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.38"},{"type":"depends-on","display":"Value set Non Invasive Oxygen Therapy by Nasal Cannula or Mask","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.209"},{"type":"depends-on","display":"Value set Non Invasive Oxygen Therapy Device Codes","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1170.57"},{"type":"depends-on","display":"Value set Sodium lab test","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.119"},{"type":"depends-on","display":"Value set Glucose lab test","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.134"},{"type":"depends-on","display":"Value set Bicarbonate lab test","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.139"},{"type":"depends-on","display":"Value set Hematocrit lab test","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.114"},{"type":"depends-on","display":"Value set Payer Type","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591"},{"type":"depends-on","display":"Value set Creatinine lab test","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.2363"},{"type":"depends-on","display":"Value set Potassium lab test","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.117"},{"type":"depends-on","display":"Value set Oxygen Saturation by Pulse Oximetry","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.151"},{"type":"depends-on","display":"Value set White blood cells count lab test","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.129"}],"parameter":[{"name":"Measurement Period","use":"in","min":0,"max":"1","type":"Period"},{"name":"Encounter With First Heart Rate","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Encounter With Oxygen 60 Minutes Or Less Prior To ED Admission Or During ED","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Encounter With First Weight Recorded","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Encounter With First Sodium Lab Test","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Encounter With First Glucose Lab Test","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Encounter With First Bicarbonate Lab Test","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Encounter With First Respiratory Rate","use":"out","min":0,"max":"*","type":"Resource"},{"name":"SDE Race","use":"out","min":0,"max":"1","type":"Resource"},{"name":"Encounter With First Hematocrit Lab Test","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Encounter With First Body Temperature","use":"out","min":0,"max":"*","type":"Resource"},{"name":"SDE Sex","use":"out","min":0,"max":"1","type":"Coding"},{"name":"Encounter With First Systolic Blood Pressure","use":"out","min":0,"max":"*","type":"Resource"},{"name":"SDE Payer","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Encounter With First Creatinine Lab Test","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Initial Population","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Encounter With First Potassium Lab Test","use":"out","min":0,"max":"*","type":"Resource"},{"name":"SDE Ethnicity","use":"out","min":0,"max":"1","type":"Resource"},{"name":"Encounter With First Oxygen Saturation","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Encounter With First White Blood Cells Lab Test","use":"out","min":0,"max":"*","type":"Resource"}],"dataRequirement":[{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","status","status.value","period","id","id.value"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1111.143"}]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","period","id","id.value"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1110.38"}]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","status","status.value","period","id","id.value"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"}]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","status","status.value","period","id","id.value"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292"}]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["period","id","id.value"]},{"type":"Patient","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient"],"mustSupport":["birthDate","birthDate.value","url","extension"]},{"type":"Coverage","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-coverage"],"mustSupport":["type"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1104.10"}]},{"type":"Coverage","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-coverage"],"mustSupport":["type"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1104.12"}]},{"type":"Coverage","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-coverage"],"mustSupport":["type","period"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/core/StructureDefinition/us-core-heart-rate"],"mustSupport":["effective","status","status.value","value"]},{"type":"ServiceRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest"],"mustSupport":["code","authoredOn","authoredOn.value","status","status.value","intent","intent.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.209"}]},{"type":"ServiceRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest"],"mustSupport":["code","authoredOn","authoredOn.value","status","status.value","intent","intent.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1170.57"}]},{"type":"Procedure","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure"],"mustSupport":["code","performed","status","status.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1248.209"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/core/StructureDefinition/us-core-body-weight"],"mustSupport":["effective","status","status.value","value"]},{"type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab"],"mustSupport":["code","effective","status","status.value","value","issued","issued.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.119"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab"],"mustSupport":["code","effective","status","status.value","value","issued","issued.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.134"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab"],"mustSupport":["code","effective","status","status.value","value","issued","issued.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.139"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab"],"mustSupport":["code","effective","status","status.value","value","issued","issued.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.114"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab"],"mustSupport":["code","effective","status","status.value","value","issued","issued.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.2363"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab"],"mustSupport":["code","effective","status","status.value","value","issued","issued.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.117"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation-lab"],"mustSupport":["code","effective","status","status.value","value","issued","issued.value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.129"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/core/StructureDefinition/us-core-respiratory-rate"],"mustSupport":["effective","status","status.value","value"]},{"type":"Observation","profile":["http://hl7.org/fhir/us/core/StructureDefinition/us-core-body-temperature"],"mustSupport":["effective","status","status.value","value"]},{"type":"Observation","profile":["http://hl7.org/fhir/us/core/StructureDefinition/us-core-blood-pressure"],"mustSupport":["effective","status","status.value","component"]},{"type":"Observation","profile":["http://hl7.org/fhir/us/core/StructureDefinition/us-core-pulse-oximetry"],"mustSupport":["code","effective","status","status.value","value"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1045.151"}]}]}],"extension":[{"id":"supplementalDataGuidance","url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-supplementalDataGuidance","extension":[{"url":"guidance","valueString":"For hospitalizations in the Initial Population, report the FIRST resulted vital signs (physical exams) during current hospitalization. \n\nThe physical exam CCDEs are as follows:\nBody Temperature\nHeart rate\nOxygen saturation (by pulse oximetry)\nRespiratory rate\nSystolic blood pressure\nBody weight\n\nFor laboratory test results, report the FIRST resulted laboratory tests where result is not null during current hospitalization. \n\nThe laboratory test CCDEs are as follows:\nBicarbonate\nCreatinine \nGlucose\nHematocrit\nPotassium\nSodium\nWhite blood cell count\n\nFor oxygen administration CCDE, report oxygen administered during Emergency Department (ED) admission OR 60 minutes prior to ED admission\n\nFirst values for the physical exam and laboratory test CCDEs may be resulted in the emergency department or other hospital outpatient locations within the hospital facility before a patient is subsequently admitted to the same hospital. First values for these data elements may also be resulted in an inpatient location for directly admitted patients who do not receive care in the emergency department or other hospital outpatient/same day surgery locations before admission. \n\nNOTE: Hospitals may choose to submit all, or only report the FIRST resulted value for EACH CCDE collected in the appropriate timeframe, if available.\n\nFor every patient in the Initial Population, also identify payer, race, ethnicity and sex."},{"url":"usage","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data","display":"Supplemental Data"}],"text":"Supplemental Data Guidance"}}]},{"url":"http://hl7.org/fhir/uv/crmi/StructureDefinition/crmi-effectiveDataRequirements","valueReference":{"reference":"#effective-data-requirements"}}],"url":"https://madie.cms.gov/Measure/CMSFHIR529HybridHospitalWideReadmission","identifier":[{"use":"usual","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"short-name","display":"Short Name"}]},"system":"https://madie.cms.gov/measure/shortName","value":"CMS529FHIR"},{"use":"official","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"version-independent","display":"Version Independent"}]},"system":"urn:ietf:rfc:3986","value":"urn:uuid:66842e26-2256-4a2d-8dac-dd014c425748"},{"use":"official","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"version-specific","display":"Version Specific"}]},"system":"urn:ietf:rfc:3986","value":"urn:uuid:a4f5731c-3374-4b02-8586-72572d3853e5"},{"use":"official","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"endorser","display":"Endorser"}]},"system":"https://madie.cms.gov/measure/cbeId","value":"2879","assigner":{"display":"CMS Consensus Based Entity"}},{"use":"official","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/artifact-identifier-type","code":"publisher","display":"Publisher"}]},"system":"https://madie.cms.gov/measure/cmsId","value":"529FHIR","assigner":{"display":"CMS"}}],"version":"0.4.002","name":"CMSFHIR529HybridHospitalWideReadmission","title":"Core Clinical Data Elements for the Hybrid Hospital-Wide Readmission Measure with Claims and Electronic Health Record Data HWRFHIR","status":"active","experimental":false,"date":"2025-04-21T15:42:49+00:00","publisher":"Centers for Medicare & Medicaid Services (CMS)","contact":[{"telecom":[{"system":"url","value":"https://www.cms.gov/"}]}],"description":"This logic is intended to extract electronic clinical data. This is not an electronic clinical quality measure and this logic will not produce measure results. Instead, it will produce a file containing the data that CMS will link with administrative claims to risk adjust the Hybrid HWR outcome measure. It is designed to extract the first resulted set of vital signs and basic laboratory results obtained from hospitalizations for adult Medicare Fee-For-Service (FFS) and Medicare Advantage (MA) patients admitted to acute care hospitals.","usage":"These specifications are for use for data with discharges that occur between July 1, 2026 and June 30, 2027. The associated Hospital Specific Report (HSR) is anticipated to be released in Spring 2028.\n\nAs this is a hybrid outcome measure, the electronic specifications contained within this document only cover the case-mix risk-adjustment variables, which ultimately need to be combined with the claims data to calculate an outcome. The logic contained here cannot be used alone to calculate outcome or performance.\n\nThis logic guides the user to extract the FIRST valid resulted HWR-specific CCDEs for all Medicare FFS and MA hospitalizations for patients age 65 or older (Initial Population) directly admitted to the hospital or admitted to the same facility after being treated in another area such as the emergency department or hospital outpatient/same day surgery location. \n\nThe logic supports extraction of the FIRST resulted vital signs and laboratory tests, where the result is not null, during the patient encounter or episode of care. This may include values captured after inpatient admission, as well as prior to inpatient admission, for example from the emergency department, pre-operative, or other outpatient areas associated with the hospital, as long as the values fall within the allowed timeframes specified in the measure logic.  All clinical systems used in inpatient and outpatient locations associated with the hospital facility should be queried for core clinical data element values related to a patient who is subsequently admitted.\n\nPatients who arrive at the hospital on oxygen therapy will be flagged in the logic, and the information will be incorporated into the risk adjustment models.  Rationale: patients who arrive on oxygen may appear in better condition, that is, having a higher oxygen saturation due to oxygen administration, that is not truly reflective of the patient's status upon arrival.\n\nValue sets for the laboratory tests are represented using Logical Observation Identifiers Names Codes (LOINC) currently available for these tests. If the institution is using local codes to capture and store relevant laboratory test data, those sites should map that information to the LOINC code for reporting of the CCDEs.\n\nNOTE: It is recommended hospitals only report the FIRST resulted value for EACH core clinical data element collected in the appropriate timeframe, if available. Hospitals may also choose to report ALL values on an encounter during their entire admission; however, only the first resulted values are utilized in the logic for measure calculation.\n\nFor each CCDE, it is recommended that hospitals report the below Unified Code for Units of Measure (UCUM) units, however, any units may be submitted. Where the reported unit is not easily converted to the requested UCUM units, the value will be set to missing and the median value reported for that CCDE will be imputed.\n\nCCDE                                              UCUM Units\n\nBicarbonate-------------------------------------meq/L \n                                                                                                mmol/L \n\nCreatinine---------------------------------------mg/dL \n                                                   \n\nGlucose-----------------------------------------mg/dL\n                                                                                                mmol/L\n\nHeart rate---------------------------------------{Beats}/min\n\nHematocrit -------------------------------------%\n\nOxygen saturation (by pulse oximetry)- ----------%\n\nPotassium--------------------------------------meq/L \n                                                                                               mmol/L\n\nRespiratory rate---------------------------------{Breaths}/min\n\nSodium-----------------------------------------meq/L\n                                                                                               mmol/L\n \nSystolic blood pressure-------------------------mm[Hg]\n\nTemperature-----------------------------------Cel\n                                                                                             [degF]  \n\nWeight-----------------------------------------kg\n                                                                                              [lb_av]\n                                                                                              g\n                                                          \nWhite blood cell count --------------------------{Cells}/uL\n                                                                                              10*3/uL\n                                                                                              10*9/L \n                                                             \nFor each hospitalization please also submit the following Linking Variables: \nCMS Certification Number (CCN); \nMedicare Beneficiary Identifier (MBI);\nInpatient Admission Date; and\nDischarge Date.\n\nThe initial population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home.\n\nThis FHIR-based measure has been derived from the QDM-based measure: CMS529v6. \n\nPlease refer to the HL7 QI-Core Implementation Guide (https://hl7.org/fhir/us/qicore/STU6/) for more information on QI-Core and mapping recommendations from QDM to QI-Core 6 (https://hl7.org/fhir/us/qicore/STU6/qdm-to-qicore.html).","copyright":"Limited proprietary coding is contained in these specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets.\n\nThis material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2024 International Health Terminology Standards Development Organisation. All rights reserved.\n\nLOINC(R) copyright 2004-2024 Regenstrief Institute, Inc.","effectivePeriod":{"start":"2026-07-01","end":"2027-06-30"},"author":[{"name":"Lantana Consulting Group","telecom":[{"system":"url","value":"https://www.lantanagroup.com/"}]},{"name":"Yale New Haven Health Service Corporation/ Center for Outcomes Research and Evaluation","telecom":[{"system":"url","value":"https://medicine.yale.edu/core/"}]}],"library":["https://madie.cms.gov/Library/CMSFHIR529HybridHospitalWideReadmission"],"disclaimer":"These performance specifications are not clinical guidelines, do not establish a standard of medical care, and have not been tested for all potential applications.\n\nTHE MEASURES AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n\nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].","rationale":"The intent of this logic is to extract the FIRST valid set of clinical data elements from hospital electronic health records (EHRs) for all qualifying hospitalizations. The data will be linked with administrative claims to risk adjust the Hybrid HWR outcome measure. This work addresses stakeholder concerns that clinical data garnered from patients and used by clinicians to guide diagnostic decisions and treatment, are preferable to administrative claims data when profiling hospitals' case mix. We are calling the list of data elements for extraction the \"HWR-specific core clinical data elements\" (CCDE). The CCDE are the first set of vital signs and basic laboratory tests resulted from hospitalizations for adult Medicare FFS and MA patients, age 65 or older (Initial Population), after they arrive at the hospital to which they are subsequently admitted. For example, this first set of data values are often captured in the emergency department or in the pre-operative area, sometimes hours before a patient is admitted to that same facility. \n\nThese data elements were selected because they: 1. reflect patients' clinical status when they first present to the hospital, 2. are clinically and statistically relevant to patient outcomes, 3. are consistently obtained during adult inpatient hospitalizations based on current clinical practice, 4. are captured with a standard definition and recorded in a standard format across providers, and 5. are entered in structured fields that are feasibly retrieved from current EHR systems (YNHHS/CORE, 2015).\n\nAdditional data called Linking Variables are used to link EHR data files with administrative claims data for CMS to calculate results for the Hybrid HWR measure, which are: CMS Certification Number (CCN); Medicare Beneficiary Identifier (MBI); Inpatient Admission Date; and Discharge Date.","clinicalRecommendationStatement":"The logic is not meant to guide or alter the care patients receive. The purpose of this CCDE logic is to extract clinical data that are already routinely captured in EHRs from hospitalizations for adult patients. It is not intended to require that clinical staff perform additional measurements or tests that are not needed for diagnostic assessment or treatment of patients.","guidance":"These specifications are for use for data with discharges that occur between July 1, 2026 and June 30, 2027. The associated Hospital Specific Report (HSR) is anticipated to be released in Spring 2028.\n\nAs this is a hybrid outcome measure, the electronic specifications contained within this document only cover the case-mix risk-adjustment variables, which ultimately need to be combined with the claims data to calculate an outcome. The logic contained here cannot be used alone to calculate outcome or performance.\n\nThis logic guides the user to extract the FIRST valid resulted HWR-specific CCDEs for all Medicare FFS and MA hospitalizations for patients age 65 or older (Initial Population) directly admitted to the hospital or admitted to the same facility after being treated in another area such as the emergency department or hospital outpatient/same day surgery location. \n\nThe logic supports extraction of the FIRST resulted vital signs and laboratory tests, where the result is not null, during the patient encounter or episode of care. This may include values captured after inpatient admission, as well as prior to inpatient admission, for example from the emergency department, pre-operative, or other outpatient areas associated with the hospital, as long as the values fall within the allowed timeframes specified in the measure logic.  All clinical systems used in inpatient and outpatient locations associated with the hospital facility should be queried for core clinical data element values related to a patient who is subsequently admitted.\n\nPatients who arrive at the hospital on oxygen therapy will be flagged in the logic, and the information will be incorporated into the risk adjustment models.  Rationale: patients who arrive on oxygen may appear in better condition, that is, having a higher oxygen saturation due to oxygen administration, that is not truly reflective of the patient's status upon arrival.\n\nValue sets for the laboratory tests are represented using Logical Observation Identifiers Names Codes (LOINC) currently available for these tests. If the institution is using local codes to capture and store relevant laboratory test data, those sites should map that information to the LOINC code for reporting of the CCDEs.\n\nNOTE: It is recommended hospitals only report the FIRST resulted value for EACH core clinical data element collected in the appropriate timeframe, if available. Hospitals may also choose to report ALL values on an encounter during their entire admission; however, only the first resulted values are utilized in the logic for measure calculation.\n\nFor each CCDE, it is recommended that hospitals report the below Unified Code for Units of Measure (UCUM) units, however, any units may be submitted. Where the reported unit is not easily converted to the requested UCUM units, the value will be set to missing and the median value reported for that CCDE will be imputed.\n\nCCDE                                              UCUM Units\n\nBicarbonate-------------------------------------meq/L \n                                                                                                mmol/L \n\nCreatinine---------------------------------------mg/dL \n                                                   \n\nGlucose-----------------------------------------mg/dL\n                                                                                                mmol/L\n\nHeart rate---------------------------------------{Beats}/min\n\nHematocrit -------------------------------------%\n\nOxygen saturation (by pulse oximetry)- ----------%\n\nPotassium--------------------------------------meq/L \n                                                                                               mmol/L\n\nRespiratory rate---------------------------------{Breaths}/min\n\nSodium-----------------------------------------meq/L\n                                                                                               mmol/L\n \nSystolic blood pressure-------------------------mm[Hg]\n\nTemperature-----------------------------------Cel\n                                                                                             [degF]  \n\nWeight-----------------------------------------kg\n                                                                                              [lb_av]\n                                                                                              g\n                                                          \nWhite blood cell count --------------------------{Cells}/uL\n                                                                                              10*3/uL\n                                                                                              10*9/L \n                                                             \nFor each hospitalization please also submit the following Linking Variables: \nCMS Certification Number (CCN); \nMedicare Beneficiary Identifier (MBI);\nInpatient Admission Date; and\nDischarge Date.\n\nThe initial population includes patients with inpatient hospitalizations and patients from Acute Hospital Care at Home programs, who are treated and billed as inpatients but receive care in their home.\n\nThis FHIR-based measure has been derived from the QDM-based measure: CMS529v6. \n\nPlease refer to the HL7 QI-Core Implementation Guide (https://hl7.org/fhir/us/qicore/STU6/) for more information on QI-Core and mapping recommendations from QDM to QI-Core 6 (https://hl7.org/fhir/us/qicore/STU6/qdm-to-qicore.html).","group":[{"id":"Group_1","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-scoring","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-scoring","code":"cohort","display":"Cohort"}]}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-populationBasis","valueCode":"Encounter"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-type","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-type","code":"outcome","display":"Outcome"}]}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-rateAggregation","valueCode":"None"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-improvementNotation","valueCodeableConcept":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-improvement-notation","code":"decrease","display":"decrease"}]}}],"description":"This logic is intended to extract electronic clinical data. This is not an electronic clinical quality measure and this logic will not produce measure results. Instead, it will produce a file containing the data that CMS will link with administrative claims to risk adjust the Hybrid HWR outcome measure. It is designed to extract the first resulted set of vital signs and basic laboratory results obtained from hospitalizations for adult Medicare Fee-For-Service (FFS) and Medicare Advantage (MA) patients admitted to acute care hospitals.","population":[{"id":"InitialPopulation_1","code":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-population","code":"initial-population","display":"Initial Population"}]},"description":"All Medicare FFS and MA hospitalizations for patients aged 65 and older at the start of an inpatient admission, where the length of stay is less than 365 days, and the hospitalization ends during the measurement period. \n\nNOTE: All Medicare FFS and MA hospitalizations meeting the above criteria should be included, regardless of whether Medicare FFS/MA is the primary, secondary, or tertiary payer.","criteria":{"language":"text/cql-identifier","expression":"Initial Population"}}]}],"supplementalData":[{"id":"encounter-with-first-body-temperature","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First Body Temperature","criteria":{"language":"text/cql-identifier","expression":"Encounter With First Body Temperature"}},{"id":"encounter-with-first-heart-rate","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First Heart Rate","criteria":{"language":"text/cql-identifier","expression":"Encounter With First Heart Rate"}},{"id":"encounter-with-first-respiratory-rate","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First Respiratory Rate","criteria":{"language":"text/cql-identifier","expression":"Encounter With First Respiratory Rate"}},{"id":"encounter-with-first-systolic-blood-pressure","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First Systolic Blood Pressure","criteria":{"language":"text/cql-identifier","expression":"Encounter With First Systolic Blood Pressure"}},{"id":"encounter-with-first-bicarbonate-lab-test","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First Bicarbonate Lab Test","criteria":{"language":"text/cql-identifier","expression":"Encounter With First Bicarbonate Lab Test"}},{"id":"encounter-with-first-creatinine-lab-test","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First Creatinine Lab Test","criteria":{"language":"text/cql-identifier","expression":"Encounter With First Creatinine Lab Test"}},{"id":"encounter-with-first-glucose-lab-test","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First Glucose Lab Test","criteria":{"language":"text/cql-identifier","expression":"Encounter With First Glucose Lab Test"}},{"id":"encounter-with-first-hematocrit-lab-test","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First Hematocrit Lab Test","criteria":{"language":"text/cql-identifier","expression":"Encounter With First Hematocrit Lab Test"}},{"id":"encounter-with-first-potassium-lab-test","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First Potassium Lab Test","criteria":{"language":"text/cql-identifier","expression":"Encounter With First Potassium Lab Test"}},{"id":"encounter-with-first-sodium-lab-test","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First Sodium Lab Test","criteria":{"language":"text/cql-identifier","expression":"Encounter With First Sodium Lab Test"}},{"id":"encounter-with-first-white-blood-cells-lab-test","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First White Blood Cells Lab Test","criteria":{"language":"text/cql-identifier","expression":"Encounter With First White Blood Cells Lab Test"}},{"id":"encounter-with-first-weight-recorded","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First Weight Recorded","criteria":{"language":"text/cql-identifier","expression":"Encounter With First Weight Recorded"}},{"id":"sde-ethnicity","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"SDE Ethnicity","criteria":{"language":"text/cql-identifier","expression":"SDE Ethnicity"}},{"id":"sde-payer","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"SDE Payer","criteria":{"language":"text/cql-identifier","expression":"SDE Payer"}},{"id":"sde-race","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"SDE Race","criteria":{"language":"text/cql-identifier","expression":"SDE Race"}},{"id":"sde-sex","usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"SDE Sex","criteria":{"language":"text/cql-identifier","expression":"SDE Sex"}},{"id":"encounter-with-first-oxygen-saturation","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With First Oxygen Saturation","criteria":{"language":"text/cql-identifier","expression":"Encounter With First Oxygen Saturation"}},{"id":"encounter-with-oxygen-60-minutes-or-less-prior-to-ed-admission-or-during-ed","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"individual"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"subject-list"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"summary"},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-includeInReportType","valueCode":"data-collection"}],"usage":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/measure-data-usage","code":"supplemental-data"}]}],"description":"Encounter With Oxygen 60 Minutes Or Less Prior To ED Admission Or During ED","criteria":{"language":"text/cql-identifier","expression":"Encounter With Oxygen 60 Minutes Or Less Prior To ED Admission Or During ED"}}]},"request":{"method":"PUT","url":"Measure/CMSFHIR529HybridHospitalWideReadmission"}}]}